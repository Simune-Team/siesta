=======================================================================
                  SIESTA CHANGES: TOP IS MOST RECENT
=======================================================================
ARCH: WILL be cvs 1.4.31
(patch-12)
Creator: Toby White <tow21@cam.ac.uk>
Modified-files: Src/cdiag.F Src/scalapack_extra.f
Summary: bugfixes for Julian's diagon improvements
Keywords: scalapack blas ztrsm

* scalapack_extra needs an extra couple of routines now. With
  these siesta will now compile with Sun's S3L library for 
  its blas/scalapack.
* In cdiag.F, ztrsm was being called with an incorrectly typed
  7th argument. This silently introduced random numbers into the
  energy.

(patch-13)
Summary: fix ztrsm bugfix
Keywords:

* previous bugfix omitted kind= keyword from cmplx
* also apply same bugfix to pblas pztrsm calls.

Patches applied:

 * twhite@siesta.arch--2004/siesta-devel--twhite--1.4--patch-7
   fix ztrsm bugfix

=======================================================================
Version: 1.4.30
Date: 2004/12/10  15:45 GMT
Title: Add missing autoconf files (no arch change)
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

While committing patch-10 from arch, CVS did not flag
some files as "not added". They are added now.
These files should have been part of 1.4.28.

Files:

aclocal.m4 arch.make.in config.guess 
config.sub configure configure.ac       : New files

ARCH info:  No change (new files were part of
                       siesta-devel--reference--1.4--patch-10)
=======================================================================
Version: 1.4.29
Date: 2004/12/10  7:30 GMT
Title: New parallel denmat 
Author: Julian Gale <julian@power.curtin.edu.au>

The multiplication of cHc / cSc by c in denmat has been rewritten in
terms of using numct/listct, instead of numf/listf to go directly
to ftG/fstG, rather than via chcc/cscc. A number of related clean ups
in the parallel order N have been made.

Files:

atomlwf.F     The arrays nbNode and nbAtom have been removed
denmat.F      Algorithm changed for chc/csc x c step /
              arrays chcc & cscc eliminated / globaliseF not
              called anymore.
egandd.F      Arrays f & fs no longer passed to denmat.F
ener3.F       The array nbNode is no longer "use"d
ener3lomem.F  The array nbNode is no longer "use"d
globalise.F   Local elements of buxg are now explicitly zeroed for
              safety during rezero call.
onmod.F       The arrays nbNode and nbAtom have been removed
ordern.F      The arrays nbNode and nbAtom have been removed
version.F / CHANGES - as per usual
=======================================================================
Version: 1.4.28
Date: 2004/12/09  18:00 GMT
Title: Autoconf (siesta-devel--reference--1.4--patch-10)
Author: Toby White (committed by Alberto Garcia)

Changes:

 * Add requisite files for autoconf.
  - aclocal.m4 & configure are generated files.

 * Remove cleaning of aux_ files from Makefile

ARCH info:

Revision: siesta-devel--reference--1.4--patch-10
Archive: siesta@uam.es--2004
Creator: Alberto Garcia <wdpgaara@lg.ehu.es>
Date: Tue Dec  7 21:54:51 CET 2004
Standard-date: 2004-12-07 20:54:51 GMT
New-files: Src/.arch-ids/aclocal.m4.id
    Src/.arch-ids/arch.make.in.id
    Src/.arch-ids/config.guess.id
    Src/.arch-ids/config.sub.id
    Src/.arch-ids/configure.ac.id
    Src/.arch-ids/configure.id Src/aclocal.m4
    Src/arch.make.in Src/config.guess Src/config.sub
    Src/configure Src/configure.ac Src/m4/.arch-ids/=id
    Src/m4/.arch-ids/ACX_MPI.m4.id
    Src/m4/.arch-ids/TW_CHECK_BLACS.m4.id
    Src/m4/.arch-ids/TW_CHECK_FC_90.m4.id
    Src/m4/.arch-ids/TW_CHECK_FC_95.m4.id
    Src/m4/.arch-ids/TW_CHECK_FC_FPP.m4.id
    Src/m4/.arch-ids/TW_CHECK_FC_FPP_90.m4.id
    Src/m4/.arch-ids/TW_CHECK_FC_TR15580.m4.id
    Src/m4/.arch-ids/TW_CHECK_FC_TR15581.m4.id
    Src/m4/.arch-ids/TW_CHECK_SCALAPACK.m4.id
    Src/m4/.arch-ids/TW_FC_CHECK_DCFUNS.m4.id
    Src/m4/.arch-ids/TW_FC_CHECK_FLUSH.m4.id
    Src/m4/.arch-ids/TW_FC_ID.m4.id
    Src/m4/.arch-ids/TW_FC_ID_FLAGS.m4.id
    Src/m4/.arch-ids/TW_FIND_FC_BLAS.m4.id
    Src/m4/.arch-ids/TW_FIND_LAPACK.m4.id
    Src/m4/.arch-ids/TW_PATH_NETCDF.m4.id
    Src/m4/.arch-ids/TW_TRY_DC_LAPACK.m4.id
    Src/m4/.arch-ids/ac_config_aux_dirs.m4.id
    Src/m4/.arch-ids/fortran.m4.id Src/m4/ACX_MPI.m4
    Src/m4/TW_CHECK_BLACS.m4 Src/m4/TW_CHECK_FC_90.m4
    Src/m4/TW_CHECK_FC_95.m4 Src/m4/TW_CHECK_FC_FPP.m4
    Src/m4/TW_CHECK_FC_FPP_90.m4
    Src/m4/TW_CHECK_FC_TR15580.m4
    Src/m4/TW_CHECK_FC_TR15581.m4
    Src/m4/TW_CHECK_SCALAPACK.m4
    Src/m4/TW_FC_CHECK_DCFUNS.m4
    Src/m4/TW_FC_CHECK_FLUSH.m4 Src/m4/TW_FC_ID.m4
    Src/m4/TW_FC_ID_FLAGS.m4 Src/m4/TW_FIND_FC_BLAS.m4
    Src/m4/TW_FIND_LAPACK.m4 Src/m4/TW_PATH_NETCDF.m4
    Src/m4/TW_TRY_DC_LAPACK.m4 Src/m4/ac_config_aux_dirs.m4
    Src/m4/fortran.m4
New-directories: Src/m4 Src/m4/.arch-ids
Modified-files: Src/Makefile
New-patches: siesta@uam.es--2004/siesta-devel--reference--1.4--patch-10
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--base-0
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-1
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-2
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-3
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-4
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-5
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-6
    twhite@siesta.arch--2004/siesta-devel--autoconf--1.4--patch-7
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--base-0
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-1
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-2
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-7
    twhite@siesta.arch--2004/siesta-devel--twhite--1.4--patch-4
Summary: Autoconf files -- merge of siesta-devel--twhite--1.4--patch-4
Keywords: 



=======================================================================
Version: 1.4.27
Date: 2004/12/09  17:30 GMT
Title: Fixes by Toby White (siesta-devel--reference--1.4--patch-9)
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Changes:

    * minor fixes to let NAG run with fewer complaints
    * - neigh.f: initialize CELAST & RGLAST before use
                 use precision module
                 add intents to arguments
      - meshmatrix.F: do not test size of unallocated array
      - matel.f & meshsubs.f: make sure literal constants have
                              correct precision
    * Rearrange Libs:
      - move IEEECK from blas.f to lapack.f
      - replace machine.f with LAPACK3E version which is not
        broken by optimization.
      - Src/Libs/makefile & Src/Makefile: add separate targets 
                                          for libblas.a and liblapack.a
    * Src/Makefile fixes: 
      - clear SUFFIXES at the start (fixes .mod Modula-2 problems)
      - Fix sed quoting in version rule (and tidy it up a bit)

ARCH info:

Revision: siesta-devel--reference--1.4--patch-9
Archive: siesta@uam.es--2004
Creator: Alberto Garcia <wdpgaara@lg.ehu.es>
Date: Tue Dec  7 20:22:24 CET 2004
Standard-date: 2004-12-07 19:22:24 GMT
Renamed-files: Src/Libs/.arch-ids/machine.f.id Src/Libs/.arch-ids/machine.F.id
    Src/Libs/machine.f Src/Libs/machine.F
Modified-files: Src/Libs/README Src/Libs/blas.f
    Src/Libs/lapack.f Src/Libs/machine.F Src/Libs/makefile
    Src/Makefile Src/matel.f Src/meshmatrix.F Src/meshsubs.F
    Src/neighb.f
Modified-directories: Src/Libs/.arch-ids
New-patches: siesta@uam.es--2004/siesta-devel--reference--1.4--patch-9
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-3
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-4
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-5
    twhite@siesta.arch--2004/siesta-devel--tw-bugfix--1.4--patch-6
    twhite@siesta.arch--2004/siesta-devel--twhite--1.4--base-0
    twhite@siesta.arch--2004/siesta-devel--twhite--1.4--patch-1
    twhite@siesta.arch--2004/siesta-devel--twhite--1.4--patch-2
    twhite@siesta.arch--2004/siesta-devel--twhite--1.4--patch-3
Summary: Merge of siesta-devel--twhite--1.4--patch-3
Keywords: 

** Transitional fixes:

	Removed obsolete files:

	Src/fdf:   fdf2.f  fdf3.f
        Src/NetCDF:  netcdf.f90.orig netcdf_overloads.f90.orig
        Util/Denchar/Src/NetCDF:  netcdf.f90.orig netcdf_overloads.f90.orig
	Docs/Tech: basis_generation.html index.html

=======================================================================
Version: 1.4.26
Date: 2004/12/05  3:30 GMT
Title: Fixes for test example bugs
Author: Julian Gale <julian@power.curtin.edu.au>

dfscf.f         Setting of Parallel_Run variable corrected
gradient.F      Reinitialisation of bux1/2 moved for correct 
                operation of serial version.
pdos.F          Deallocation of tmp moved to correct place
siesta.F        Initialisation of Escf given explicit limits
=======================================================================
Version: 1.4.25
Date: 2004/12/02  4:00 GMT
Title: Fix for parallel ON grad
Author: Julian Gale <julian@power.curtin.edu.au>

The algorithm used in gradient.F to calculate the gradients of the
LWF coefficients has been subtly modified. In the previous version
it was found that every so often a contribution from one Node to 
a gradient only present on another node was occuring. This is now
avoided by computing the first term in the gradient using globalised
versions of bux1/2 & ft/fst. Consequently it is now restricted to 
only those basis functions in grad for which the local node is
responsible. However, bux1 has to be globalised as well as bux2.

Files:
dhscf.F      Call to create mapping of Dscf to DscfL wrapped by check
             on number of processors, rather than local number of 
             orbitals in line with changes for version 1.4.24
gradient.F   Algorithm modifed as described above
version.F90, CHANGES
=======================================================================
Version: 1.4.24
Date: 2004/11/28 12:00 GMT
Title: Zero work on nodes fixes
Author: Julian Gale <julian@power.curtin.edu.au>

A few changes have been made to handle the case where a spatial
decomposition is used but there are no orbitals assigned to a
given node. 

Files:
denmat.F     Trap for nbasisloc = 0 in referencing arrays
dfscf.f      Local parallel variables set based on number of nodes
ordern.F     Trap for nbasisloc = 0 in referencing arrays
rhoofd.f     Local parallel variables set based on number of nodes
vmat.f       Local parallel variables set based on number of nodes
version.F90, CHANGES
=======================================================================
Version: 1.4.23
Date: 2004/11/24 12:00 GMT
Title: Increased maxclustersize in diagonalisation
Author: Julian Gale <julian@power.curtin.edu.au>

The default value of maxclustersize in rdiag/cdiag has been increased
from 0 to 12. In the case of degenerate eigenvalue clusters, this will
save one call to the diag routines if the number is less than 12.

Files:

cdiag.F      maxclustersize initialised to 12
rdiag.F      maxclustersize initialised to 12
version.F90, CHANGES
=======================================================================
Version: 1.4.22
Date: 2004/11/23 1:00 GMT
Title: Fix to setting of neigwanted for spin polarisation
Author: Julian Gale <julian@power.curtin.edu.au>

Small fix to siesta.F in the setting of neigwanted. Previous
version failed for spin polarisation because qtot needed to
be replaced by qs(is) in the calculation of neigmin. Check
against neigmin moved to last for safety too.

Files:

siesta.F      Setting of neigmin corrected for nspin>1
version.F90, CHANGES
=======================================================================
Version: 1.4.21
Date: 2004/11/22 8:40 GMT
Title: New spin polarised order N and diagonalisation routines
Author: Julian Gale <julian@power.curtin.edu.au>

Three major changes and lots of small ones. The key changes are:

(A) Matrix diagonalisation:

Matrix diagonalisation routines have been rewritten to give greater 
control over diagonalisation algorithms. Changes include:

(1) Option to use expert or simple interface
(2) Option to use "all in one" call of diagonaliser or components
(3) Parallel divide and conquer added
(4) Option for pre- and post- rotation of standard eigensolutions added
(5) SIESTA specific lapack calls added to reduce memory usage in
    divide and conquer algorithms
(6) Work space sizes now set to value that is likely to give the
    best performance rather than the minimum
(7) Names of control options now pre-fixed with "Diag."
(8) Facility for changing algorithm as a function of no. of SCF
    cycle included
(9) A 2-D decomposition is now the default for scalapack since this
    is found to give radically improved scaling in the parallel
    performance.

(B) Order N:

Parallel code has been rewritten based on 0.15 version, with a spatial
decomposition strategy. This is based on an approach that minimises
communication at the expense of memory by only passing between two
nodes once per array during the key order N routines. The routines
are designed to be efficient for large problems - i.e. when the size
of the interaction range is small compared to region size stored on
each node.

(C) Spin-polarised order N:

Separate Fermi lelvels can now be set for alpha and beta spin so as
to perform spin polarised order N. Look forward to double the
convergence problems though!

Files:

Docs/

siesta.tex         Modified to reflect the option changes for the 
                   new version.

Src/

alloc.F90          Unused variables removed
                   REPORT_LEVEL now broadcast to all nodes
                   Output now enable for level 4 case in parallel
atmfuncs.f         lmxkbfis accessed from module
atmparams.f        Default value of nsmx now = 2, rather than 1.
atomlist.f         Size of variable in write statement increased
atomlwf.F          New order N version with spin polarisation
bands.F            Reference to dot removed
                   occtol pased through to diag routines
                   Unused variables removed
cart2frac.f        Routine added to convert Cartesian to fractional coordinates
                   for use in spatial decomposition.
cdiag.F            Blacs communicators now only setup once
                   Rewritten to allow access to full (sca)lapack functionality
                   Parallel divide and conquer added
                   2-D decomposition added
cellxc.F           Double precision -> real(dp)
                   Unused variables removed
chkgmx.f           Function dot replaced by blas routine ddot
cgwf.F             New order N version with spin polarisation
chempot.F          Double precision -> real(dp) + module use onlys added
                   Order of dense matrix initialise loop swaped for efficiency
                   Timing calls placed in chempot rather than calling routine
chkgmx.f           Function dot replaced by blas routine ddot
conjgr.f           Function dot replaced by blas routine ddot
denmat.F           New order N version with spin polarisation
detover.F          Unused variables removed
dfscf.f            Double precision -> real(dp)
                   Small modifications of some operations to try to achieve
                   better performance.
dhscf.F            Function dot replaced by blas routine ddot
                   Modifications made for spatial decomposition when nuo = 0
                   Double precision -> real(dp)
                   Call to readsp moved to frstme section and results saved
                   Calls to mesh subroutines - arguments changed
diagg.F            Handling of small occupancies in DM build revised
diagk.F            Handling of small occupancies in DM build revised
                   Calculation of eigenvectors now restricted to the minimum needed
diagkp.F           Handling of small occupancies in DM build revised
                   Calculation of eigenvectors now restricted to the minimum needed
diag2g.F           Handling of small occupancies in DM build revised
diag2k.F           Handling of small occupancies in DM build revised
                   Calculation of eigenvectors now restricted to the minimum needed
diagg.F            Handling of small occupancies in DM build revised
diagsprl.F         Handling of small occupancies in DM build revised
                   Calculation of eigenvectors now restricted to the minimum needed
                   Note that it appeared that twice as many eigenvectors as possible
                   were being calculated.
                   calculated previous
diagon.F           New parameters passed through - iscf & occtol
                   Call to readsp moved to frstme section and results saved
diagpol.f          Call to cdiag modified
                   Memory handling modified
                   Local array aux removed
dsyevds.f          Setting of LOPT modified on return from dsytrd
efield.F           Function dot replaced by blas routine ddot
egandd.F           New order N version with spin polarisation
eggbox.F           Unused variables removed
ener3.F            New order N version with spin polarisation
ener3lomem.F       Lower memory version of ener3
extrapol.F         Trapped added for parallel case where nuo is zero
extrapolon.F       New order N version with spin polarisation
fermid.F           Unused variables removed
fft3d.F            MPI sub groups only created on first call 
fixed.F            Function dot replaced by blas routine ddot
globalise.F        Routine for communication in order N added
gradient.F         New order N version with spin polarisation
grdsam.F           Fa / stress removed and order of dealloc improved
hsparse.f          Calculation of numh & listh separated
initdm.F           Trap added for parallel case where nuo is zero
initparallel.F     Routine added to initialise parallel parameters
iodm.F             Variable declaration made more f90 like
iohs.F             Unused variables removed
iolwf.F            New order N version. Only new format files supported
iorho.F            Variable declarations moved to ifdef MPI block
                   Unused variables removed
kgrid.F            Error message for non-normalised weights replaced by
                   correction of weights.
ksv.f              Function dot replaced by blas routine ddot
ksvinit.f          Unused variables removed
linpack.F          Unused variables removed
Makefile           New routines added
matel.f            Double precision -> real(dp)
                   Unused variables removed
                   Upper bounds for arrays specified on call to ylmexp to
                   avoid out of bounds error messages when debugging. 
memoryinfo.F       DiagScale & TryMemoryIncrease removed
meshmatrix.F       Variable declarations moved to ifdef MPI block
meshsubs.F         Function dot replaced by blas routine ddot
                   Unused variables removed
minvec.f           Function dot replaced by blas routine ddot
                   Unused variables removed
mneighb.f          Module version of neighb added for order N
m_denchar_neighb.f Function dot replaced by blas routine ddot
mulliken.F         Minor tidy
onmod.F            New order N version with spin polarisation
on_subs.F          New order N version with spin polarisation
ordern.F           New order N version with spin polarisation
outcell.f          Double precision -> real(dp)
outcoor.f          Double precision -> real(dp)
overfsm.f          Double precision -> real(dp)
parallel.f         Default blocksize set to 24
parallelsubs.f     Support for spatial decomposition added
pdos.F             Unused variables removed, including array aux
pdosg.F            Call to rdiag modified
                   Unused variables removed
                   Memory handling for diagonalisation changed
pdosk.F            Call to cdiag modified
                   Unused variables removed
                   Memory handling for diagonalisation changed
phirphi_opt.f      Reference to dot removed
phonon.F           Double precision -> real(dp)
plcharge.F         Declaration of maxnhg moved to MPI block
poison.F           Style changed (partly) to resemble rest of code
propor.f           Convert to lower case style
pulayx.F           Indenting standardised
radfft.f           Unused variables removed
                   Double precision -> real(dp)
                   Order of memory allocation/deallocation optimised
ranger.f           Double precision -> real(dp)
                   Function dot replaced by blas routine ddot
rdiag.F            2-D decomposition added
                   Blacs communicators now only setup once
                   Rewritten to allow access to full (sca)lapack functionality
                   Parallel divide and conquer added
readsp.F           Duplicate definition of 'use parallel' removed
redata.F           Separate eta values for alpha & beta spin added
                   Occupancy tolerance made an input parameter
                   DiagScale & TryMemoryIncrease removed
                   DiagMemory option -> Diag.Memory for consistency
                   with new options in cdiag.F / rdiag.F
redcel.F           Double precision -> real(dp)
reoptical.F        Unused variables removed
rhoofd.f           Modifications made for spatial decomposition when nuo = 0
rhoofdsp.f         Unused variables removed
parallelsubs.f     Spatial decomposition included
propor.f           Numbered do loops removed
setatomnodes.F     Routine added to assign atoms to Nodes
setspatial.f       Spatial decomposition included
shaper.f           Double precision -> real(dp)
sig.f              Double precision -> real(dp)
                   Unused variables removed
siesta.F           New parameters passed to diagon / bands
                   Unused variables removed
                   Trap on error message for order N / PDOS combination added
                   so that it is only output if do_pdos is actually true.
                   Variable neigwanted added to restrict eigenstate computation
                   for gamma point case.
spatial.F          Spatial decomposition included
spher_harm.f       Function dot replaced by blas routine ddot
                   Referencing of passed arrays in YLMYLM shifted by 1 (Y &
                   DYDR now start at 0)
siesta.F           Call to ordern changed & eta now eta(2)
                   Pressure now output for variable cell optimisation
sys.F              Unused variables removed
transition_rate.F  Unused variables removed
typecell.f         Double precision -> real(dp)
uncell.f           Routine added for conversion of vectors to cell parameters
vmat.f             Trap for nuo = 0 added in parallel
                   Double precision -> real(dp)
vmatsp.f           Unused variables removed
vmb.F              Double precision -> real(dp)
writewave.F        Reference to dot removed
                   Calls to diag routines modified
                   Unused variables removed
xc.f               Double precision -> real(dp)
                   Unused variables removed
zheevds.f          Lower memory version of lapack routine zheevd

Src/Libs/

lapack.f           Routines required for new rdiag/cdiag added
=======================================================================
Version: 1.4.20
Date: 2004/11/19 8:40 GMT
Title: Fixed import of symbols from basis_types and basis_specs modules
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Files:
	Src/initatom.f 
            gen-basis.F
            basis_specs.f :  Added "private" clause to basis_specs
                             and imported symbols explicitly in
                             initatom and gen-basis.

	version.F90: Customary changes.

=======================================================================
Version: 1.4.19
Date: 2004/11/13 15:00 GMT
Title: Added pdosxml utility, ps rc table, MPI test files, "only" clauses
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Files:
	Util/pdosxml/       : Directory containing PDOS file processor
                              which uses the Fortran XML parser.

	Pseudo/atom/Contrib/atom_table.txt:
                              Table by Jose Luis Martins with suggested
                              values for the configurations and rc
                              parameters for pseudopotential generation.

        Src/MPI/blacs_prb.f90
                pblas_prb.f90
                pblas.dat
                pi3.F      :  Files to test the MPI installation, and
                              the blacs and pblas libraries.
        Src/MPI/Makefile   :  Support for the test files.
        Src/MPI/generate.sh:  Fix a typo (SV, VS overloads)
	
	Src/atom.f 
            basis_types.f  :  Added "only" clauses in import of
                              basis_types module.
        Src/Makefile       :  Added dependency for sys.o

	version.F90: Customary changes.

=======================================================================
Version: 1.4.18
Date: 2004/08/30 11:00 GMT
Title: Bug in noncollinear spin input angles, reported by Ivan Runger
Author: Jose M. Soler <jose.soler@uam.es>

With the noncollinear spin option, the input spin angles were not
converted to radians

Files:
	initdm.F : Factor pi/180 added to angles
	version.F90: Customary changes.

=======================================================================
Version: 1.4.17
Date: 2004/07/19 12:00 GMT
Title: More code cleanup after optical props import
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

A number of mostly cosmetic changes were necessary to make the code
acceptable by the Intel Compiler.

Files:

	fermid.F : Changed into a module

	Makefile bands.F conjgr.f dfscf.f 
	diag2g.F diag2k.F diagg.F diagk.F diagkp.F diagsprl.F
	diagon.F optical.F phirphi_opt.f rdiag.F 
	timer.F transition_rate.F writewave.F: Assorted cosmetic changes.

	scalapack_extra.f: New file to hold SCALAPACK routines not
                           in old versions.
	Sys/itanium2-mpi.make: Use scalapack_extr

	version.F90: Customary changes.

=======================================================================
Version: 1.4.16
Date: 2004/07/14 10:40
Title: HighestOccupiedBand fix
Author: Julian Gale <julian@power.curtin.edu.au>

The setting of the highest occupied orbital has been changed to
come from the top downwards to avoid problems with the
SingleExcitation option.

Files:

diagg.F   Setting of HighestOccupiedBand changed
diagk.F   Setting of HighestOccupiedBand changed
diagkp.F  Setting of HighestOccupiedBand changed

+ usual changes to CHANGES, version.F90
=======================================================================
Version: 1.4.15
Date: 2004/07/13 11:30
Title: Optical properties & improved gamma point diagonalisation
Author: Daniel Sanchez-Portal and 
        Julian Gale <julian@power.curtin.edu.au>

Optical property calculation reintroduced, modified for improved
efficiency, and parallelised. It should be noted that while it works
in parallel there is scope for improvement of the performance.

Arrays Haux, Saux & psi which are dense moved into a new module.

Memory requirements for gamma point divide and conquer option reduced 
by adding SIESTA specific routine that avoids copying.

Parallel divide and conquer for gamma point added.

Node & Nodes placed in parallel module.

Memory accounting made more reliable.

Files:

In Src/

Makefile           New routines & modules added
alloc.F90          Subroutine count changed so that memory is always
                   called to ensure that total memory count is correct.
atmfuncs.f         rphiatm made public for benefit of phirphi_opt
atomlwf.F          Node/Nodes now accessed from parallel module
bands.F            Node/Nodes now accessed from parallel module
                   Haux, Saux & psi accessed from module
broadcast_basis.F  Node/Nodes now accessed from parallel module
cdiag.F            Node/Nodes now accessed from parallel module
cellxc.F           Node/Nodes now accessed from parallel module
cgvc.F             Node now accessed from parallel module
cgwf.F             Node/Nodes now accessed from parallel module
chempot.F          Node/Nodes now accessed from parallel module
chkgmx.F           Removed
chkgmx.f           chkgmx.F but with no need for cpp since Node is
                   now accessed from parallel module
denchar.F          Node/Nodes now accessed from parallel module
denmat.F           Node/Nodes now accessed from parallel module
densematrix.f      Module containing Haux, Saux & psi added
detover.F          Node/Nodes now accessed from parallel module
dhscf.F            Node now accessed from parallel module
diagg.F            No. of eigenvectors argument added to rdiag call
                   Node/Nodes now accessed from parallel module
diag2g.F           Node/Nodes now accessed from parallel module
diag2k.F           Node/Nodes now accessed from parallel module
diagk.F            Node/Nodes now accessed from parallel module
diagkp.F           Node/Nodes now accessed from parallel module
diagon.F           Arrays Haux, Saux & psi now accessed from module
                   Node/Nodes now accessed from parallel module
diagpol.f          Arrays Haux & Saux now passed in
diagsprl.F         Node/Nodes now accessed from parallel module
dipole.F           Node/Nodes accessed from parallel module
dnaefs.f           Call to chkdim removed
dsyevds.f          Modified version of Lapack routine to save memory
dynamics.F         Renamed to dynamics.f
dynamics.f         As per dynamics.F except that Node is accessed from
                   parallel module & uses module precision
efield.F           Use of "double precision" replaced by real(dp)
                   Node/Nodes accessed from parallel module
eggbox.F           Node now accessed from parallel module
egandd.F           Node/Nodes accessed from parallel module
ener3.F            Node/Nodes accessed from parallel module
extrapol.F         Node/Nodes accessed from parallel module
extrapolon.F       Node/Nodes accessed from parallel module
fermid.F           Node/Nodes accessed from parallel module
                   Precision taken from module
fft3d.F            Node/Nodes accessed from parallel module
fixed.F            Node/Nodes accessed from parallel module
gauleg.f           File removed since it is no longer used
gen-basis.F        Node/Nodes accessed from parallel module
gradient.F         Node/Nodes accessed from parallel module
grdsam.F           Node accessed from parallel module
hsparse.f          Node/Nodes accessed from parallel module
idiag.f            Fast return added for case where MOLD is diagonal
                   already to avoid crash in kgrid
initdm.F           Node/Nodes accessed from parallel module
iodm.F             Node/Nodes accessed from parallel module
iohs.F             Node/Nodes accessed from parallel module
iolwf.F            Node/Nodes accessed from parallel module
ionew.F            Node accessed from parallel module
iorho.F            Node/Nodes accessed from parallel module
ioxv.F             Node accessed from parallel module
kgrid.F            Node accessed from parallel module
kgridinit.F        Cosmetic changes & Node accessed from parallel module
kinefsm.f          Call to chkdim removed
                   Node/Nodes accessed from parallel module
ksv.F              Renamed to ksv.f as cpp now not needed
ksv.f              As per ksv.F, but Node accessed from parallel module
                   Arrays Haux, Saux & psi now accessed from module
                   Size of psi arrays is reduced by a factor of nspin
                   which is not actually needed.
                   Output that was in the main routine is now here.
listsc.f           Redundant reference to external chkdim removed
madelung.F         Renamed to madelung.f as cpp now not needed
madelung.f         As per madelung.F, but Node accessed from parallel module
memory.F           Node/Nodes accessed from parallel module
meshmatrix.F       Use of "double precision" replaced by real(dp)
                   Node/Nodes accessed from parallel module
meshsubs.F         Node/Nodes accessed from parallel module
minvec.f           Precision now set from module
mulliken.F         Node/Nodes accessed from parallel module
naefs.f            Call to chkdim removed
nlefsm.f           Redundant reference to external chkdim removed
                   maxna now passed in so that it's size is increased
                   prior to possible optical calculation
                   Node/Nodes accessed from parallel module
ofc.f              Redundant reference to external chkdim removed
on_subs.F          Node/Nodes accessed from parallel module
optical.F          Added from version 0.15 & updated
                   Node/Nodes accessed from parallel module
ordern.F           Node/Nodes accessed from parallel module
overfsm.f          Node/Nodes accessed from parallel module
parallel.f         Node/Nodes placed in module
parallelsubs.f     Split out of parallel.f to contain subroutines
                   Default BlockSize increased to 24
pdos.F             Node/Nodes accessed from parallel module
                   Arrays Haux, Saux & psi now accessed from module
pdosg.F            No. of eigenvectors argument added to rdiag call
                   Node/Nodes accessed from parallel module
pdosk.F            Node/Nodes accessed from parallel module
phirphi.f          Use of chkdim removed
                   Calls to matel now wrapped by check on whether dk is
                   significant to avoid redundant calculation.
                   Node/Nodes accessed from parallel module
phirphi_opt.f      Added from version 0.15 & updated
                   Calls to matel now wrapped by check on whether dk is
                   significant to avoid redundant calculation.
                   Node/Nodes accessed from parallel module
phonon.F           Reference to chkdim being external removed
                   Node/Nodes accessed from parallel module
plcharge.F         Node/Nodes accessed from parallel module
poison.F           Node/Nodes accessed from parallel module
propor.f           Precision now set from module
pulayx.F           Node/Nodes accessed from parallel module
radfft.f           Redundant reference to external chkdim removed
rdiag.F            Rewritten version added
                   Node/Nodes accessed from parallel module
readsp.F           Node/Nodes now accessed from parallel module
redata.F           Node/Nodes now accessed from parallel module
                   Default MemoryFactor reduced to 1.2
reinit.F           Node/Nodes now accessed from parallel module
reoptical.F        Added from version 0.15 & updated
                   Node/Nodes now accessed from parallel module
repol.F            Use of "double precision" replaced by real(dp)
                   Node/Nodes now accessed from parallel module
savepsi.F          Node/Nodes now accessed from parallel module
shaper.f           Redundant reference to external chkdim removed
siesta.F           Pointers Haux, Saux & psi nullified
                   Calls to optical added
                   Resizing of arrays after nlefsm added if required
                   based on maxna
                   Output for KSV now moved into KSV_pol
                   Node/Nodes accessed from parallel module
sys.F              Node/Nodes now accessed from parallel module
timer.F            Node now accessed from parallel module
                   Made implicit real(dp) rather than double precision
transition_rate.F  Added from version 0.15 & updated
                   Node/Nodes accessed from parallel module
vmb.F              Use of "double precision" replaced by real(dp)
                   Node/Nodes accessed from parallel module
xijorb.f           Node/Nodes accessed from parallel module
writewave.F        Arrays Haux, Saux & psi now accessed from module
                   Node/Nodes accessed from parallel module

In Src/Libs/

lapack.f           Extra-routines added for rdiag.F

In Util/

optical            Directory renamed to Optical for style consistency

In Util/Optical

README             Reinstated from version 0.15
input.f            Reinstated from version 0.15
optical.f          Reinstated from version 0.15
si.EPSIMG          Reinstated from version 0.15

In Docs/

siesta.tex         Optical option documented
CHANGES            This documentation added!
=======================================================================
Version: 1.4.14
Date: 2004/06/23 14:30
Title: Diag speed up
Author: Julian Gale <julian@power.curtin.edu.au>

Saving of CPU time in diag*.F by skipping build of density matrix
when the band occupancy is less than a small threshold.

Files:

Src/diag2g.F     HighestOccupiedBand pointer added to limit D build
Src/diag2k.F     HighestOccupiedBand pointer added to limit D build
Src/diagg.F      HighestOccupiedBand pointer added to limit D build
Src/diagk.F      HighestOccupiedBand pointer added to limit D build
Src/diagkp.F     HighestOccupiedBand pointer added to limit D build
                 Sizes of listhptr/listdptr/numh/numd changed to maxuo
Src/diagsprl.F   HighestOccupiedBand pointer added to limit D build
=======================================================================
Version: 1.4.13
Date: 2004/06/23  9:30
Title: Even more code cleanup
Author: Julian Gale <julian@power.curtin.edu.au>

Some minor fixes to compilation and other small changes

Files:

Src/atom.f          Check on value of nsemx being exceeded for qPAO added
Src/electrostatic.f npairs is now used from atm_types so that the value is
                    the same on all nodes
Src/dfscf.f         indxuo now accessed from module
Src/dhscf.F         First dimension of DVxcdn made equal to ntpl for
                    correct bounds checking in cellxc.F even though
                    never referenced 
                    indxuo no longer passed through
Src/grdsam.F        indxuo no longer passed through
Src/meshmatrix.F    indxuo now accessed from module
Src/parallel.f      Default blocksize increased to 16
Src/rhooda.f        indxuo now accessed from module
Src/rhoofd.f        indxuo now accessed from module
Src/rhoofdsp.f      indxuo now accessed from module
Src/siesta.F        ifdef NODAT wrapping of mpi_siesta use statement
                    added to select correct quantity for using
                    indxuo no longer passed to grdsam & dhscf
Src/vmat.f          indxuo now accessed from module
Src/vmatsp.f        indxuo now accessed from module
=======================================================================
Version: 1.4.12
Date: 2004/06/10 21:00
Title: More code cleanup
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

* Declaration of variables in some files.
 (implicit statements for real variables remain...)

File siesta/Src/dot.f 
File siesta/Src/electrostatic.f 
File siesta/Src/fermid.F 
File siesta/Src/idiag.f 
File siesta/Src/linpack.F
File siesta/Src/paste.f 
File siesta/Src/poison.F 
File siesta/Src/pseudopotential.f
File siesta/Src/ranger.f 
File siesta/Src/reclat.f 
File siesta/Src/timer.F 
File siesta/Src/xc.f 

* Some changes to the MPI compilation setup. File mpif2sane.f90 intended
  to replace the direct  inclusion of mpif.h in the future.

File siesta/Src/MPI/Makefile              (new symbol for NAG compiler)
File siesta/Src/MPI/mpi.F                 (remove some mpi_2XX symbols)
File siesta/Src/MPI/mpi__include.f90              ( " )
File siesta/Src/MPI/mpif2sane.f90 is new.
File siesta/Src/Sys/macosx-nag-mpi.make is new.

=======================================================================
Version: 1.4.11
Date: 2004/06/08 12:00
Title: Use of accessibility clauses to help compilers + cleanup
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

* Some compilers (notably Intel's) have trouble compiling certain
sections of the code, probably because of limitations in their
namespace-handling internal structures in some versions.  To help
them, and also as a matter of good programming practice, it is
advisable to follow these basic guidelines:

1. Make all modules "private" by default. Public entities should be
given the "public" attribute explicitly. This prevents the leaking of
symbols from other used modules.
2. Use the "only:" qualifier to import symbols from modules. This is
particularly necessary for program units which use a lot of modules, such
as siesta.F itself.

Files changed: 

        Src: pdos.F redata.F siesta.F cdiag.F rdiag.F 
             atmfuncs.f old_atmfuncs.f basis_types.f atm_types.f
	     atom.f transfer.f ionew.F initatom.f atomlist.f
             dfscf.f rhoofd.f rhoofdsp.f vmat.f vmatsp.f

	Src/MPI: mpi.F mpi__include.f90        (removed mpi.f90)

* On_subs has been turned into a module.

	Src: on_subs.F egandd.F

* The calculation of the electrostatic correction tables has been moved out
  of the basis-generation modules and placed in a new one (electrostatic.f).
  Gen-basis and the rest of the basis-generation code are now more decoupled
  from the rest of the program, and a number of duplicate routines have
  been removed. The module old_atmfuncs.f has been streamlined, with the
  removal of a number of obsolete routines and data structures.

Files:

	Src: old_atmfuncs.f atom.f transfer.f initatom.f gen-basis.F
             Makefile basis_io.F

* Fixed MPI/Makefile to make the NODAT option pass through for the 
  compilation of the MPI modules. 

	Src/MPI/Makefile

* New directory Src/wxml for XML-writing modules. The new code is being
  progressively integrated into Siesta. 

  Files:   
		Src: pdos.F   (some new calls, and extra file)
                     Makefile (support for wxml)

	        Src/wxml: New directory

   (Developers: use "-d" flag to cvs update to pick up the new directory)

* Removal of unused symbols, declaration of implicitly-typed variables,
  use of standard kinds for real variables (some files only)

	Src: chkgmx.F bessph.f pseudopotential.f atm_types.f basis_types.f
             atom.f transfer.f basis_io.F

* Tab removal and other cosmetic changes:

	Src: iopipes.F90 chempot.F fermid.F alloc.F90 matel.f meshsubs.F
             neighb.f ranger.f ran3.f overfsm.f

* Wrapping of MPI I/O (Julian Gale):

	Src: diagon.F  (spiral case was not wrapped)

* Change in deallocation order (Julian Gale):

        Src: rhoofd.f vmat.f

* In timer.F, the call to the CPUTIM routine has been eliminated in favor
  of the f95 standard cpu_time. A new file "cpu_time.f90" has been added
  for compilers which are not f95-compliant (PGI). Current SYS symbols
  in .make files are redundant but harmless.

	Files:  Src:  timer.F cpu_time.f90 (new file)
                Src/Sys:  pgf90*.make  (use cpu_time in SYS)

* New .make files for compilation on a new machine with itanium2 processors
  and myrinet networking (using Intel's 7.1 compiler)

	Files:  Src/Sys: itanium2.make itanium2-mpi.make

* Pseudo/atom/Tutorial: 
	scripts ae.sh, pg.sh, and pt.sh made more robust.
        New file subps.gps for shell interoperability.

  version.F90                : Customary changes
  Docs/CHANGES               : Customary changes

========================================================================
Description: New .make and SYS files to support IBM's pessl library
Version: 1.4.10
Date: 2004/02/04 16:00
Title: Support for pessl on IBM machines
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description: New .make and SYS files to support IBM's pessl library

Files:

  Src/Sys/ibm-regatta-p4.make: New file
  Src/ibm_pessl.f            : New file with extra code 
  version.F90                : Customary changes
  Docs/CHANGES               : Customary changes

=======================================================================
Version: 1.4.9
Date: 2004/02/01 18:00
Title: Miscellaneous fixes for portability
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description: Consolidation of various fixes for portability.

Files:

Src/basis_types.f  : use kind(dp) instead of real*8
Src/iodm.F         : use ionew
Src/pseudopotential.f : use ionew
Src/pdos.F         : Remove unused variables, arguments, and functions.
Src/siesta.F       : Remove unused arguments in call to pdos. 
                     Remove hollerith constructs.
Src/periodic_table.f : Make mass data real, instead of double precision.
Src/xlf.f          : New file for IBM-XL support (flush routine)
Src/f2kcli.F90     : New file for command-line argument parsing.
Src/iopipes.F90    : Add conditional block for NAG compilation.

Src/Makefile       : Remove f2kcli from gen-basis and siesta (mpich problems)
Src/gen-basis.F    : Remove f2kcli code.

Src/denchar.F
    m_denchar_geom.f
    m_denchar_init.F
    m_denchar_io.F	
    m_denchar_neighb.f
    m_denchar_work.f   : New files for denchar in top directory.  
Util/Denchar/Docs/denchar.tex: Manual for denchar updated.
Util/Denchar/Docs/CHANGES    : Updated to reflect change in code location.
Util/Denchar/Src/Makefile    : Disabled.

Util/Contour/grid2d.f : float to dble. Open statements changed.
Util/PyAtom: shape.sh : extracts cell shape data from output file.


Src/NetCDF/Makefile: add default line. Add FFLAGS_NETCDF symbol.
Src/Libs/makefile  : do not include machine.o in dc_lapack.a
Src/Sys/pgf90.make : Add dc_lapack.a to COMP_LIBS. Tab for atom.o. CDF optional
Src/Sys/pgf90-mpich.make : As above plus some documentation on MPI stuff
Src/Sys/macosx-xlf.make
Src/Sys/macosx-nag.make  : New files for MacOS X support.
Src/Sys/nag-darwin-nolibs.make : Removed. Obsolete

Util/PyAtom/local.biggles.py: change Vlocal to Reduced_vlocal.

=======================================================================
Version: 1.4.8
Date: 2004/01/26 16:00
Title: Fixes in inver, pulay, fermispin, plstm.
Author: Pablo Ordejon <ordejon@icmab.es>

Description: Fixes to correct bugs and/or improve the stability 
             of the inversion routines, the Pulay mixing and the fixed 
             spin calculations. These fixes correct the degradation
             of performance of selfconsistency convergence 
             of Siesta 1.3 compared to 1.2.  
             Small change on utility plstm.f to avoid problems 
             in some compilers.
             
Files:
  cgwf.F             : New interface with inver
  dynamics.F         : New interface with inver
  diagg.F            : Corrects call to fermispin
  diagk.F            : Corrects call to fermispin
  diagkp.F           : Corrects call to fermispin
  fermid.F           : Now contains fermispin subroutine; 
                       fermispin now calculates and returns entropy.
  fermispin.F        : Elliminated; content included now in fermid.F
  inver.f            : New interface, returns error message if 
                       unsuccessful execution
  pulayx.F           : New interface with inver; corrected stability
  version.F90        : Customary changes
  Makefile           : Elliminated reference to fermispin.F
  Docs/CHANGES       : Customary changes
  Util/plstm.f       : Changed input flags

=======================================================================
Version: 1.4.7
Date: 2004/01/22 17:00
Title: Bug in normalization of DOS
Author: Javier Junquera <jjunquer@physics.rutgers.edu>

Description: The Density Of States was divided twice by the number
             of k-points. This bug is present since version 1.2.41.
  
Files:
  pdosk.F            : The number of k-points, NK, has dropped 
                       from the normalization factor, NORM
  version.F90        : Customary changes
  Docs/CHANGES       : Customary changes

=======================================================================
Version: 1.4.6
Date: 2004/01/19 16:30
Title: Siesta as a subroutine
Author: Jose M. Soler <jose.soler@uam.es>

Description: A new utility routine module that can be used by external
  programs to communicate with siesta processes (running separatedly)
  to send coordinates and receive forces, as if siesta were a 
  conventional force-field subroutine.
  
Files:
  iopipes.F90 : New module with the routines to communicate with the
                user's driver program through Unix pipes
  redata.F    : Accepts new option MD.TypeOfRun=forces
  reinit.F    : Appends a number to file INPUT_TMP
  siesta.F    : Calls to the communication routines added
  Makefile    : Added file iopipes.o
  Util/SiestaSubroutine : New directory. Contains the module fsiesta, 
                          with the routines to be called by the user's
                          program, and the subdirectory FmixMD with an
                          example. See its file README for details.
  Docs/siesta.tex       : Explains the new option MD.TypeOfRun=forces

=======================================================================
Version: 1.4.5
Date: 2003/12/05 13:45
Title: Bug fix (initdm)
Author: Jose M. Soler <jose.soler@uam.es>

Description:
  A small denominator has been added to avoid a division by zero when
one tries to polarize a closed-shell atom. A warning has also been 
added for this case.

Files:
  initdm.F: small denominator and warning added

=======================================================================
Version: 1.4.4
Date: 2003/11/18 19:00
Title: Bug fix (initwave)
Author: Javier Junquera <jjunquer@physics.rutgers.edu>

Description: 
  Two allocatables variables were incorrectly deallocated

Files:
  writewave.F: inquiry for the status of values and integs before deallocate

=======================================================================
Version: 1.4.3
Date: 2003/11/07 17:00
Title: Bug fix (Plrho)
Author: Jose M. Soler <jose.soler@uam.es>

Description:
  An index was incorrectly initialized, causing problems in spin
polarized systems

Files:
  Util/Plrho/iorho.f  : Instruction ind=0 moved inside spin loops

=======================================================================
Version: 1.4.2 
Date: 2003/11/05 17:30
Title: Bux fix (initwave)
Author: Javier Junquera <jjunquer@physics.rutgers.edu>

Description: 

 A memory problem, that appeared when more than 4 values were 
 introduced in each line of the block WaveFuncKPoints, has been fixed.
 The variables values and integs in the subroutine initwave
 (module writewave) have been redefined as allocatable.

Files:
    writewave.F : variables values and integs defined as allocatable
    version.F90, CHANGES : Customary changes
    siesta.tex : Change of affiliation

=======================================================================
Version: 1.4.1 
Date: 2003/09/10 18:30
Title: version.F --> version.F90
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

Rewrite version.F as a free-format f90 file (and thus change the
extension to .F90). Modify Makefile accordingly.

Files:
    version.F  	: removed
    version.F90	: new file
    Makefile	: updated to reflect new .F90 extensions.

=======================================================================
Version: 1.4.0 
Date: 2003/07/30 20:45
Title: This is 1.4.0 in main trunk
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:
  This is 1.4.0 in main trunk. Any revision on 1.3 should be
done in the 1.3 branch as well as on this trunk

Files:
  build_serial and build_parallel (remove Tests)
  siesta.tex: removed reference to msiesta in constr.f 
  version.F CHANGES siesta.ind
=======================================================================
Version: 1.3 and 1.4.0 not yet
Date: 2003/07/19 19:15
Title: Pre Tagging and branching 1.3 and 1.4.0: Miscellanea
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:
  Some pre-branching changes: Mesh cutoff to 100Ry default;
  Makefile to show contents of FFLAGS etc in output;
  Manual: index entry for geometry constraints + warning about XV
          for supercell.

Files:
  Makefile, redata.F, siesta.tex, siesta.ind, version.F, CHANGES
=======================================================================
Version: 1.3 not yet
Date: 2003/07/23 14:15
Title: Minor bug corrections
Author: Pablo Ordejon <ordejon@icmab.es>

Description:
  A minor bug in the parallel execution in writewave.F has
been fixed. Two bugs in the output of Denchar have been
fixed.

Files:
  Src/writewave.f:  Parallel execution bug corrected
  Util/Denchar/Src/wrout.F:  Bug in writting of output corrected
  Util/Denchar/Src/itochar.F:  Bug in writting of output corrected
  Util/Denchar/Docs/denchar.tex, CHANGES:  Customary changes
  siesta.tex, CHANGES, version.F, release_notes_1.3:  Customary changes
=======================================================================
Version: 1.3 and 1.4.0 not yet
Date: 2003/07/19 19:15
Title: Pre Tagging and branching 1.3 and 1.4.0
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:
  The 1.3 package was to be defined at this stage. 
But not yet, since Examples have to be updated with 1.3 and a few
last minute things popped up. Later, it will be tagged
and a branch opened for bug corrections of 1.3 (new versions
with fixes will be produced and distributed when/if needed) while
the main branch trunk becomes 1.4.0 for further development.

Files:
  CHANGES, siesta.tex, version.F
=======================================================================
Version: 1.2.45
Date: 2003/07/17 22:00
Title: Slight change in Makefile 
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:
  The Makefile has been slightly changes to avoid problems with
the sed processing from version.F to temp.F and temp0.F

Files:
  Makefile + customary (Licence files added).
=======================================================================
Version: 1.2.44
Date: 2003/07/15 14:00
Title: Parallel eggbox
Author: Julian Gale <j.gale@imperial.ac.uk>

Description: 

The eggbox routine was tripping up parallel execution of the code
and so this has been handled.

Files:

diagon.F  : Order of memory deallocation reversed to be stack friendly
eggbox.F  : Calls to fdf are now handled in parallel and data is
          : broadcast where necessary
siesta.F  : First call to eggbox is now for all processors
version.F & CHANGES
=======================================================================
Version: 1.2.43
Date: 2003/07/14  1:30
Title: Fixed fermid
Author: Julian Gale <j.gale@imperial.ac.uk>

Description:

The routine fermid.F has been bug fixed. The variable NH was not
broadcast when read in parallel and not explicitly saved between
calls. Also the ocf string was set to two different defaults in
STEPF vs ENPY, which has been standardised.

Files:
fermid.F    : Changes as listed above.
version.F and CHANGES
=======================================================================
Version: 1.2.42
Date: 2003/07/11 11:00
Title: Berry phase continuity for polarization calculation
Author: Daniel Sanchez-Portal

Description:

The Berry phase is obtained as a surface integral (in reciprocal
space) of a so-called quantum phase.
When evaluating the integrand we have an arbitrariness of 2pin
in each point of the 2D mesh. This arbitrariness has
to be eliminated by enforcing the continuity of the integrand.
A few code lines have been added to subroutine ksv.F in order
to ensure this continuity. 

Files:
ksv.F  : few lines of code added and new array phaseold(2)
version.F and CHANGES
=======================================================================
Version: 1.2.41
Date: 2003/07/09 11:30
Title: Parallel PDOS, gamma point and K point weighting
Author: Julian Gale <j.gale@imperial.ac.uk>

Description:

The PDOS option has been extended to allow for the gamma point, 
K point weighting and parallel execution.

Files:

Makefile   : pdosg.F added
pdos.f     : renamed to pdos.F
pdos.F     : modified version of pdos.f to handle parallel execution
pdosg.F    : routine for PDOS calculation at gamma point added
pdosk.f    : renamed to pdosk.F
pdosk.F    : modified version of pdosk.f to handle parallel execution
siesta.F   : Parallel call to pdos now allowed and variables broadcasted
siesta.tex : Comment on order-N in parallel added
version.F and CHANGES
=======================================================================
Version: 1.2.40
Date: 2003/07/02 19:30
Title: renaming of module mpi to mpi_siesta
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:

Renaming of module mpi to mpi_siesta to avoid name clashes

Files:

alloc.F90, *.F
version.F and siesta.tex and CHANGES
=======================================================================
Version: 1.2.39
Date: 2003/06/30 19:00
Title: renaming of realloc and dealloc to re_alloc and de_alloc
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:

Renaming of realloc and dealloc to re_alloc and de_alloc
to avoid problems with some (not so standard but important)
compilers.

Files:

alloc.F90, siesta.F, atomlist.f, on_subs.F,
cdiag.F, rdiag.F, coor.f, dfscf.f, matel.f,
version.F and siesta.tex and CHANGES 
=======================================================================
Version: 1.2.38
Date: 2003/06/30 18:00
Title: Small bug in siesta.F
Author: Pablo Ordejon <ordejon@icmab,es>

Description:

A small bug in siesta.F that showed up in alpha machines has
been corrected, about the handling of undefined wfk.

Files:

siesta.F
Customary version.F siesta.tex CHANGES
=======================================================================
Version: 1.2.37
Date: 2003/06/30 15:35
Title: Update of Util: README and inclusion og grid1d + release.notes
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:

Grid1d utility added (very simple extracting of 1D information from
anthing in the 3D grid in the RHO format). It interpolates.
Update in Util/README and in release.notes_1.3

Files:

Util/ grid1d.f grid1d-raw.in grid1d-noraw.in README
Docs/ release.notes_1.3
Customary version.F siesta.tex CHANGES
=======================================================================
Version: 1.2.36
Date: 2003/06/30 13:15
Title: Corrected parallel Mulliken for iopt = 3
Author: Julian Gale <j.gale@imperial.ac.uk>

Description:

The use of Mulliken level 3 in parallel was causing the code to print
out incorrect results and hang. This was due to referencing of the
local number of basis functions where the global number should be used.
This is now fixed so that the serial and parallel results should be
congruent for this option.

Files:

mulliken.F  : nbasistot now passed in instead of nbasis (global vs
            : local). nbasis (local) is computed locally and the
            : iopt = 3 code has been corrected to ensure that the
            : orbitals are printed in the global order
siesta.F    : no_u passed to mulliken instead of no_l
version.F, CHANGES : customary changes
=======================================================================
Version: 1.2.35
Date: 2003/06/30 12:00
Title: Write Wavefunctions capability, bug corrections and new utils
Author: Pablo Ordejon <ordejon@icmab.es>

Description:

1) The capability to write wavefunctions coefficients of selected
   wavefunctions at selected k-points has been implemented.
   Dumps the coefficients to a binary file (a utility program
   to convert it to readable form is also provided in Util),
   and also to the main output if desired.
   Note that a new logical variable (getPSI) has been
   included in the interface of diagg and diagk, so that they
   calculated the wavefunctions that the user wishes to print.

2) Several bugs (mainly in parallel mode runs) are corrected

3) Three new utility programs are included

Files:
/Docs
  siesta.tex : customary changes; explanation of utility to write wfs
  siesta.ind : customary changes
  CHANGES    : customary changes
/Src
  bands.F    : comply to new interface of diagg and diagk; 
               bug (intr. in 1.2.31) corrected in call to diag routines
  diagg.F    : capability to write wfs; new logical flag in interface
  diagk.F    : capability to write wfs; new logical flag in interface
  diagon.F   : capability to write wfs to file
  fermid.F   : parallel mode bug fix
  inver.f    : augmented for robustness in case LAPACK fails
  Makefile   : miscellaneous changes
  pulayx.F   : augmented for robustness in case residual is exacly null
  siesta.F   : changes for capability to write wavefunctions
  version.F  : customary changes
  vmb.F      : parallel mode bug fix
  writewave.F: new: module that handles the wfs writting
/Util
  README     : update list of utility programs
  grid2cube.f: new: converts siesta grid files to Gaussian Cube format
  pltstm.f   : new: a simple program to simulate STM images
  readwf.f   : new: utility to read wfs file to user-friendly format
=======================================================================
Version: 1.2.34
Date: 2003/06/30  9:00
Title: Correction in order-N - C save
Author: Julian D. Gale <j.gale@ic.ac.uk>

Description:

The contents of the C array is now preserved when reallocating after
the call to cspa since this is not read again.

Files:

ordern.F   : Contents of C copied to rtmp2 and back again after realloc
version.F, CHANGES    : customary changes
=======================================================================
Version: 1.2.33
Date: 2003/06/26 16:20 UTC
Title: Portability bug fixes and enhancements
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

A number of fixes related to portability problems:

* Handling of array shapes in radfft. Related: explicit interface
for ordern and hsparse routines.

* Bug fix in new fermid.F routines.

* Initialization bug fix in on_subs.F.

* Support for systems without the LAPACK 'divide and conquer' routines
in their system libraries. 

* Warning for MPI data type codes.

* Improved compilation in subdirectories.

* Apparently cosmetic changes intended for the NAG compiler.


Files:

ordern.F, hsparse.f : Now wrapped in modules m_ordern and m_hsparse, 
		      respectively. No file name change.
interfaces.f        : Removed.
siesta.F            : Now 'use's m_ordern and m_hsparse.
                      Initialization of two logical variables.

radfft.f            : Now wrapped in module m_radfft. 
                      No file name change.
matel.f, atom.f,
basis_io.F          : Now 'use' m_radfft.

atom.f              : Cosmetic changes, and simplification of ghost 
                      signals.

Makefile            : Support for new module dependencies.
                      Better handling of compilation in subdirectories,
                      in particular ranlib handling.

fermid.F            : variable ocupfncft now saved.
on_subs.F           : ncmax initialized before its use.
poison.F            : (cosmetic?) modulo instead of mod
inver.f             : (cosmetic?) reversed declaration order.

(these changes committed at an earlier date:)
Libs/  :
lapack.f, dc_lapack.f : Split divide and conquer routines.
makefile              : Better logic for support of 'dc'-less systems.

MPI/   :
Makefile              : Warning about kind numbers.

Sys/   :
.make files           : Explicit RANLIB macro.
                        Alpha files might require dc_lapack split.
README                : Explain dc_lapack issue.
lahey-nolibs.make
pgf90-nolibs.make     : New files.
nag-darwin-nolibs-make: NAG MacOSX macros (some hfs issues)

version.F, CHANGES    : customary changes
=======================================================================
Version: 1.2.32
Date: 2003/06/23 16:00
Title: Correction in order-N + PDOS in manual
Author: Julian D. Gale <j.gale@ic.ac.uk>

Description:

Two small corrections have been made. The first fixes an out of bounds
error that can occur when restarting an order-N calculation and the
second is the removal of the limitations for PDOS from the text in the
manual to reflect recent modifications.

Files:
ordern.F     : maxnc is now the larger of ncmax and maxnc after
               reallocation to ensure that passed first dimension is
               correct for listc/listcold
siesta.tex   : Text concerning PDOS updated
version.F, CHANGES, siesta.tex, siesta.ind: customary changes
=======================================================================
Version: 1.2.31
Date: 2003/06/23 12:00
Title: Methfessel-Paxton smearing function
Author: Pablo Ordejon <ordejon@icmab.es>

Description:

   The smearing function scheme of Methfessel and Paxton has been
implemented. For metals, it allows for a much better convergence
to the ground state properties even with large smearing temperatures.
Improved convergence to self-consistency and k-points is also
achieved.
   A few changes have been made in the old Fermi-Dirac function, too.
In particular, the old function stepf included a factor 2 that
has been removed (to make the definition of the Fermi-Dirac
and Methfessel-Paxton functions correspond to the usual ones),
and added elsewhere. Therefore, the diagonalization
routines have been updated accordingly.
   Also, the calculation of the entropy has been removed from siesta.F,
because in the Methfessel-Paxton scheme this term depends
on the eigenvalues, which are not available in the main program.
The calculation of the entropy is done now in fermid.F, and
passed to siesta.F through the diagonalization routines.

Files:
siesta.F    : changes to remove entropy and calculation
diag2g.F, diag2k.F, diagg.F, diagk.F, diagkp.F, diagon.F, diagsprl.F:
              changed to pass Entropy to siesta.F, and redefined stepf
fermid.F    : Methfessel-Paxton included; redefined stepf
fermispin.F : redefined stepf
version.F, CHANGES, siesta.tex, siesta.ind: customary changes
=======================================================================
Version: 1.2.30
Date: 2003/06/23 11:45
Title: Miscellaneous corrections
Author: Pablo Ordejon <ordejon@icmab.es>

Description:

   Several corrections have been made (thanks to those who reported the 
problems):

1) Maxwell-Boltzmann initial velocities were not obbeying the constraints 
   imposed in fixed.F (problem reported by Masaya Ishida).  This has now 
   been fixed, so that dynamics runs do obbey the constraints.  
2) A correction in the dynamics routines has been made to account for the 
   number of imposed constraints in the definition of the temperature. 
   As a consequence, a new variable has been included in the argument list 
   of constr.f to output the number of constraints imposed by the user. 
3) The example of the constr.f provided to make the relative height of two 
   atoms constant, only worked for the case of two atoms with the same mass. 
   I have rewriten it for the general case of two different masses, and 
   changed the example in the manual and the fixed.F routine accordingly.
4) Some changes in the initiallization of the MD variables, to make the start 
   of the run more in accord with the imposed initial velocities.
5) The inver.f90 routine provided by William Mattson has been removed, 
   because it caused some problems in handling nonorthogonal cells, in the 
   variable cell dynamics (problem reported by Benoit Braida). I have written 
   a new inver.f code that used LAPACK routines to invert a matrix. All the 
   calls to the old inver2 and the old inver.f90 routines are now re-directed 
   to the new inver. The appropriate LAPACK routines that were not included in 
   Libs/lapack.f have been included.
6) The fdf reading of the Divide-and-Conquer option is now only done in the 
   first call to the diagonalization routines, to avoid huge out.fdf files
   when a large number of k-points is used.
7) A recent change in matel.f made by A. Garcia to avoid problems with the 
   NAG compiled have been reverted, since it causes problems in other 
   compilers. This still needs to be worked out!!
8) A bug in mulliken.F that caused the overlap population matrix between atoms
   not to be symmetric when k-points were used (pointed out by P. Alemany) has 
   been corrected.
9) A small bug (found by S. Reich) in vibrator.F has been corrected. Besides, 
   fdbuild.F has been slightly changed to include more significant digits in 
   the output. Finally, some input files and updated output files have been 
   provided so that the user can reproduce the examples of Vibra.
   

Files:
/Docs
  siesta.tex : customary changes; explanation of new interface of constr.f 
               and correction to example case
  CHANGES    : changes as customary
/Src
  cdiag.F    : read fdf option D&C only fisrt time  	
  cgwf.F     : call to new inver routine
  constr.F   : interface with new output variable ntcon
  dynamics.F : miscellaneous: temp. definition with constraints; 
               new init. of some dynamics
  fixed.F    : new interface with constr.f; define tot. nr. of constraints;
               correct example case
  inver.f    : new file - new inversion routine
  inver.f90  : removed
  matel.f    : recent change by A. Garcia reverted
  mulliken.F : bug corrected: lines 219 and 226
  pulayx.F   : call to new inversion routine; comment invert2 (not used now)
  rdiag.F    : read fdf option D&C only fisrt time
  siesta.F   : misc. changes in calls to dynamics and constraint routines
  version.F  : customary changes
  vmb.F      : changes to account for constraints in definig initial velocities
/Src/Include
  constr.f   : interface with new output variable ntcon
/Src/Libs
  lapack.f   : routines necessary to invert matrices included
/Util/Vibra
  README     : update email address
/Util/Vibra/Docs
  CHANGES    : new file; records changes in Vibra package
  vibra.tex  : some changes in user guide
/Util/Vibra/Examples
  README     : new file; explanation to run examples
  si2.bands  : updated output file
  si2.FC     : updated output file
  si2.fdf    : updated input file
  si2-siesta : new file; input for Siesta, necessary to reproduce example
  si2.vectors: updated output file
  si54.bands : updated output file
  si54.FC    : updated output file
  si54-siesta: new file; input for Siesta, necessary to reproduce example
  Si.inp     : new file; input for Siesta, necessary to reproduce example
/Util/Vibra/Vibra
  fcbuild.f  : increase number of digits in the output of atomic coords
  vibrator.f : bug fix
=======================================================================
Version: 1.2.29
Date: 2003/06/06 18:15
Title: Two small bugs
Author: Jose M. Soler <jose.soler@uam.es>

Description:
  Some arrays were not allocated in the rare case that there was a
single basis orbital in the whole system. Also, the dimension of the 
input array in routine four1 was incorrect.

Files:
  siesta.F  : corrected use of dimension maxnh
  recipes.f : dimension of array DATA increased from NN to 2*NN
=======================================================================
Version: 1.2.28
Date: 2003/06/05 23:30
Title: Eggbox correction (by Tom Archer) plus cosmetics
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:
  A possibility for eggbox correction is included assuming atom additivity
and species dependent components, by which various fourier components 
for the eggbox of isolated atoms of each species are given to Siesta
and Siesta substracts it from energy and forces.
  A little output cosmetics has been introduced as well

Files:
  eggbox.F : new
  siesta.F, Makefile: to call eggbox
  coor.f, atom.f, reinit.F, basis_types.f, memory.f, 
  atomlist.f, initatom.f, redata.f and siesta.F : changes only in writes
  version.F, siesta.tex, siesta.ind and CHANGES as customary
=======================================================================
Version: 1.2.27
Date: 2003/06/04 14:00
Title: Print of the ionic and total charge densities. 
Author: Javier Junquera <javier.junquera@ulg.ac.be>

Description:
The soft diffuse ionic charge, whose electrostatic potential is the
local part of the pseudopotential, can be printed now at the points
of the grid (file SystemLabel.IOCH), together with the total 
(ionic+electronic) charge density (file SystemLabel.TOCH). 
The new input variables that control the writting are, respectively,
SaveIonicCharge, and SaveTotalCharge.

When using the Harris functional, the Harris energy is printed at
the end of each molecular dynamic step, instead of the Kohn-Sham energy.
The SystemLabel.MDE file is also written using the harris' energy instead
of the Kohn-Sham energy. 

Files:
   siesta.F  : New variables to define the files SystemLabel.IOCH, and
               SystemLabel.TOCH. 
             : Calls to dhscf have changed. The name of two extra files
             : have been added to the argument list.
             : Printing of the Harris energy. 
             : Change in the definitions of getot, and in the call to 
             : iomd when harris functional is used. 
   grdsam.F  : Calls to dhscf have changed. The name of two extra files
             : have been added to the argument list.
   dhscf.F   : Two new variables with the names of the two files.
             : Call the new subroutine LocalChargeOnMesh, and write 
             : the ionic and total charge densities. 
   meshsubs.F: New subroutine LocalChargeOnMesh.
   siesta.tex, siesta.ind, CHANGES, version.F: Customary changes
=======================================================================
Version: 1.2.26
Date: 2003/06/03 14:30
Title: Fixed bug in parallel polarisation
Author: Julian Gale <j.gale@imperial.ac.uk>

Description:
The calculation of polarisation was giving incorrect answers in 
parallel due to corruption of the saved wavefunction in psiprev.
Was due to trying to combine the calculation and saving aspects
to minimise communication. Saving of wavefunction now performed
as a separate operation.

Files:
   ksv.F     : savepsi is now called after detover where needed and
             : the logical flag that was passed to this routine has
             : been removed.
   detover.F : The savepsi option has been removed along with the
             : incoming logical argument.
   version.F / CHANGES
=======================================================================
Version: 1.2.25
Date: 2003/05/22 19:30
Title: Fixed bug in BLYP forces (Marivi Fernandez-Serra) 
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:
  The implementation of the derivatives for the forces in the BLYP
functional had a bug, found and fixed by Marivi Fernandez-Serra.
  (a few hours before, Alberto Garcia committed basis_type.f to 
solve some compilation problems with some compilers).

Files:
  xc.f      in Src
  blypxc.f  in Pseudo/atom
  basis_type.f
  siesta.tex, siesta.ind, CHANGES, version.F
=======================================================================
Version: 1.2.24
Date: 2003/05/21 22:00
Title: Various (single excitation, flush, print pressure, etc)
Author: Emilio Artacho <emilio@esc.cam.ac.uk>

Description:

1. Single excitation: possibility of lowest excited state by 
   swapping the populations of HOMO and LUMO (if no spin polarisation,
   it is half swapping). Introduce SingleExcitation logical flag.
   It is done for ispin=1 and ik=1.
2. The SIG file (who used it?) is now only appearing is asked with the
   SignatureRecords flag.
3. Option of Mulliken at every SCF (for dealing with SCF problems)
   by turning true the MullikenInSCF flag
4. Flushes the ANI, MD, and MDE files at every time step by closing
   the files. It reopens (append) at every instance. It solves the
   problem originated by some compilers that keep data in buffers. 
   These data are lost if the program dies. It is still to be solved for
   the standard output. The same (not elegant but robust) solution 
   can be used if instead of writing to standard output, siesta would
   write to a file.
5. In MD runs the stress tensor and (solid) pressure are printed at
   every step. Both the static (ellectronic contribution) and total
   (adding kinetic term of nuclei). At the end of the run it is printed
   as always, only the static. The MDE file now writes total solid pressure
   and volume together with E_tot, E_KS, T, and step.

Files:
   fermid.F   : Single excitation
   siesta.F   : Signature records, Mulliken in SCF
   mulliken.F : Consmetics
   iomd.f     : flush MD and MDE
   pixmol.f   : flush ANI
   siesta.tex, siesta.ind, CHANGES, version.F
=======================================================================
Version: 1.2.23
Date: 2003/05/01 11:00
Title: Corrected FFT and ordern
Author: Julian D. Gale <j.gale@imperial.ac.uk>

Description:

Two bugs have been fixed:
(1) In the FFT routine, the dimensions were exceed then the contents of
    trigs were not always recalculated after increasing the dimensions.
(2) In order N the contents of several arrays were not preserved during
    resizing leading to loss of data for the subsequent geometry steps.

Files:

diagon.F  : The order of deallocation of the arrays is reversed to be more
            stack friendly.
fft3d.F   : OldMesh reinitialised to 0 if the size of the array trigs is
            altered to ensure that array is refilled correctly.
hpcx.make : the -bmaxdata flag has been added in order to access the 
            full memory
ordern.F  : Contents of several arrays are preserved on resizing.
=======================================================================
Version: 1.2.22
Date: 2003/04/14 15:10
Title: Corrected k-grid cutoff
Author: Jose M. Soler <jose.soler@uam.es>

Description:

For some nonorthorrombic k-sampling grids, the cutoff was overestimated
A call to minvec was introduced to find the true minimum supercell vector

Files:

kgridinit.F : Introduced call to minvec

=======================================================================
Version: 1.2.21
Date: 2003/04/14 15:00
Title: Cleaning of foreign code
Author: Jose M. Soler <jose.soler@uam.es>

Description:

To avoid any legal problems, the few routines not written by the siesta 
team have been cleaned or modified to make them different enough from 
the original ones. However, apropriate statements of the original
procedence/authorship have been kept in all the files affected.
Three routines in recipes.f were eliminated: ratint because it always
called polint internally, and splin/splinu because they were equivalent 
to spline/splint.

Files:

arw.f            : Code cleaned and language updated.
                   Many comments added or corrected.
arw.F            : Eliminated (changed to arw.f)
atom.f           : Calls to ratint changed by polint
basis_io.F       : Calls to ratint changed by polint
cellxc.F         : Header comments slightly changed
matel.f          : Calls to splin/splinu changed to spline/splint
periodic_table.f : Code updated. Some comments added
recipes.f        : Routines ratint, splin, and splinu eliminated.
                   Code updated and comments added
siesta.F         : Copyright statements in header changed
xc.f             : Header comments slightly changed
Makefile         : arw.o made dependent of ionew.o

=======================================================================
Version: 1.2.20
Date: 2003/1/20 16:00 
Title: HPCx changes
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

A small number of changes have been made for easy compilation on an
IBM Regatta machine to enable use with the HPCx service in the UK
(and elsewhere).

Files:

alloc.F90         : if NODAT option added for -DNODAT to avoid MPI problems
bands.F           : if NODAT option added for -DNODAT to avoid MPI problems
broadcast_basis.F : if NODAT option added for -DNODAT to avoid MPI problems
cellxc.F          : if NODAT option added for -DNODAT to avoid MPI problems
cgvc.F            : if NODAT option added for -DNODAT to avoid MPI problems
cgwf.F            : if NODAT option added for -DNODAT to avoid MPI problems
chempot.F         : if NODAT option added for -DNODAT to avoid MPI problems
denmat.F          : if NODAT option added for -DNODAT to avoid MPI problems
detover.F         : if NODAT option added for -DNODAT to avoid MPI problems
dhscf.F           : if NODAT option added for -DNODAT to avoid MPI problems
diag2g.F          : if NODAT option added for -DNODAT to avoid MPI problems
diag2k.F          : if NODAT option added for -DNODAT to avoid MPI problems
diagg.F           : if NODAT option added for -DNODAT to avoid MPI problems
diagk.F           : if NODAT option added for -DNODAT to avoid MPI problems
diagkp.F          : if NODAT option added for -DNODAT to avoid MPI problems
diagon.F          : if NODAT option added for -DNODAT to avoid MPI problems
diagsprl.F        : if NODAT option added for -DNODAT to avoid MPI problems
dipole.F          : if NODAT option added for -DNODAT to avoid MPI problems
efield.F          : if NODAT option added for -DNODAT to avoid MPI problems
ener3.F           : if NODAT option added for -DNODAT to avoid MPI problems
fft3d.F           : if NODAT option added for -DNODAT to avoid MPI problems
gradient.F        : if NODAT option added for -DNODAT to avoid MPI problems
iodm.F            : if NODAT option added for -DNODAT to avoid MPI problems
iohs.F            : if NODAT option added for -DNODAT to avoid MPI problems
iolwf.F           : if NODAT option added for -DNODAT to avoid MPI problems
iorho.F           : if NODAT option added for -DNODAT to avoid MPI problems
ioxv.F            : if NODAT option added for -DNODAT to avoid MPI problems
kgridinit.F       : if NODAT option added for -DNODAT to avoid MPI problems
meshmatrix.F      : if NODAT option added for -DNODAT to avoid MPI problems
mulliken.F        : if NODAT option added for -DNODAT to avoid MPI problems
ordern.F          : if NODAT option added for -DNODAT to avoid MPI problems
phonon.F          : if NODAT option added for -DNODAT to avoid MPI problems
pulayx.F          : if NODAT option added for -DNODAT to avoid MPI problems
readsp.F          : if NODAT option added for -DNODAT to avoid MPI problems
redata.F          : if NODAT option added for -DNODAT to avoid MPI problems
repol.F           : if NODAT option added for -DNODAT to avoid MPI problems
savepsi.F         : if NODAT option added for -DNODAT to avoid MPI problems
siesta.F          : if NODAT option added for -DNODAT to avoid MPI problems
timer.F           : if NODAT option added for -DNODAT to avoid MPI problems
vmb.F             : if NODAT option added for -DNODAT to avoid MPI problems
Sys/hpcx.make     : arch.make for HPCx service
=======================================================================
Version: 1.2.19
Date: 2003/1/10 17:00 
Title: FFT fixed for large meshes 
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

For very large mesh dimensions the array trigs in the FFT was not
able to cope. Hence this array has been made dynamic. Also a few
minor changes have been made, firstly to cellxc.F, to solve some
MPI issues at APAC, and secondly to siesta.F, to optionally avoid
problems with convergence where the auxiliary mesh changes during
a variable cell optimisation.

Files:

cellxc.F     : The parallelisation has been altered to involve fewer
             : transfers, but of larger packets. Should improve 
             : performance were latency is high and avoids problems
             : with MPI counters becoming too large.
fft3d.F      : The array trigs is now dynamically allocated to allow
             : for larger meshes.
siesta.F     : An option has been added to fix the auxiliary cell size
             : to avoid poor convergence behaviour.
siesta.tex   : New option FixAuxiliaryCell documented
=======================================================================
Version: 1.2.18
Date: 2002/10/09 10:30 
Title: Fix to spiral spin in parallel
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

Parallel runs were crashing due to an fdf call that was not wrapped to
only be from Node 0 in readsp.f. This routine is now MPI'd to handle
the fdf call safely.

Files:

readsp.f    : Removed from distribution
readsp.F    : Added - readsp.f with wrapping of fdf calls for parallel
            : execution.
=======================================================================
Version: 1.2.17
Date: 2002/09/13 17:00 
Title: Changes in xc.f, other cosmetic changes.
Author: Alberto Garcia

Description:

* There was a subtle numerical instability in the pzxc routine
when dealing with very small densities (as for large r in the
atomic program). Jose Soler has rewritten the offending section.

* Added blypxc routine to xc.f

* Cosmetic change in basis_specs.f. The printing of basis
  specification now skips over shells with nzeta=0...

Files:

xc.f , basis_specs.f

=======================================================================
Version: 1.2.16
Date: 2002/09/02 17:00 
Title: Divide and Conquer + fixes
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

The option to use divide and conquer Lapack algorithms has been added
to rdiag and cdiag, as well as tidying up the source code a bit here.
Also a bug in the order N part for eta .ne. 0 has been corrected, as 
well as a few fixes for parallel execution related to recently introduced
functionality. There are also a few bits of cleaning highlighted as a
result of running the code through the NAG compiler.

Files:

siesta.tex    : DivideAndConquer option documented
alloc.F90     : optional attribute added for name/routine + checking for
              : these terms being present before being addressed added
              : in alloc_err
basis_types.f : Missing comma in format descriptor added
cdiag.F       : Divide and Conquer option added for serial execution +
              : code tidied
cgwf.F        : Indentation tidied (tabs removed)
chempot.F     : Indentation tidied (tabs removed)
dhscf.F       : Spin-spiral I/O handled for parallel version
diagg.F       : Aux array no longer passed to rdiag
gradient.F    : Bug fixed for eta .ne. 0 case
kgrid.F       : Spin-spiral I/O handled for parallel version
kgridinit.F   : Spin-spiral I/O handled for parallel version
mulliken.F    : Indentation tidied (tabs removed)
on_subs.F     : Duplicate definition of numbtmp removed
pdosk.f       : Explicit declaration of type for dfloat added
pulayx.F      : Indentation tidied (tabs removed)
rdiag.F       : Divide and Conquer option added for serial execution +
              : code tidied. Argument "fv" removed, and allocation now
              : done using alloc module.
redata.F      : State of divide and conquer flag output
siesta.F      : Ekinion zeroed at the start to avoid case where it is
              : uninitialised. Plus sequence of testing of state of S
              : is altered to avoid a "size" operation on an unallocated
              : pointer.
transfer.f    : Indentation tided (tabs removed)
version.f     : version number incremented
vmb.F         : Indentation tided (tabs removed)
Lib/blas.f    : Updated to include the divide and conquer required routines.
Lib/lapack.f  : Updated to include the divide and conquer required routines.
Sys/sgi64-mpi_fermat.make : -lscs flag added for DaC routines
=======================================================================
Version: 1.2.15
Date: 2002/07/14 17:00 
Title: Cosmetic changes for School
Author: Alberto Garcia

Description:

The atomic generation routines have been enhanced to provide
more information for plotting. Gen-basis now accepts only one
species. 
Tutorials directory added.
The manual has been updated to mention the existence of the ATOM
manual.

=======================================================================
Version: 1.2.14
Date: 2002/06/28 17:00
Title: Non-collinear GGA
Author: Jose M. Soler <jose.soler@uam.es>

Description:

Support for non-collinar GGA. The local xc energy is made dependent
of the gradient of the density and of the MAGNITUDE of magnetization, 
but not of the gradient of the magnetization direction.
Implemented by Victor M. Garcia <victor@condmat.uniovi.es>

Files:

xc.f: Modified the subrutine GGAXC to allow for non-collinear spin. 

=======================================================================
Version: 1.2.13
Date: 2002/06/24 12:45 
Title: Spin spiral
Author: Jose M. Soler <jose.soler@uam.es>

Description:

Support for spin-spiral states, implemented by Victor M. Garcia
<victor@condmat.uniovi.es>

Files:

dhscf.F:      Call to rhoofdsp and vmatsp.
diagon.F:     Call to diagsprl.
kgridinit.F:  If spiral, skip time reversal symmetry (include all k's)
kgrid.F       If spiral, skip time reversal symmetry (include all k's)
diagsprl.F    New. Diagonalizes the Hamiltonian for spin spiral.
ipack.f       New. Packs/unpacks several integer indexes into/out of one
readsp.f      New. Reads spiral wave vector
rhoofdsp.f    New. Substitutes rhoofd for spiral configurations.
vmatsp.f      New. Substitutes vmat for spiral configurations.
Makefile      Add diagsprl.F, ipack.f, readsp.f, rhoofdsp.f, and vmatsp.f

=======================================================================
Version: 1.2.12
Date: 2002/06/20 17:00 
Title: Simplification of fdf module
Author: Alberto Garcia

Description:

The fdf module provides f90 interfaces for the f77 routines in
fdf.f, as well as new, pure-f90 routines. Until now there was
also an overloaded routine "fdf_get" which could stand for any
of the specific scalar routines. Unfortunately, either the Intel
or the PGI compiler chokes with its implementation.  It is almost
certain that these are compiler errors. However, in the interest
of portability, the "fdf_get" interface has been removed.

For the same reason, the routine fdf_parsed_string (currently not
used in Siesta) has been removed.

Changed Files:

fdf/fdf_mod.f
in Src:
basis_specs.f coor.f initatom.f chemical.f fdf_mod.f spin_init.f

=======================================================================
Version: 1.2.11
Date: 2002/06/11 17:00 
Title: Changes for (partial) support of Intel Fortran Compiler
Author: Alberto Garcia

Description:

The Intel Fortran Compiler is apparently strong at optimization but
very weak at following standard practice. It is not trivial to
integrate full support for it, but the current version of Siesta (at
least the serial incarnation) can still be made to compile portably
with a few kludges. At this point there is no support for MPI or
NetCDF.

1. Changes in fdf/fdf_mod.f: addition of redundant internal interfaces.
2. fdf/makefile: kludge to make the fdf directory visible in the
   "subprogram catalog", and to deal with new extension for module files.
3. Makefile: clean procedure updated.
3. New intel*.make files in Sys.

Thanks to Eduardo Anglada for helping with the catalog issue.

Changed Files:

fdf/fdf_mod.f
fdf/makefile
Makefile
Src/Sys/intel-mkl.make:    New file. Uses optimized mkl libraries
Src/Sys/intel-nolibs.make: IFC needs a special library...

=======================================================================
Version: 1.2.10
Date: 2002/06/07 15:00 
Title: Bugs in non-collinear spin
Author: Jose M. Soler <jose.soler@uam.es>

Description:

1. Avoid out-of-bounds in array qos

2. Definition of hermiticity relations for the Hamiltonian and
   density matrix in diag2g.F and diag2k.F

4. Modified the density matrix in diag2k.F to take ino account the 
   time reversal symmetry.

5. Modified siesta.F to skip the eigenvectors calculation if there is
   only one SCF step.

All these bugs were found and corrected by Victor M. Garcia
<victor@condmat.uniovi.es>

Files:

diag2g.F    Correct hamiltonian hermicity
diag2k.F    Correct hamiltonian hermicity and time-reversal in DM
mulliken.F  Avoid out-of-bounds in array qos
siesta.F    Avoid writting noncalculated eigenvalues
siesta.tex  Date and version updated

=======================================================================
Version: 1.2.9
Date: 2002/04/30  15:00 GMT
Title: Vmat fix
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

An error in the diagonal elements of Vlocal has been corrected, as well
as a few more minor items.

Files:

meshmatrix.F	Case where no mesh points are allocated to a node during
                parallel execution is handled properly with respect to
                zero length arrays.
on_subs.F       Duplicate definition of numbtmp removed
vmat.f      	Error in diagonal elements of Vlocal corrected
xc.f		Variable name corrected in pzxc from DECPDN -> DECFDN
=======================================================================
Version: 1.2.8
Date: 2002/04/11
Title: Bug fixed in vmat.f, rhoofd.f, and dfscf.f
Author: Javier Junquera <Javier.Junquera@ulg.ac.be>

Description:

1. A bug has been fixed in the subroutines that calculate
   the integrals in the real space mesh.
   If the longest orbital of a given specie is unoccupied in 
   the free atom, then some points were wrongly skipped
   while calculating the integrals.
   The definition of the cutoff radiae has been modified in
   vmat, rhoofd and dfscf
   Files: vmat.f, rhoofd.f, dfscf.f
 
2. The maximum number of iterations to converge the Fermi
   energy has been increased to 100. For some systems 50 is not
   a large enough number.
   File: fermid.F

3. Customary changes in file Src/version.F and Docs/CHANGES
   File: version.F, Docs/CHANGES

=======================================================================
Version: 1.2.7
Date: 2002/02/06
Title: PDOS calculation back into siesta.F...
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

The PDOS calculation had been deactivated in siesta.F due to an error. 
It has been put back in.  File: siesta.F

=======================================================================
Version: 1.2.6
Date: 2002/02/04
Title: Interface with F90 Denchar Utility
Author: Javier Junquera <Javier.Junquera@ulg.ac.be>

Description:

1. The interface between Siesta and Denchar has been implemented
   using Fortran 90. 
   File: plcharge.F

2. The interface routine is called again from Siesta.
   (This call was commented in the fortran 90 Siesta branch.
   File: siesta.F

3. Subroutine plcharge is included in the object list.
   File: Makefile

4. Almost all the routines in the utility package Denchar have been 
   rewritten in Fortran 90 in order
   to make it compatible with the 1.X version of Siesta.
   Files: Util/Denchar

5. Customary changes in file Src/version.F and Docs/siesta.tex
   File: version.F
=======================================================================
Version: 1.2.5
Date: 2002/01/17
Title: Bug fix in pdos.f, reorg of ghost routine, lmxkb info for users
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

1. Fixed a writing bug in pdos.f (for spin-polarized calculations).
   File: pdos.f

2. Make f-channel the highest-l projector used.
   Inform the user about the possibility of
   using a lower lmxkb.
   File: basis_specs.f

3. Reorganize routine ghost (avoid computing excited state if
   not necessary). Remove references to "atom.h".
   File: atom.f
=======================================================================
Version: 1.2.4
Date: 2001/12/14  18:15 GMT
Title: Order N improvements/tidy
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

The key changes relate to improvements in the order N part. The form of
cspa and eandg has been changed, in particular. Now the parameters maxnf,
maxnft and maxnhij are found in eandg, not in cspa. This allows an
accurate determination of the sizes in parallel and leads to much 
improved parallel scaling of cspa, removing this bottleneck for very
large calculations. There are also improvements to ener3.F and gradient.F
to reduce memory requirements and improve performance. There are also a
large number of minor changes where unused variables have been cleared
out.

Files:

atmfuncs.f      Unused variables removed to be tidy and reduce warnings
atom.f          Unused variables removed to be tidy and reduce warnings
atomlwf.F       Considerably changed to achieve reasonable parallel
                scaling and efficiency. The parameters nfmax, nftmax
                and nhijmax are no longer determined here since the
                values were always overestimates when operating in 
                parallel and this allows the code to be more readily
                distributed over processors. The determination of the
                sparse indexing and the initialisation of the LWFs has
                been separated so that parallelism can be achieved without
                altering the effect on the random initialisation. The
                building of the sparse indices is now distributed by
                search atom over Nodes.
bands.F         Unused variables removed to be tidy and reduce warnings
basis_io.F      Unused variables removed to be tidy and reduce warnings
cgwf.F          Variables maxnf, maxnft and maxnhij removed as arguments
                and no longer passed to eandg.
detover.F       Dimensions of psitmp for passing corrected and full
                matrix used in savepsi option. Also referencing of
                variable "je" return to the global frame as "jeg"
                where necessary. Unused variables removed.
dfscf.f         Unused variables removed to be tidy and reduce warnings
diag2g.F        Unused variables removed to be tidy and reduce warnings
diag2k.F        Unused variables removed to be tidy and reduce warnings
diagpol.f       Unused variable "io" removed
egandd.F        Structure changed due to the fact that maxnhij, maxnft
                and maxnf are now determined here, rather than in cspa.
ener3.F         Re-structured for greater parallel efficiency / lower
                memory use.
forhar.f        Unused variables removed to be tidy and reduce warnings
gradient.F      Variables nfmax/nhijmax globalised
initatom.f      Unused variable "js" removed
ionew.F         Declaration of "used" removed since variable is unused
                in io_status
kgridinit.F     Unused variable "d" removed
ksv.F           Unused variable "mxhov2" removed
matel.f         Unused variable "js" removed
meshsubs.F      Unused variables removed to be tidy and reduce warnings
old_atmfuncs.f  Declaration of "maxo" removed since variable is unused
on_subs.F       New routines added that are variants on the old ones
                for determining just the array dimension parameters
                nfmax, nftmax, nhijmax.
ordern.F        Modified to reflect the removal of nfmax, nftmax and
                nhijmax
parallel.f      Unused variables removed to be tidy and reduce warnings
phonon.F        Unused variables removed to be tidy and reduce warnings
pulayx.F        Unused variable "iii" removed
rhooda.f        Unused variable "in" removed
rhoofd.f        Unused variables removed to be tidy and reduce warnings
siesta.F        Unused variables removed to be tidy and reduce warnings
vmat.f          Unused variables removed to be tidy and reduce warnings
=======================================================================
Version: 1.2.3
Date: 2001/11/20  12:30 GMT
Title: iorho parallel fix / order N improvements
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

The handling of blocksizes has been corrected in iorho.F, since
the data distribution model coded was not quite the same as in
dhscf.F. The routine has been changed to make things consistent.
Further improvements have been to the order N part to reduce the
memory and increase the speed. In particular, the set up of the
indexing arrays has been examined. In axb_build1, the array ind
has been switched from a 2-D to 1-D array which is set up as necessary
using the sparsed stored indices. Also the broadcast of data has
been altered to group data so that each Node only broadcasts once.
The size of the local scratch arrays in denmat have also been reduced
by finding the optimum value of nfmax.

Files:

   atomlwf.F    Rounding error allowed for in checking of number
                of electrons.
   denmat.F     Memory reduced further / performance increased.
                Main change is to value of nfmax used to size
                local temporary arrays.
   egandd.F     Array indgf is distributed across nodes.
   gradient.F   Memory reduced further / performance increased.
   iorho.F      Calculation of blocksizes for I/O in parallel
                was in error. Now fixed.
   on_subs.F    The array ind has been removed and replaced by a
                1-D array which is filled as necessary from nindv
                which is sparse. Also data is broadcast by Node
                rather than by orbital. Array indgf is distributed
                across nodes.
   outcoor.f    I/O modified to handle up to 999,999 atoms
   siesta.F     I/O modified to handle up to 999,999 atoms
=======================================================================
Version: 1.2.2
Date: 2001/11/05  16:00 GMT
Title: Memory re-linearised in order N
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

In the process of originally parallelising the order N part,
the linear scaling of the memory usage with system size was
lost. This has now been restored which should lead to memory
savings for large jobs in parallel.

Files:
   denmat.F      Modified to change size of all 2-D or higher
                 arrays so that two dense indices are never
                 used.
   egandd.F      Call to ind_gf reinstated and fttof passed to
                 gradient. Left-hand dimension of fttof/listft
                 corrected to maxnft.
   ener3.F       Modified to change size of all 2-D or higher
                 arrays so that two dense indices are never
                 used.
   gradient.F    Modified to change size of all 2-D or higher
                 arrays so that two dense indices are never
                 used.
   on_subs.F     Subroutine ind_gf reinstated as fttof is now
                 used again.
   MPI/Makefile  Two blank lines removed that break the make
                 on SGI machines.
=======================================================================
Version: 1.2.1
Date: 2001/10/11  17:30 GMT
Title: Accelerated direct spin polarised calculations
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

The use of the DirectPhi option has been accelerated for spin
polarised calculations by only calculating the values of Phi
on the mesh once. This is achieved by moving the loop over
spin inside rhoofd and vmat. Also a bug in the print out of the
spin polarisation when running in parallel has been fixed.

Files:
   dfscf.f       Call to matrixOtoM modified.
   dhscf.F       Calling of rhoofd and vmat modified.
   meshmatrix.F  Spin loops moved within matrixOtoM and matrixMtoO.
   rhoofd.f      Looping over spin components now included internally.
                 Dlocal array stored in triangular fashion.
   siesta.F      Qspin now globalised before print out of spin 
                 polarisation.
   vmat.f        Looping over spin components now included internally.
                 Vlocal array stored in triangular fashion.
=======================================================================
Version: 1.2.0 [No change]
Date: 2001/10/04
Title: Bug fixes in basis_io.F
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

Fixed bugs having to do with:

1. The use of the .ion files generated by an independent siesta or
gen-basis run.
2. The default mass for floating orbitals

(Discovered just after the release of siesta-1.1)

Files:
   basis_io.F:   Second derivative of elec_corr structures was not
                 updated after generation in elec_corr_setup.
		 Changed filename from XX.ion_nc to XX.ion.nc
   basis_specs.f: Do not make default mass too big for floating orbitals.
=======================================================================
Version: 1.2.0
Date: 2001/09/26
Title: Merge from rel-1-1-branch at 1.1 release point (siesta-1-1)
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

 Starting point for new cycle of development.

 Changes and fixes in preparation of the 1.1 release
 merged back to main trunk:

* Fixed mismatched MPI block in siesta.F (related to PDOS change).
  file: siesta.F

* Total DOS file is now just *.DOS.

* Better output for PDOS file. Used "xml" format to ease (?) 
  processing (evolving ideas).
  files: pdos.f pdosk.f 

* Added new "h2o_dos" test in Src/Tests.

* Added "xml" output for .ion data.
  files: xml.f basis_io.F radial.f initatom.f

* Committed Bug fix for O(N) calculations (Julian Gale)
  file: gradient.F Src/Tests/Makefile (enabled h2o_orderN)

* Added new sgi64-mpi_fermat.make file (Julian Gale)

* Array shape fixes in xc.f (cosmetic) (Julian Gale)

* Added top README file.

* Removed obsolete source files from Src directory.
  files: iorder.f order.f ordvec.f ylmylm.f lofilm.f
         resize.F ylmexp.f symbol.f rlylm.f die.F

* Added user.list (Please update), build_parallel.sh, and other 
  release-related files, and updated some others. These files are
  not part of any distribution.

* Updated CONDITIONS (list of developers)

* Many User Guide updates (J. Junquera, E. Artacho, A. Garcia)

* Removed .vps, out.fdf, and siesta.size files from Examples directory.

* Updated .out files in Src/Tests and Examples/*/Out

* Added Util/PyAtom/pdos.py script (experimental -- not in release)

* Set Version to 1.2.0

=======================================================================
Version: 1.0.62
Date: 2001/09/24  12:00 GMT
Title: Projected Density of States.
Author: Javier Junquera <javier.junquera@uam.es>

Description:

The Total Density Of States (Total DOS), and its projection
on the basis orbitals (Projected Density Of States, PDOS),
are computed and dumped to files ('.TOT.DOS' and '.PDOS' respectively).

This only works in a serial run. An error message will be issued 
when we try to use it in a parallel execution.

It is only implemented when the hamiltonian
is solved by diagonalization with k-points.

Files:
   siesta.F    Call to pdos subroutine is added
   pdos.f      New subroutine, interface between siesta and the one that
               computes the PDOS
   pdosk.f     New subroutine. Computes the PDOS
   Makefile    pdos.o and pdosk.o added to object list 
   Docs/siesta.tex, Docs/siesta.ind
	       Documentation of new block usage.
========================================================================
Version: 1.0.61
Date: 2001/09/16  18:00 GMT
Title: New input/output facilities for ps and basis information
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

Pseudopotential information can now be read by SIESTA in formatted
form from '.psf' files (which are now also generated by ATOM). This
will make it easier to transport ps files among computers. The
old *.psatom.data files are no longer valid.

Also, the PAO, KB projector, and Vlocal and charges data are dumped to
'.ion' (and '.ion_nc' if NetCDF is available) files, which can later
be used to re-generate the atomic information if the 'user-basis'
(or 'user-basis-netcdf')  option is specified in SIESTA.  A header section
containing information about the specifications for basis construction
and about the pseudopotential used is also included.

Files:
   chemical.f  New module to centralize the chemical species info.
   pseudopotential.f
	       New routine to read formatted '.psf' files.
	       New routine to print a header containing basic ps info.
	       
   basis_io.F  Modifications to the routines which read and write the
	       '.ion' files.
   atm_types.f basis_specs.f basis_types.f atm_types.f  initatom.f
   transfer.f
	       Minor changes to support the above changes.

   Pseudo/atom/wrapup.f
	       New file VPSFMT output
   Pseudo/atom/Samples/pg.sh
               File VPSFMT copied to <name>.psf
   Pseudo/atom/Docs/User.Guide
	       Updated

   Docs/siesta.tex, Docs/siesta.ind
	       Documentation of new file usage.
========================================================================
Version: 1.0.60
Date: 2001/09/11  17:00 GMT
Title: Corrections and modification to limit runaway memory
Author: Julian D. Gale <j.gale@ic.ac.uk>

Description:

This is a collection of corrections for a few bugs, typos,
and problems noticed on certain platforms. It appears that
on Linux boxes, under Absoft f90, and on DEC platforms the
f90 implementation fails to properly free memory when 
deallocated. Because of the size of phi/listp2/lstpht, this
can rapidly lead to the memory being exhausted on some machines.
Hence a workaround has been added to PhiOnMesh so that these
arrays are only redimensioned when absolutely necessary -
i.e. they are too small. A tolerance has also been added to
the initial dimension (of 1%) to hopefully minimise
reallocations.

Files:
   atom.f      Spelling of "analysis" corrected
   matel.f     Dimensions of arrays adjusted to prevent crash when
               running in parallel (contraction prevented). Debug
               statements commented out.
   meshsubs.F  Reallocation of phi/lstpht/listp2 avoided one possible
               to avoid memory increasing on platforms that fail to
               properly deallocate arrays from memory.
   mulliken.F  Spelling of "analysis" corrected
               Loops over 1,Nodes corrected to 0,Nodes-1
   redata.F    Spelling of "analysis" corrected / alignment of write
               tidied
   siesta.F    Call to ioeig corrected to pass no_u instead of no_l
========================================================================
Version: 1.0.59
Date: 2001/07/10  10:00 GMT
Title: Changes to support pgf90 and non-MPI version
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

A. The pgf90 compiler had trouble compiling certain sections of the
code. These had been rewritten slightly to help it.

  Files:
    Src/fdf/parse.f:  Use token_arr instead of tokens to avoid compiler	
                      bug.
    Src/fdf/fdf_mod.f, fdf.f : Use fdf_block_old wrapper routine to
                               avoid compiler bug that led to an 
                               infinite loop.
    Src/alloc.F90:    Fix declaration of character variable.
    Sys/pgf90*.make:  Name NetCDF library explicitly, instead of using -L.
    
B. The process to generate a de-MPI'ized version suitable for general
   users has been streamlined somewhat.

 Files:

   build_serial.sh:  Use the same Makefile. Copy also .f90 files
   Src/Makefile:     Test for existence of MPI directory before cleaning.
=======================================================================
Version: 1.0.58
Date: 2001/06/29  12:00 GMT
Title: removed local variables NSM and NMESHG in cellxc
Author: Jose M. Soler <jose.soler@uam.es>

Description:

Variables NSM and NMESHG are now imported from module mesh and
should not be redeclared locally.

Files:
   cellxc.F: removed local variables NSM and NMESHG
=======================================================================
Version: 1.0.57
Date: 2001/05/18  20:15 GMT
Title: serial version of cellxc.F and xc.f returned to f77
Author: Jose M. Soler <jose.soler@uam.es>

Description:

The serial part of cellxc and atomxc was returned to f77, to make
it more transportable as a separated package. Required node and
mesh arguments for parallel esecution are now obtained directly
within cellxc, rather than passed as arguments.

Files:
   cellxc.F:   serial part returned to f77
               Node and Nodes obtained by calling MPI
               NMESHG and NSM obtained from module mesh
   dhscf.F:    call to cellxc
   forhar.f:   call to cellxc
   meshsubs.F: added static valiables NMESHG and NSM
   siesta.F:   removed save declarations
   xc.f:       returned to f77
=======================================================================
Version: 1.0.56
Date: 2001/05/18  20:00 GMT
Title: Corrected bug in MATEL which produced numerical errors
Author: Jose M. Soler <jose.soler@uam.es>

Description:

A change in the call to RADFFT was missing in basis_io.F and 
read_user_basis.F. Instead, RADFFT has been returned to its previous
state, to avoid reproducing this error. This corrects the small
numeric differences in the output introduced in version 1.0.50.
Additionally, calls to realloc were simplified in MATEL.

Files:
   matel.f:  simplified realloc procedures
   radfft.f: commented out return of spillage in last element
=======================================================================
Version: 1.0.55
Date: 2001/05/11
Title: Grid cell sampling bug fix
Author: Emilio Artacho <Emilio.Artacho@uam.es>

Description:

The energy was not being averaged by the grid-cell-sampling option,
since the calculation of Etot (and Eharris and FreeEner) was done
only in the before-last iteration, before grid-cell sampling. Fixed.

Files:
   siesta.F
   (customary version.F, CHANGES and siesta.tex)
=======================================================================
Version: 1.0.54
Date: 2001/05/01
Title: Mesh memory correction
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

Out of bounds memory writes were occuring for a small number of arrays
in routines relating to the mesh for some cases. This was related to
the local variable "maxloc" being used in two different contexts with
a common value. A new separate value has now been introduced for the
case where a value which was too small was being assigned.

Files:
   dfscf.f         : Sizing of ibc, C, gC and xgC corrected.
   rhoofd.f        : Sizing of ilc and Clocal corrected.
   vmat.f          : Sizing of ilc and Clocal corrected.
=======================================================================
Version: 1.0.53
Date: 2001/04/26
Title: New inver
Author: William Mattson <wmattson@uiuc.edu> (committed by JDG)

Description:

It turns out that the subroutine inver fails for certain matrices
and returns "NaN"s. This was observed by William Mattson from
Richard Martin's group and he has kindly provided a routine
that fixes the problem.

Files:
   inver.f         : Removed in favour of inver.f90
   inver.f90       : Replaces inver.f
=======================================================================
Version: 1.0.52
Date: 2001/03/27  08:45 GMT
Title: Matel fixes
Author: Julian D. Gale <j.gale@ic.ac.uk>

Description:

A number of corrections have been made, primarily to matel. The
main change to matel is to explicitly zero INDF and INDFF when
reallocated in case this is not the default action and also to
trap when IOPER increases so as to increase the size of the
appropriate arrays. A few other bugs have been cleared up for
parallel execution.

Files:
   ksv.F           : Dimension of ek changed to nuotot.
   matel.f         : INDF / INDFF zeroed after realloc calls.
                   : Test for INDF being associated added to avoid
                   : call to SIZE when INDF is a null pointer.
                   : Change in third dimension (IOPER) now trapped.
   parallel.f      : New subroutine to set the default blocksize
                   : added - checks that if the number of orbitals
                   : is small then the blocksize is lowered to ensure
                   : some work on each processor.
   siesta.F        : Setting of level for alloc routines corrected
                   : for parallel execution.
                   : Call to new routine for setting default blocksize
                   : added and calls for parallel setup moved until
                   : later in the routine so that no_u is defined.
=======================================================================
Version: 1.0.51
Date: 2001/02/28  05:00 GMT
Title: Improved memory for parallel order N
Author: Julian D. Gale <j.gale@ic.ac.uk>

Description:

The key routines for order N calculation have been modified
to lower the peak memory usage by reordering certain operations
to reduce the amount of local workspace at the expense of a
communication overhead in some cases for multiprocessor systems.
A few other changes have been made as a result of compilation
and testing of the latest version on the Cray and under the
pgf90 compiler.

Files:
   ener3.F         : Memory usage reduced for parallel execution
   denmat.F        : Memory usage reduced for parallel execution
   gradient.F      : Memory usage reduced for parallel execution
   dhscf.f         : Typo in message corrected
   fdf/fdf_mod.f   : Local variable default2 added to fdf_sp to
                   : handle type conversion on calling fdf_single
   periodic_table.f: lmax lowered to 3 in cnfig to avoid write beyond
                   : bounds error when called by routines where lmax is
                   : already 3
   Makefile        : atmparams.o added to object list for make of base
=======================================================================
Version: 1.0.50
Date: 2001/01/31  17:30 GMT
Title: Miscellaneous corrections
Author: Jose M. Soler <jose.soler@uam.es>

Description:

More modular reading of .RHO files in plrho.
Calls memory from realloc to keep the correct total allocated memory.
Authorship correction of some periodic_table routines.

Files:
   alloc.F90       : Call memory. Corrected CRAY sizes.
   arw.F           : Document moving of some routines
   iorho.F         : Returns correct sizes instead of stopping
   matel.f         : Last function value made zero after radfft call
   parallel.f      : Default initialization of Blocksize and ProcessorY
   periodic_table.f: Authorship correction of some routines
   Plrho/iorho.f         : Serial version of iorho
   Plrho/plrho.f         : Use iorho to read .RHO files
   Plrho/plrho.f77       : Fortran77 version
   Plrho/plrho_guide.txt : Document previous changes
=======================================================================
Version: 1.0.49
Date: 2001/01/29  19:00 GMT
Title: Merge of 'newatom' branch
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

The basis-generation subsystem has been improved by rationalizing some 
data structures and making some code simpler. A major simplification 
involves doing the work in serial mode and broadcasting only the final
data structures. A more powerful 'parse' mechanism has been implemented 
to help with the complex processing of data blocks which define the
basis. A complete list of changes follows.

Files:
   atom.f: Back to serial mode. Streamlined somewhat, but still basically
           unchanged. Lots of more work needed.
   atom.F: Removed.
   atm_types.f: Data structures to hold PAO, KB proj, and vlocal info.
   atminit.F: Removed. Its functionality is now in...
   initatom.f: Includes logic to deal with user-defined bases (new format).
   atomlist.f: Now computes total number of orbitals and KB projectors. 
               Includes superx.
   base.F: A new, standalone, program for basis generation.
   basis_io.F: Reads and writes basis information in two formats: pure
               ASCII and NetCDF (if compiled in). Note that the .F suffix
               does not have anything to do with MPI... it is needed to
               preprocess NetCDF blocks.
   basis_specs.f: New routines for basis definition. See documentation
                  in the file itself.
   basis_types.f : Data structures for basis specification, and routines
                 to interface with the old-style arrays needed by 'atom'.
   broadcast_basis.F: New file.
   cdiag.F: Make H and S real arrays with an extra dimension, so that
            the (formal) interface errors do not stop the program in
            debugging runs. Now the interface mismatch is passed on
            to the library side.
   cellxc.F: Arrays xmesh and aux are now assumed size to avoid 
             interface mismatches.
   chkdim.F chkdim.f: Calls routine 'die' to avoid explicit MPI code.
   coceri.f: Uses 'periodic_table' module (q.v.) and automatic arrays.
   coor.f coxmol.f pixmol.f: Use 'periodic_table'
   dfscf.F: fal array dimensioned to na instead of nua.
   diagon.F: Aux array size was too small for 'diagk' case.
   diag*.{f,F} propor.f: Use new module 'sys' (q.v.)
   die.F: Removed. Functionality in module sys.F (q.v.)
   dump2cdf.F dump_ascii.f: Removed. Functionality now in basis_io.F
   gauleg.f lofilm.F
   rlylm.f ylmexp.f 
   ylmylm.f: Removed and integrated into new module 'spher_harm.f', to
             make the interfaces explicit.
   ionew.F: New prototype module to deal with logical unit numbers and
            the variable IOnode (to simplify MPI I/O).
   matel.f: Array syntax explicit in some calls to match the interfaces
            in spher_harm.
   meshsubs.F: Dummy argument fal was wrongly dimensioned (to na instead
               of nua) in routine neutralatomonmesh. Inocuous but wrong.
   old_atmfuncs.f: It now does the allocation and clearing of the
                   old-style atomic tables which use to be done in 'atom'.
   periodic_table.f: New module with purely 'atomic' routines, taken from...
   arw.F: 'atomic' routines moved to module 'periodic_table'.
   plcharge.F: Removed. Functionality provided by .RHO files and the 
               helper programs in Util/Contour and Util/Plrho
   pseudopotential.f: New module to read and hold the data from ps files.
                      (Currently, the data is recopied in 'atom')
   radial.f: Dynamic table size.
   recipes.f: Use automatic arrays when needed.
   redata.F: Issues note about .RHO file substituting denchar info.
   redbasis.f: Removed.
   siesta.F: New initatom interface. PDOS stub (not implemented yet).
             Remove call to plcharge. Use 'parse' module. Initialize
             array listhold after allocation. Explicit calls to
             routine superx after every kind of atomic move.
   sorting.f: New module, which includes:
   ordix.f ordvec.f order.f iorder.f: removed
   superx.f: put in module atomlist (and also as internal sub in coor.f)
   hsparse.f minvec.f: Changed to .f extension. Use 'sorting'.
   spher_harm.f: New module holding the Spherical Harmonics routines, 
                 with explicit interfaces.
   symbol.f: Removed. Included in module 'periodic_table'.
   sys.F: New module. Implements routines 'die' and 'bye'. These can
          be called to terminate an MPI job from anywhere in the program.
   transfer.f: Streamlined.
   types.f: Removed. Now called atm_types.f
   Makefile: Changed to reflect the additions and deletions.
   NetCDF/README: New file explaining some compatibility issues.
   fdf/fdf.f: Change name of block data.
   fdf/fdf_mod.f: New features. See documentation in file.
   fdf/fdf2.f fdf3.f: removed.
   fdf/parse.f: New file. A more powerful parser. See docs in file.
   fdf/makefile: updated.
   Docs/siesta.tex: Use makeidx package. Updated to reflect new changes.
=======================================================================
Version: 1.0.48
Date: 2001/01/23  17:30 GMT
Title: Bug Fix (nlcc + spin)
Author: Pablo Ordejon <ordejon@icmab.es>

Description:

Fixed bug reported by J. Junquera (on Jan 20 2001) and 
G. Canto (Jan 22 2001). The bug produced wrong values
of the stress and forces for calculations with spin
polarization and non-linear core corrections (simultaneously).

Files:
   meshsubs.F : Routine PartialCoreOnMesh corrected.
   Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.47
Date: 2001/01/12  19:30 GMT
Title: Dynamic (re)allocation in MATEL
Author: Jose M. Soler <jose.soler@uam.es>

Description:

As a leftover of f77 static allocation requirement, the array
dimensions in MATEL are found using obscure formulas. F90 and the 
alloc module allow a simpler and cheaper reallocation on the fly.

Files:
   matel.f   : Arrays reallocated on the fly, using alloc module
               Suppressed matel_init and matel_module
               Removed pure-spherical-harmonic requirement for orbitals
   atmfuncs.f: Allowed IO=0 in LOFIO and MOFIO (with result L=0)
   kinefsm.f : Removed 'use matel_module' statement
   naefs.f   :  "
   nlefsm.f  :  "
   overfsm.f :  "
   phirphi.f :  "
   radfft.f  : G(NK) returns spilling of G(k) beyond Kmax
   siesta.F  : Supressed call to matel init
               Added alloc_report initialization and printout
   Makefile  : matel moved from module to normal routine
               Added dependence of matel.o on alloc.o
               Supressed dependences on matel_module
   siesta.tex: Added documentation of new option AllocReportLevel
========================================================================
Version: 1.0.46
Date: 2001/01/09  11:00 GMT
Title: Bug fis in iomd.f
Author: Pablo Ordejon <ordejon@icmab.es>

Description:

A problem with the reading/writing in the MD files is solved.
The problem consisted in the inability of some compilers
to write once the EOF character was reached.


Files:
   iomd.f:    Backspace command added
   Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.45
Date: 2000/12/13  12:00 GMT
Title: Interface to K. Parlinski's PHONON program
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

K. Parlinski's program PHONON can analyze the crystal structure and
provide a set of symmetry-irreducible atomic displacements with which
to compute the dynamical matrix and obtain the phonon dispersion
relations and other lattice-dynamical magnitudes.  Siesta can now read
PHONON-provided information (basically in the MD.ATforPhonon and
PhononLabels blocks), carry out the required calculations (in a form
similar to that used for brute-force FC approach) and write a
SystemLabel.PHONON file that can be post-processed by PHONON.

Files:
   phonon.F:  Module implementing the interface routines.
   redata.F:  Logic to decide when a PHONON calculation (idyn=7) is
              to be undertaken.
   siesta.F:  Calls to phonon.F routines.
   Makefile:  Addition of phonon.F.
   siesta.tex: Brief documentation of the interface.
   Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.44
Date: 2000/12/12  19:46 GMT
Title: BUG FIXED. Ref. br-20001209-002
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

Corrected bug reported by P. Ordejon:
Siesta was not parsing correctly the valence configuration
information if the pseudopotential file was generated in
a spin-polarized calculation.

Files:
   atom.F: New code to process configuration string.
   Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.43
Date: 2000/12/12  19:00 GMT
Title: Eigenvalue-only diagonalization for k-sampling
Author: Jose M. Soler <jose.soler@uam.es>

Description:

In the case of k-sampling, an initial diagonalization is now performed to 
find the eigenvalues, the Fermi level and the occupation weights. 
Since the eigenvectors cannot be stored because of memory limitations,
the diagonalization is later repeated to find them and the density matrix.
By calling the LAPACK diagonalization routine with an eigenvalue-only flag,
a major part of the CPU time of the first diagonalization can be saved.

Files:
   cdiag.F:  Add argument NEVEC with the number of desired eigenvectors
             If NEVEC==0, call ZHEGV with job='N' (eigenvalues only).
             Otherwise, find all eigenvectors, like previously.
             Supress FV argument in CDIAG and allocate it internally.
             Use realloc to allocate arrays.
   diag2g.F:  "
   diagpol.f: "
   diagk.F:  First call to CDIAG with NEVEC=0. Second with NEVEC=NUO
   diag2k.F:   "
   diagkp.F:   "
   Customary Docs/CHANGES, Docs/siesta.tex, and Src/version.F changes.
========================================================================
Version: 1.0.42
Date: 2000/12/12  15:30 GMT
Title: BUG FIXED. Siesta 1.X. Ref. br-20001209-001
Author: Pablo Ordejon <ordejon@icmab.es>

Description:

Bug fixed: Siesta 1.X. Ref. br-20001209-001 

Corrected bug reported by A. Garcia:
Extrapolation of the density matrix for FC calculations,
when no DM file was present. Besides, an error was detected
in extrapol.F for the case of k-point sampling (where maxo
is different from maxuo)

Files:
   siesta.F: Treat differently the extrapolation for FC calcs. with 
             no DM files.
   extrapol.F: Fix bug (dimensions of aux matrix were wrong for
               k-point sampling calculations).
   Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.41
Date: 2000/11/29  18:00 CET
Title: BUG FIXED. Routines 'initbands' in bands.F and 'fixed' in fixed.F
Author: Daniel Sanchez-Portal <sanchezp@uiuc.edu>

Description:

Two bugs corrected in 'initbands':
* Variable scale, defined as character*30, was broadcast and character*1
* switch added so kpoints are only broadcast to the other nodes if
  there is enough space to calculate and store them (nk.le.maxk)
One bug in subroutine 'fixed':
* The node reading the input was not specified

Files:
   fixed.F: Fix bug
   bands.F: Fix bug
   Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.40
Date: 2000/11/25  11:30 GMT
Title: BUG FIXED. Routine 'parabola' in atom.F
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:
 
Updated routine 'parabola' which deals with multiple zeta orbital
matching and was updated on branch siesta-0 after the fork (for some
reason the change was not detected earlier). This fix will cause
noticeable numerical differences in the 'split' routine output
concerning the kinetic, potential, and total energy of zeta>1 orbitals
in some limited cases (Fe in the Examples directory being one of
them). The orbital itself seems not to be noticeably affected.

Files: 
  atom.F : Updated routine parabola.
  Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.39
Date: 2000/11/24  13:15 CET
Title: BUGS FIXED. endif missing in MPI part of cellxc.F
Author: Pablo Ordejon <ordejonicmab.es>

Description:
 
Bug fixed: endif missing in MPI part of cellxc.F

Files: 
  cellxc.F : Fix bug
  Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.39
Date: 2000/11/23  16:15 CET
Title: BUGS FIXED: supercell call in dynamics loop + update of k-points
Author: Pablo Ordejon <ordejonicmab.es>

Description:
 
Several bugs have been corrected, that produced wrong results for 
dynamics runs with k-points. The first affected the case of fixed
cells, and the second the case of variable cells:
  - The supercel setup for k-points was wrongly done only out of the 
    dynamics loop for fixed dell. Corrected to setup within te loop.
  - The k-points were not updated for the variable cell case.
    Corrected to update them.

Files: 
  siesta.F : Fix bugs for supercell and k-points updates.
  Customary  Docs/CHANGES and Src/version.F changes.
========================================================================
Version: 1.0.38
Date: 2000/11/1	 21:30 CET
Title: adding Harris forces for the first SCF step.
Author: Javier Junquera <javier.junquera@uam.es>

Description:

 When Harris functional is being used in a molecular
 dynamics simulation, the initial charge density of each step
 is always the sum of atomic charges.

Files:
  siesta.F : Skip the extrapolation of the density matrix
             Initialize the density matrix in each SCF step
  redata.F:  New variable harrisfun. Switch that fixes if
             Harris functional is going to be used.
  Customary  Docs/CHANGES
========================================================================
Version: 1.0.38
Date: 2000/11/1  13:00 CET
Title: adding Harris forces for the first SCF step.
Author: Javier Junquera <javier.junquera@uam.es>

Description:
 
 The computation of the forces for the Harris functional
 in the first SCF step has been implemented. This functional 
 is a not self-consistent version of DFT. It is extremly
 cheap but not very accurate for system which involves
 great charge transfer. Suitable for long runs of 
 molecular dynamics simulations.

Files: 
  siesta.F : Skip the diagonalization in the last step. 
  meshsubs.F : Bug corrected in PartialCoreonMesh subroutine.
               Problem related with the distance of a given point
               of the grid to a given atom. If that distant is zero
               the point is not considered, and that's wrong.
  cellxc.F, xc.f : Derivatives of exchange-correlation potential 
                   respect the charge density. Only implemented
                   for Perdew-Zunger parametrization (LDA)
  dfscf.f : Improved efficiency.
  dhscf.F : Reads the functional in which the computation of the forces
            will be based. Call to cellxc updated. Call to dfscf updated.
            New call to forhar.
  forhar.f: New subroutine where the potentials needed by dfscf for
            the Harris functional forces are built.
  redata.F: Automatic set up of DM.UseSaveDM, MaxSCFIterations and
            DM.MixSCF1 when Harris' forces are selected.
  Makefile: Added forhar.f
  Customary version.F, Docs/CHANGES and Docs/siesta.tex
========================================================================
Version: 1.0.37
Date: 2000/10/09  20:15 CET
Title: correcting ibmp3.make and version.F
Author: Emilio Artacho <Emilio.Artacho@uam.es>

Files: Sys/ibmp3.make
       version.F, CHANGES, siesta.tex
========================================================================
Version: 1.0.37
Date: 2000/10/05  19:15 CET
Title: Improved efficiency vmat & rhoofd (buffer) / various for compiling
Author: Emilio Artacho <Emilio.Artacho@uam.es>

Description:

(1) vmat and rhoofd were less efficient than 0.12 corresponding ones
at least for some systems. The 'buffer' that keeps a piece of a matrix
in a non-sparse form has been increased (by 100) so that fewer unpdates
of this buffer have to be done in the whole procedure (J.M.Soler).
The efficiency is comparable now (even better).

(2) Siesta has been compiled in the IBM SP2 machine in Lyon, both
parallel and scalar. Parallel compilation has also been done for
a large parallel Compaq machine in Grenoble. Makefiles and related.

NOTE: The IBM didn't know about complex.2double, I removed it from mpi.F
      (not used)

Files:
  rhoofd.f, vmat.f : improved efficiency
  ibmp3.make, ibmp3-mpi.make, compaq-mpi.make : (in Sys/)
  MPI/mpi.F, MPI/Makefile 
  Customary version.F, Docs/CHANGES and Docs/siesta.tex 
========================================================================
Version: 1.0.36
Date: 2000/09/13  11:00 GMT
Title: Fix for plotting files / vmat speed up
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

The format of files for use in Plrho was changed due to necessity for
the parallelisation because the density matrix was not stored on any
one node in a complete form. Hence Plrho has had to be modified to
reflect this. Also a bug in iorho relating to this change has been 
fixed.
Also the implicit loops have been removed from several places in vmat
to improve performance with current compilers. In addition, a few
other performance enhancements have been introduced through the use
of local variables to reduce the number of multiplications in important
parts of the code.

Files:

   iorho.F    : The wrong dimension was being used in the inner loop
              : and has therefore been corrected.
   plrho.f    : Format of files from iorho changed to new form.
   vmat.f     : Implicit loops / sum function removed + VClocal added
              : to reduce number of multiplications.
========================================================================
Version: 1.0.35
Date: 2000/08/10  13:00 GMT
Title: Change in .DM format
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

The main change is to the way in which the .DM file is written. The
form of the statements has been changed to something much closer to
how it used to be written before the parallelisation forced some
changes. This was done because of poor performance during disk writes
on a cluster of machines with a remote mounted disk and will generally
benefit the speed of writes, though not always quite as dramatically
as in this case. Also a couple of minor changes were made to avoid
compiler hiccups and warning messages.

Files:
   alloc.F90  : argument "type" declared as (len=*) in type_mem for
              : the benefit of the PG compiler
   cellxc.F   : 0.0d0 -> 0.0 in a couple of places to avoid type
              : conversion warnings
   iodm.F     : form of write statements adjusted to maximum number
              : of writes per statement within parallel constraints
========================================================================
Version: 1.0.34
Date: 2000/07/29  17:30 GMT
Title: Change to PCC to remove spurious forces
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

Certain runs on a high symmetry system were found to give large
symmetry breaking forces for some atoms on a special position
but not all when using partial core corrections in the pseudo
potential. The problem was trace back to very small values of
the distance between the mesh points and atoms.

Files:
   meshsubs.F : r > tiny check has been added to trap small distances
              : that lead to spurious forces
   siesta.F   : comments stating that KSV_pol is not sorted for parallel
              : use have been removed as this is no longer true
========================================================================
Version: 1.0.33
Date: 2000/07/05  16:00 GMT
Title: Re-organization of atomic information. Other structural changes.
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

-- Completely new replacement for atmfuncs module.

Created a set of derived types to hold the information relative
to the atomic basis and pseudopotentials. The new structures are
somewhat more flexible and lean than the old ones. The functions in
atmfuncs have been re-implemented accordingly.

A new module 'types.f' holds the derived types (which might still be
streamlined somewhat). In 'transfer.f', the information is transferred
from the old atomic structures to the new ones.  The old atmfuncs
module has been renamed to 'old_atmfuncs'. The new structures are also
used in dump2cdf.F, which creates self-describing files with the
atomic information (see below).

Atom.F and redbasis.F are left mostly untouched for now.

The old dimensioning parameters (still useful for old_atmfuncs, atom, and 
redbasis) are kept in 'atmparams'.

Created a "radial function" derived type (not general enough, but
useful for atmfuncs) which encapsulates the linear grid and the
'splint' operation needed to interpolate on it. Presumably other types
appropriate for logarithmic meshes, more general functions, etc, could
be defined as well. The code is in 'radial.f', although the type
definition is still in types.f.

-- Matel.f 

Allocatable arrays local to matel turned into automatic arrays, which
are allocated and deallocated automatically by the compiler. (The SGI
had problems deallocating one of the arrays).  This solution (also
used in parsing.f) is the cleanest one for relatively small
arrays. For larger sizes, the process could run into stack limits
(which could in principle be circumvented by the use of the "limit(s)"
or "ulimit(s)" shell command).

-- Siesta.F atomlist.f atminit.F

Some streamlining of the code. Created a new module "atomlist" which
holds isa, xa, lasto, etc, and contains initatomlists and superc
(which does nothing but reallocate arrays if needed and expanding xa,
etc to the virtual supercell). Eventually, "atomlist" could be use(d)
by the routines which need those arrays.  Regarding the treatment of
the "real" and the "virtual" supercell, "ncells", "na", "no", etc,
meant different things in different places, and one had to be very
careful about it.  In the new version, the program knows nothing about
the supercell specified in the input file (as the manual says it
should). It only deals with "na_u" and "no_u", respectively the number
of atoms and the number of orbitals in the unit cell. If the use of
k-points forces the use of a "virtual" supercell, one needs also
"na_s" and "no_s". Those variables also live in module
'atomlist'. Also, "nuo" (the number of orbitals local to the node) has
been renamed to "no_l".

atminit.F could really be part of the atomic suite in the future.

-- OrderN issue: If the user requests k-points for an ordern calculation,
the program fails as some arrays are accessed beyond their dimensions.
Inserted a trap for (.not. gamma) before the call to ordern to check it.
Eventually the supercell variables should be made private to the small group
of routines which really need them... 

-- Use of new 'alloc' module by Jose.

It has been integrated as Src/alloc.F90, with some minor changes and
fixes (and a change of the module name to just 'alloc' instead of
'alloc_module').  It is used by siesta.F, coor.f, and atomlist.f to
deal with the atomlist arrays. 

 -- Redata.F coor.f init_spin.f

Eliminated the call to 'recoor' inside redata and replaced it by a
call from siesta to a new routine 'coor'. This almost eliminates the
need to call 'resize', except to initialize nspin. For now,
'init_spin' does only that bit, but it could be extended to do the
rest of the spin-related readings.

-- NetCDF hooks

Included support for the use of data files which are self-describing
and thus readable in a wide variety of ways. I have chosen the netCDF
format, which I think is powerful enough for our purposes. If the user
compiles Siesta with the NetCDF option (enabled in arch.make with a
couple of lines), the program will generate files with extensions
".dump.nc" for each of the species, containing the orbitals, KB projs,
etc. The 'ncdump' utility which comes with netCDF can be used to
produce a human readable form of the files, and other tools (such as
Python, or other compiled Fortran programs) can be used to provide any
desired information.  The basis information can also be read from the
.dump.nc NetCDF files by renaming them to .basis.nc and specifying
'new-user-basis' in the fdf file. (This capability is restricted for now to 
NetCDF-capable implementations).

-- NetCDF interface

A new directory NetCDF contains the F90 interface to the NetCDF
library Version 3.5 (whose source is kept in a separate cvs
repository, in case it is needed).  Note that the interface is
relatively new, and only works with that version of NetCDF.

-- MPI interface

Upgraded the MPI F90 interface by using kind numbers for the
generation of the module procedures which are then overloaded. A
single file "Interfaces.f90" is now produced. Cray users can now avoid
editing mpi.f90, as the necessary type fiddlings are done in a
preprocessor block in mpi.F.

-- Slight change to the arch.make macros. 

In order to support the new MPI and NetCDF interfaces, new macros have
to be defined in the arch.make file. Examples for Linux, SGI64, and
Osfdxml-cdf have been created in the Src/Sys file. (All of them with
NetCDF support which can be overridden).


-- Use of kind parameters in declarations and tagging of real constants.

Started using the 'kinds' defined in precision.F (note the change to
allow a possible Cray-related preprocessing) in some files.  The only
way to avoid precision-related pitfalls is to stick to consistent
declarations and the tagging of all real constants. See in particular
routine 'linmin' in file 'cgwf.F'.

-- Parse routine

Some of the %blocks in Siesta have lots of structure. Reading or
modifying it can be difficult.  We are looking for ways to make
'parse' more powerful. Eventually, it will live in a module of its own
together with extra data structures which won't have to be declared in
the calling routine. For now, a new module
('parsing') has been created. As a more
techical note also mentioned above, the allocatable
arrays have been replaced with automatic ones.

-- FDF2 module

As an exercise, created another fdf interface module which
contains a generic 'fdf_get' routine. It is called 'fdf2' and used
for illustration purposes in 'coor.f' and 'spin_init.f'.

-- IONode

Routines which formerly called MPI_Comm_Rank to find out whether 
it was OK to do IO can now just import the logical variable 'IOnode' from 
module 'ionew'. (Eventually ionew will contain all the stuff now in 'io').
The variable is initialized by a call to 'io_setup' in siesta.F.

-- Interface blocks

File interfaces.f contains interface blocks for ordern and
hsparse. Eventually, it would be desirable to provide explicit
interfaces for all the routines in the package (via interface blocks
or by the use of modules).

Changed, New, and Replaced files: Too many to list here (see the more
relevant cases in description above).

========================================================================
Version: 1.0.32
Date: 2000/06/19  22:00 GMT
Title: Handling of nonpositive density in exchange-correlation routines
Author: Jose M. Soler <jose.soler@uam.es>

Description:

The handling of negative or zero densities has been corrected and 
homogenized across xc routines. The DENMIN parameter has been
decreased to 1.d-15, to avoid small energy errors. Documentation for
the noncollinear spin option added to cellxc interface.

Files:
  xc.f     : Corrected overflow bug. DENMIN decreased
  cellxc.F : Corrected ISPIN loop limit. ABS(D) changed by MAX(0.d0,D)
========================================================================
Version: 1.0.31
Date: 2000/06/16  16:00:00 GMT
Title: Fix of order N, stress fixing and tidying of prmem.
Author: Julian D. Gale <j.gale@ic.ac.uk>

Description:

The problem with the serial version of order N dimension checking
has been corrected and the references to prmem removed as they
are now defunct. Also the ability to fix stresses has been added
to the geometry constraints.

Files:
   cellxc.F     : trapping of densities less than denmin added to
                : avoid floating point crashes in XC routines
   fixed.F      : stress fixing option added
   ksv.F        : prmem removed from list of external routines
   Makefile     : prmem.o removed from list of objects
   neighb.f     : prmem removed from comment as no longer needed
   on_subs.F    : bug in axb_build1 corrected due to listb references
   prmem.f      : removed as no longer used
   ranger.f     : prmem removed from list of external routines
   siesta.F     : extra MPI_Barrier added after final printmemory to
                : tidy parallel output
                : call to prmem removed as no longer used
   siesta.tex   : stress fixing documented
   version.f    : Version number incremented to 1.0.31
========================================================================
Version: 1.0.30
Date: 2000/05/16  01:30:00 GMT
Title: Removed single precision in recipes.f
Author: Jose M. Soler <jose.soler@uam.es>

Description:

A conversion to single precision, originally in the Numerical Recipes
routine four1, was removed. Apparently this was the main source of 
minor numerical discrepancies between different computers. 
Also, all constants were transformed from single to double precision.
The output files in siesta/Examples were also updated.

Files:
   recipes.f                   : Removed calls to SNGL
   Examples/H2O/Out/h2o.out    : Updated (with cefeo/osfdxml.make)
   Examples/H2O/Out/out.fdf    :    "
   Examples/H2O/OrderN/h2o.fdf :    "
   Examples/H2O/OrderN/out.fdf :    "
   Examples/SiH/Out/sih.fdf    :    "
   Examples/SiH/Out/out.fdf    :    "
   Examples/Fe/Out/Fe.fdf      :    "
   Examples/Fe/Out/out.fdf     :    "
   version.f                   : Updated version number and date
   Docs/siesta.tex             : Updated date
   Docs/CHANGES                : This entry
========================================================================
Version: 1.0.29
Date: 2000/05/01  13:00:00 GMT
Title: Band calculation bug fixes etc
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

A couple of problems concerned with band structure calculations
which were brought to light by one of Daniels students have been
fixed as well as a missing format descriptor from an error
message.

Files:
   atom.F       : missing "i4" output descriptor for error message 
                : added concerning insufficient L projectors
   bands.F      : mscell(3,3) declared locally and added to redcel call
                : references to nuo changed to nuotot in several places
                : as this was leading to incorrect output to the .bands
                : file
   ksv.F        : redcel removed from list of external routines
   version.f    : Version number incremented to 1.0.29
========================================================================
Version: 1.0.28
Date: 2000/04/28   17:00:00 GMT
Title: New compilation scheme. Reading from stdin. Matel fix.
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

For a number of reasons, the architecture support in the makefiles is
now implemented by including "arch.make" (that is, a fixed-name file,
instead of "$SIESTA_SYS.make"). All references to SIESTA_SYS have been
eliminated, so even if it is still in the environment nothing should be
messed up. A new makefile variable SIESTA_ARCH is used for identification
purposes.

Also, reinit now allows the FDF input to be read through standard
input, as in siesta < h2o.fdf. To support debugging sessions, siesta
will read from INPUT_DEBUG if this file exists (and warn about it).
NOTE: In some platforms, the siesta executable must reside in the same
directory as the files for things to work properly (this happens to
the parallel version in Linux).

A minor (cosmetic) fix to matel: some arrays did not need to be saved,
as they were deallocated upon exit.

Files:
   Docs/siesta.tex : Revamping and removal of obsolete sections.
   matel.f      : Array declarations.
   version.f    : Version number incremented to 1.0.28
   reinit.F     : Support for dual input.
   resize.F     : More graceful exit.
   Makefile     : arch.make support.
   Sys/*.make   : Some pruning of old files, updates.
   MPI/Makefile : arch.make support.
========================================================================
Version: 1.0.27
Date: 2000/04/12   4:00:00 GMT
Title: Spin polarisation corrections
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

Three bugs relating to spin polarised calculations have been fixed
as well as an issue relating to the use of a variable in atom.F
detected by a compiler.

Files:
   atom.F       : q renamed to qtmp in choverlp
   dhscf.F      : Dscf -> Dscf(1,ispin) in call to rhoofd
                : Hmat -> Hmat(1,ispin) in call to vmat
   siesta.F     : S(jo) -> S(ind) in calculation of qspin()
   version.f    : Version number incremented to 1.0.27
========================================================================
Version: 1.0.26
Date: 2000/03/30   9:30:00 GMT
Title: Slight fixes to timing and vibrations
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

As a result of running on the Cray with uninitialised variables set to 
NaN a few small possible problems were indentified for machines which
do not default to static memory. Also a few similar issues were found
in the course of testing parallel frequency calculations and have
been cleaned up.

Files:
In Src/
   ofc.f        : Reading of .FC file altered to avoid crash on Cray.
   siesta.F     : Tempion initialised to zero and printing for FC option
                : modified.
   timer.F      : Variables "count_rate" and "wt" saved between calls
                : in elap1.
   version.f    : Version number incremented to 1.0.26
In Util/Vibra/Vibra
   fcbuild.f    : Logical "overflow" initialised to false
   Makefile     : ARCH environment variable changed to SIESTA_SYS for
                : consistency with main program
   vibrator.f   : Logical "overflow" initialised to false
                : Variable "nk" initialised to zero
                : Call to outbands suppressed if nk = 0
                : Typo corrected - "Writting" -> "Writing"
   Sys/t3e.make : Make options for Cray T3E added
========================================================================
Version: 1.0.25
Date: 2000/03/29   8:30:00 GMT
Title: 
Author: Julian Gale <j.gale@ic.ac.uk>

Description:

There have been several major changes for this release :

(1) The array listh has now been distributed across the processors
(2) The storage format of the main sparse arrays, H, S, Dscf, listh etc
    has been changed to be more compact. Hence for any given spin these
    arrays are now 1-D instead of 2-D, thus eliminating the storage of
    any zeros (except the tolerance at the end of listh to avoid recalling
    hsparse). The start of any row, n, of the sparse matrix can now be found
    at "listhptr(n)+1".
(3) dhscf.F has been heavily modified to make it more modular. Hence it
    has largely been reduced to a series of subroutine calls which use
    routines from meshsubs.F and meshmatrix.F. All references to the
    density matrix in mesh-local stored form have been abstracted to a
    module so that it and its pointers are not directly seen at the dhscf
    level. Likewise the transformations from orbital to mesh-local storage
    via MPI have been localised in 2 subroutines so that the majority of
    high level mesh routines no longer call MPI.
(4) The dimension of the array within has been corrected to maxphi in all_phi
    as this can lead to floating point errors otherwise.
(5) The storage of phi has been re-ordered according to Jose's suggestion
    so that it is ordered by mesh points rather than orbitals. This has 
    led to the removal of the call to transp and some related arrays as
    the data is already in the transposed form. Similarly the
    calculation of Phi has been simplified (at the expensive of some
    potential CPU savings) leading to removal of options, such as SaveMemory.
(6) An extra check has been added to the mesh initialisation. For non-right
    angled unit cells there used to be the possibility that the mesh cut-off
    might not be greater than the requested value. A new check has been 
    added that guarantees that it will be satisfied by increasing NTM.
(7) The value of ncmax is now initialised to zero in iolwf if no file is
    found otherwise the value could be NaN and is then used to allocate
    memory in ordern leading to a memory error.
(8) Parallelisation of KSV added
(9) Bug in grdsam fixed - pt was not preserved between calls

Files:
   atmfuncs.F   : The dimension of "within" has been corrected to maxphi in all_phi
                : The default value of nzetmx has been increased to 3
   atom.F       : Calls to prmem removed as the memory is dynamically created.
   atomlwf.F    : Modified to allow for local nature of numh,listhptr,listh including
                : globalisation of numft which is now needed as a result
   bands.F      : Modified to allow for local nature of numh,listhptr,listh 
   cgwf.F       : Modified due to new sparse form of arrays
   chempot.F    : Modified due to new sparse form of arrays + loop conversion to f90
   denmat.F     : Modified due to new sparse form of arrays + local nature of storage
                : numh/listh/listhptr
   detover.f    : Re-named to detover.F as CPP options are present
   detover.F    : Modified due to new sparse form of arrays
                : Aux re-sized to nocc x nocc and parallelisation added
   dfscf.F      : Renamed to dfscf.f as all MPI calls have been removed
   dfscf.f      : Argument maxorb removed and Dscf/DscfL changed to new format
                : Internal logical Parallel introduced to handle choice of Dscf or DscfL
                : The gradients are now calculated using a call to all_phi for speed
   dhscf.F      : Globalisation of dipol(3) moved into dipole.F
                : Argument maxorb removed and Hmat/Dscf changed to new format
                : dipol(1:3) initialise to zero to avoid floating point crash in grdsam.F
                : for "bulk" case
   diag2g.F     : Modified due to new sparse form of arrays + loop conversion to f90
   diag2k.F     : Modified due to new sparse form of arrays + loop conversion to f90
   diagg.F      : Modified due to new sparse form of arrays + loop conversion to f90
   diagk.F      : Modified due to new sparse form of arrays + loop conversion to f90
   diagkp.F     : Modified to allow for local nature of numh,listhptr,listh
                : Globalisation of pointers to H and S added
   diagon.F     : Modified due to new sparse form of arrays 
   diagpol.f    : Modified due to new sparse form of arrays + loop conversion to f90
                : Modified to allow for parallel execution by changing the order of
                : referencing Haux/Saux and looping on the left by nuotot and on the
                : right by nuo.
   dipole.F     : Globalisation of dipole now in subroutine
   dynamics.F   : Contents of array "sold" now preserved between calls
   egandd.F     : Modified due to new sparse form of arrays + frstme variable removed
   ener3.F      : Modified due to new sparse form of arrays + local nature of storage
                : numh/listh/listhptr
   extrapol.F   : mm2/mnew changed to 2-D array of size (maxnh,nspin) + maxno->maxnh +
                : modifications to allow for the fact that the sparse indexing arrays
                : are now local only
   extrapolon.F : version of extrapol created for order(N) using the old sparse matrix form
                : as the format has yet to be changed in this section of the code
   gradient.F   : Modified due to new sparse form of listh + local nature of storage
                : numh/listh/listhptr
   grdsam.F     : Argument maxorb removed and Hmat/Dscf changed to new format + loops
                : changed to f90 form for compactness
                : Array pt preserved between calls as the contents are only read once
                : and dimensions corrected to 3 x (maxpt+1).
   hsparse.F    : Modified due to new sparse form of listh + local nature of storage
                : numh/listh/listhptr.
                : Trap for nuo = 0 added  for setting nlhmax
   idiag.f      : shared do loop termination removed
   initdm.F     : Dscf/Dold changed to 2-D array of size (maxnh,nspin) + maxno->maxnh +
                : listh now in 1-D form and a pointer to the start of the rows is added
                : and passed through to iodm.F
   iodm.F       : dm changed to 2-D array of size (maxnh,nspin) + maxno->maxnh
   iohs.F       : Format of saved H/S/xij changed to match new linear form
   iolwf.F      : ncmax initialised to 0 if found = .false.
   kinefsm.F    : Renamed to kinefsm.f as all MPI calls have been removed
   kinefsm.f    : Renamed kinefsm.F with Node and Nodes added to argument list
                : Dscf made into 2-D array and maxnd is equal to maxnh
   ksv.F        : Modified due to new sparse form of arrays and parallelisation.
                : Copy of psi into psiprev moved to detover/savepsi
   listsc.f     : Trivial typo - corrected in a comment
   Makefile     : new routines added to list and dependances on meshmatrix.F and meshsubs.F
   matel.f      : Calls to prmem removed as the memory is dynamically created.
   meshmatrix.F : A collection of a module that contains data for the matrix Dscf
                : stored locally with respect to the mesh rather than the orbitals
                : and two subroutines that transform forward and backwards between
                : the two local arrangements
   meshsubs.F   : A collection of subroutines that perform tasks on the mesh. The is a
                : composed of code that used to all be in dhscf.F but with changes to
                : the code that calculates the wavefunctions at the mesh points. This
                : part has been changed so that the data is ordered by mesh point and
                : simplified according to Jose's algorithm
   minvec.F     : shared do loop termination removed
   mulliken.F   : Modified due to new sparse form of arrays + local nature of storage
                : numh/listh/listhptr
   nlefsm.F     : Renamed to nlefsm.f as all MPI calls have been removed
   nlefsm.f     : Renamed nlefsm.F with Node and Nodes added to argument list
   on_subs.F    : Two versions of the subroutine axb_build have now been added
                : suffixed by 1 or 2. axb_build2 is the same as the old routine
                : whereas axb_build1 is a modified form to allow for the more
                : dense sparse storage algorithm used in the main part of the
                : code, but not yet in the ordern section.
   ordern.F     : Modified due to new sparse form of arrays and call to extrapol
                : replaced by call to extrapolon
   overfsm.F    : Renamed to overfsm.f as all MPI calls have been removed
   overfsm.f    : Renamed overfsm.F with Node and Nodes added to argument list
                : Escf made into 2-D array and maxnd is equal to maxnh
   phirphi.f    : Modified due to new sparse form of arrays and for parallel form.
                : nuotot, Node and Nodes added to argument list
   plcharge.f   : Renamed to plcharge.F as it now requires MPI use
   plcharge.F   : Created from plcharge.f but modified to reflect the new sparse
                : array indexing form and the fact that this information is local.
   pulayx.F     : Modified due to new sparse form of arrays + local nature of storage
                : numh/listh/listhptr
   redata.F     : Default value of MemoryScale has been changed to 1.0
   rhooda.f     : The accessing of data has been modified to reflect the fact that
                : quantities are now order by mesh points, leading to the removal
                : of some of the indexing arrays. Also the argument list has been 
                : shortened because a number of parameters are now in the "mesh" 
                : /"meshphi" modules.
   rhoofd.F     : Renamed to rhoofd.f as all MPI calls have been removed
   rhoofd.f     : Created from rhoofd.F and modified so that the much of the grid
                : related data is stored in modules rather than being passed as
                : arguments. The choice between Parallel and serial forms of use
                : Dscf is made internally now and the new sparse format is included.
   savepsi.F    : New routine to copy psi to psiprev in ksv.F while handling the
                : parallel distribution of data.
   siesta.F     : Sparse storage of H,H0,S,xijo,Dscf,Dscfsave changed to save memory
                : H,H0 and S now only allocated after first call to hsparse
                : Some loops converted to f90 form to condense code
                : Node and Nodes added to argument list of kinefsm/nlefsm/overfsm/
                :   xijorb
                : Commented out calls to prmem removed for tidyness
                : Variable nnomax has been removed.
                : The extra safety margin added to the length of listh has been
                : reduced to 5% from 10% - because the array is 1-D there should
                : less need for changes as variation betweens will now cancel
                : each other out partially.
   transp.f     : Deleted as it is no longer needed
   version.f    : version number incremented to 1.0.25
   vlist.F      : Removed to simplify dhscf.F as it was never called.
   vmat.F       : Renamed to vmat.f as all MPI calls have been removed
   vmat.f       : Created from vmat.F and modified so that the much of the grid
                : related data is stored in modules rather than being passed as
                : arguments. The choice between Parallel and serial forms of use
                : Vs is made internally now and the new sparse format is included.
   xijorb.F     : Renamed to xijorb.f as all MPI calls have been removed
   xijorb.f     : Renamed xijorb.F with Node and Nodes added to argument list
   xijorb.f     : xijo changed to 2-D array of size (3,maxnh) and nomax->maxnh
========================================================================
Version: 1.0.24b (version array not changed in program)
Date: 2000/03/28  11:00:00 GMT
Title: Minor cosmetic changes. Wall-time output
Authors: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

The timing routine now generates an extra file "WALLTIME" with
*elapsed* time. Added routines 'elap1' and 'timer1'.

Some minor changes to the FDF package, to remove output to unit 0 and
to improve the makefile. An extra routine fdf_inhibit, has been added
for future use.

Minor changes to MPI/Makefile to simplify the 'clean' procedure.

Files:

timer.F 
fdf/fdf.f
    fdf_mod.f
    makefile 
MPI/Makefile
========================================================================
Version: 1.0.24
Date: 2000/01/27  11:30:00 GMT
Title: Errors in siesta.F corrected
Author: Julian Gale <j.gale@ic.ac.uk>

Description:
   The first dimension of the array ebk has been corrected to nuotot
   instead of nuo in siesta.F, the dimension being passed to bands
   being adjusted accordingly, so that the parallel operation is
   correct. Also "bands" is now only called if nbk > 0 as there is
   no setup to be done within "bands".
Files:
   siesta.F
========================================================================
Version: 1.0.23
Date: 2000/01/27   9:30:00 GMT
Title: Error in allocation of ebk corrected in siesta.F
Author: Julian Gale <j.gale@ic.ac.uk>

Description:
   The array ebk in siesta.F was allocated within the check to see
if nbk was greater than maxbk. However, this only happened if nbk
> 1 leading to an error for a single K point. Allocation has now
been moved until after maxbk is known.

Files:
   siesta.F
========================================================================
Version: 1.0.22
Date: 2000/01/24  16:00:00 GMT
Title: Fixes to bands.F / dhscf.F / atom.F
Author: Julian Gale <j.gale@ic.ac.uk>

Description:
   A number of bugs have been uncovered and fixed as described below.
Files:
   atom.F    : in SPLIT a value of rphi was accessed where uninitialised
   bands.F   : the use of fdf for reading the BandLines was incorrect
             : and has been amended. Also, for simplicity and safety
             : a "band" module has been created containing a routine
             : "initbands" which initialises the data for bands and a
             : true call to "bands" which actually performs the band
             : structure calculation. This avoids the passing of
             : uninitialised data arrays during the initialisation
             : phase.
   dhscf.F   : the arrays used to store the previous calls atomic
             : coordinates failed to reflect the fact that the
             : supercell might increase in size for a variable cell
             : run with multiple K points. Hence now the sizes are
             : checked first and SAMEXA is set to false if the sizes
             : differ and the arrays are re-dimensioned. Also the
             : size of NeedDscfL has been corrected to NUO instead
             : of NORB, as has the referencing during DHSCF4 which
             : included redundant work for supercells.
   initdm.F  : the names of variables have been altered to reflect
             : the fact that the routine operates on just the unit
             : cell and not the supercell when addressing certain
             : indices. This is a purely cosmetic change for 
             : consistency with other parts of the program.
   siesta.F  : the calls to bands have been modified to reflect the
             : new form of initbands/bands. This has led to a cleaner
             : allocation of dynamic memory.
========================================================================
Version: 1.0.21
Date: 2000/01/11  10:30:00 GMT
Title: Fixes and cosmetic improvements to avoid compiler warnings
Author: Julian Gale <j.gale@ic.ac.uk>

Description:
   Two bugs have been fixed, namely the loss of constraint information
   in fixed.F due to deallocation of the arrays between calls and an
   uninitialised array access in "split" due to the wrong looping upper
   bound. Also cosmetic changes have been made to remove compiler
   warnings about features which do not strictly comply with the f90
   standard (deprecated features) for cleaner compilation on some
   machines.
Files:
   arw.F     : numbered do loops on executable line removed
   atom.F    : loop over 1->nrmax changed to 1->nrval to avoid floating
             : point error due to accessing an uninitialised array 
             : element
   detover.f : dcmplx -> cmplx / dimag -> aimag / dreal -> real
   dhscf.F   : shared do loop termination removed
   diagon.F  : ParallelOverK only set on first call now and saved
   dismin.f  : shared do loop termination removed
   egandd.F  : parameter "nc" no longer passed to ctrans1
   ener3.F   : commented dimensions of numhij corrected
   fixed.F   : arrays ctype / iac / xc allocated on first call and never
             : deallocated
   inver.f   : shared do loop termination removed
   linpack.F : dcmplx -> cmplx / dimag -> aimag / dreal -> real
   minvec.F  : shared do loop termination removed
   on_subs.F : parameter "nc" no longer used - array dimension set using
             : ncmin and ncmax
   pulayx.F  : shared do loop termination removed
========================================================================
Version: 1.0.20
Date: 2000/01/08  00:01:00 GMT
Title: Improved performance with DirectPhi option
Author: Jose M. Soler <jose.soler@uam.es>

Description:
   The performance with option DirectPhi, in which the orbitals are
   calculated 'on the fly' at grid points, has been improved by
   obtaining all the orbitals of one atom in a single call.
   Also, routines rhoofd and vmat have been slightly rewritten to
   avoid references to large global arrays within the inermost loop.
Files:
   atmfuncs.f : New routine all_phi
   rhoofd.F   : Calls all_phi instead of phiatm
   vmat.f     : Calls all_phi instead of phiatm
========================================================================
Version: 1.0.19
Date: 2000/01/04  13:00:00 GMT
Title: Correction to memory allocation in egandd.F
Authors: Julian Gale <j.gale@ic.ac.uk>

Description:
   Memory allocation in egandd.F didn't reflect the fact that the
   bands are distributed across the nodes for some arrays leading
   to unnecessarily large memory usage in parallel.
File:
   egandd.F
========================================================================
Version: 1.0.18 
Date: 2000/01/04   12:50:00 CET
Title: Bug fix in grid-cell sampling (improved mesh-cutoff convergence)
Author: Emilio.Artacho@uam.es

Description:
   Bug discovered by Daniel SP, forces where not adequately updated
File:
   grdsam.F (plus customary siesta.tex, CHANGES, version.f)
========================================================================
Version: 1.0.17
Date: 1999/12/19  12:30:00 GMT
Title: Fixes to ordern and vlist
Authors: Julian Gale <j.gale@ic.ac.uk>

Description:

A couple of bug fixes have been introduced :

(1) The array nindv was being passed from eandg to axb_build with
    the wrong size declaration on the second call. This led to an
    out of bounds error which showed up as a crash in iolwf for
    some runs. The arrays ind and nindv are now locally created
    in axb_build with the sizes needed for a given call to avoid
    any possible errors during calling.
(2) The list of arguments for vlist was inconsistent with the call
    from dhscf.F. The auxillary array parameters are now handled
    using local dynamic memory. This error was not really detected
    as vlist never seems to get called.

Files:

egandd.F  : ind and nindv have been removed
on_subs.F : ind and nindv are now locally allocated in axb_build
vlist.F   : MaxInd and ind removed from argument list and ind is now
          : dynamically allocated
========================================================================
Version: 1.0.16
Date: 1999/12/17   9:15:00 GMT
Title: Fixes to ordern/iolwf + supercell creation
Authors: Julian Gale <j.gale@ic.ac.uk>

Description:

A number of small changes have been made;

(1) There were errors in the handling of restarts for ordern
    calculations due to dynamic memory allocation which have
    been fixed.
(2) The use of listcold between ordern and extrapol was 
    inconsistent for parallel runs. listcold now only stores
    the lists for the local orbitals on the current node to
    save memory and make everything consistent with extrapol.
(3) The allocation of memory in SIESTA has been corrected for
    an error that occured when a supercell was built.
(4) The save attribute has been added to bcell in dhscf.F

Files:

dhscf.F  : bcell variable given save attribute
iolwf.F  : modifications made to reflect changes to new size
         : of listcold and dimension error for maxc trapped
         : so that new value can be returned as ncmax
ordern.F : listcold now dimensioned as (maxnc,maxoloc) to save
         : memory and for consistency in extrapol. Handling of
         : dynamic memory overflow in iolwf added.
siesta.F : allocation of arrays that depend on nua moved to handle
         : the fact that redata can change the value of nua for a
         : supercell calculation
========================================================================
Version: 1.0.15
Date: 1999/12/13  16:20:00 GMT
Title: Improvements to building behavior
Authors: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

A number of changes to improve compilation portability.

Files:

precision.f90:  Removed
precision.f  :  Added. It now uses fixed format, as the rest of the program.
Makefile     :  Better cleaning, and precision changes.
fdf/makefile :  fdf_mod.o is now added to the library.
Libs/lapack.f:  machine-constants routines segregated to machine.f.
Libs/machine.f: file to be compiled without optimization.
Libs/makefile:  added support for machine.o build.
MPI/Makefile :  moved '.generated' to 'generate'.
Sys/ibmp3.make and Sys/ibm.f: partial support for IBM machines (Emilio)

========================================================================
Version: 1.0.14
Date: 1999/12/01   9:15:00 GMT
Title: Memory leak checks + diagonalisation modification
Authors: Julian Gale <j.gale@ic.ac.uk>

Description:

This version contains 3 principal changes :

(1) To guard against memory leaks, the save attribute has been added
    to near all allocatable arrays so that the machine can detect
    when an array is attempted to be allocated having not been
    previous deallocated. As a result, a memory leak was found in
    outcoor.f on the array xap and has been fixed.
(2) It appears that most of the time a parallel diagonalisation can
    continue quite satisfactorily when SCALAPACK returns the warning
    about non-converged eigenvalues due to clustering without any
    effect on the results. Hence a new parameter MemoryScale has been
    introduced which is the scale factor by which the memory available
    to SCALAPACK is increased when TryMemoryIncrease is true. If this
    value is set equal to 1.0, instead of the default 1.5, then the
    SCF procedure continues without actually increasing the memory.
(3) The print out of memory information has now been modified to
    reflect the fact that the word lengths are different on a Cray
    and this is handled by a cpp directive at compile time. Hence the
    file memoryinfo.f has become memoryinfo.F

Files:

coceri.f     : save attribute added to allocatable arrays
detover.f    : save attribute added to allocatable arrays
diagpol.f    : save attribute added to allocatable arrays
matel.f      : save attribute added to allocatable arrays
numbvect.f   : save attribute added to allocatable arrays
ordvec.f     : save attribute added to allocatable arrays
outcoor.f    : save attribute added to allocatable arrays
               + memory leak fixed on xap
parse.f      : save attribute added to allocatable arrays
phirphi.f    : save attribute added to allocatable arrays
radfft.f     : save attribute added to allocatable arrays
ranger.f     : save attribute added to allocatable arrays
recipes.f    : save attribute added to allocatable arrays
reord.f      : save attribute added to allocatable arrays
shaper.f     : save attribute added to allocatable arrays
xc.f         : save attribute added to allocatable arrays
ylmylm.f     : save attribute added to allocatable arrays
atminit.F    : save attribute added to allocatable arrays
atomlwf.F    : save attribute added to allocatable arrays
bands.F      : save attribute added to allocatable arrays
cdiag.F      : ierror = -2 if TryMemoryIncrease = .true.
               and MemoryScale = 1.0
cgvc.F       : save attribute added to allocatable arrays
chempot.F    : save attribute added to allocatable arrays
diagk.F      : handling of ierror modified
diag2k.F     : handling of ierror modified
diagkp.F     : save attribute added to allocatable arrays
diagg.F      : handling of ierror modified
diag2g.F     : handling of ierror modified
diagon.F     : save attribute added to allocatable arrays
dynamics.F   : save attribute added to allocatable arrays
egandd.F     : save attribute added to allocatable arrays
extrapol.F   : save attribute added to allocatable arrays
fixed.F      : save attribute added to allocatable arrays
grdsam.F     : save attribute added to allocatable arrays
hsparse.F    : save attribute added to allocatable arrays
initdm.F     : save attribute added to allocatable arrays
iodm.F       : save attribute added to allocatable arrays
iolwf.F      : save attribute added to allocatable arrays
kinefsm.F    : save attribute added to allocatable arrays
ksv.F        : save attribute added to allocatable arrays
memoryinfo.F : handling of Cray word lengths added
mulliken.F   : save attribute added to allocatable arrays
nlefsm.F     : save attribute added to allocatable arrays
on_subs.F    : save attribute added to allocatable arrays
overfsm.F    : save attribute added to allocatable arrays
pulayx.F     : save attribute added to allocatable arrays
redata.F     : MemoryScale read in
rdiag.F      : ierror = -2 if TryMemoryIncrease = .true.
               and MemoryScale = 1.0
siesta.F     : save attribute added to allocatable arrays
xijorb.F     : save attribute added to allocatable arrays
========================================================================
Version: 1.0.13
Date: 1999/11/26  18:15:00 GMT
Title: Return to Main Trunk
Authors: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

The changes made to the code along the "merged" branch have been
merged back to the main trunk. A few cosmetic changes have also
been made. Note that it is not practical to include all the commit
messages pertaining to the merged branch again. For all practical purposes,
there is a "wall" between 0.12.19 (tagged 'fork') and 1.0.13. 

Files:

CHANGES:	It contains the description of the latest changes along
		the merged branch. For full details, see the log history
		in each file.
redbasis.f:	Removal of references to atom.h
atom.h:		Removal. (Note that some "hardwired" parameters remain
		in the atmfuncs module -- they will be dealt with in
		the future.)
========================================================================
Version: 1.0.12
Date: 1999/11/24  18:00:00 GMT
Title: Direct evaluation of phi added
Authors: Julian Gale <j.gale@ic.ac.uk>

Description:

An option has been added to calculate the value of the orbitals at
the mesh points on the fly to avoid the use of the PHI array in
DHSCF on lower routines. This allows a large saving in memory to
be made in some cases, with a penalty in CPU time. For very large
jobs it makes the difference between running and not running though
if memory is tight. Also an MPI barrier has been added in siesta.F
before the memory is printed to tidy up the output.

Files:

dfscf.F    : value of phi is now used from called to phiatm rather than C
dhscf.F    : DirectPhi option added
rhooda.f   : DirectPhi option added
rhoofd.F   : DirectPhi option added
siesta.F   : MPI barrier added before call to printmemory
vmat.F     : DirectPhi option added
siesta.ind : SaveMemory and DirectPhi options described
siesta.tex : SaveMemory and DirectPhi options described
========================================================================
Version: 1.0.11
Date: 1999/11/18  16:30:00 GMT
Title: Sys reorganization. Bugfix in atom.F. Misc cosmetic changes.
Authors: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

	* The Sys directory has been reorganized. Obsolete files have
 	been removed. A new file "nolibs.make" has been added to support
	systems without any libraries (this would be the equivalent of
	'unknown.make').
	* Bug fix in atom.F: The global variable Q was being inadvertently
	re-used in a subroutine. 
	* Fix to avoid interface errors (when checking enabled) in ranger.f
	* diagkp.F: Addition of a dummy routine so that some compilers do
	not complain of an empty file.

Files:

Makefile: Clarified the status of Sys.f files.
atom.F:   Bug fix.
diagkp.F: Addition of dummy routine.
diagon.F: fdf is now 'used'.
ranger.f: interface errors "corrected" (more needs to be done in the future)
Sys/*.make: Elimination of obsolete files and addition of new ones.

========================================================================
Version: 1.0.10
Date: 1999/11/17  17:00:00
Title: listsc and matel converted into modules
Authors: Jose M. Soler <jose.soler@uam.es> / Julian Gale (j.gale@ic.ac.uk)

Description:
  The clumsy ENTRY construction in listsc and matel was translated
  into fortran90 modules (JMS). Plus a number of small fixes for
  errors during compilation + runtime errors, primarily connected
  with the diagonalisation modifications. Also documentation
  modifications.

Files:
  Makefile  : declare listsc and matel as modules. 
  atom.F    : data statement converted into array declaration + 
            : nrcfile initialised
  dfscf.F   : use statement
  diagkp.F  : routine wrapped in preprocessor directive - for MPI only
  diagon.F  : diagkp declared as external
  diagpol.f : error flag for cdiag call added + handling
  hsparse.F : use statement
  kinefsm.F : use statement
  linpack.F : renamed from linpack.f
            : compiler directives added to handle precision of BLAS routines
            : dcabs1 renamed to sdcabs1 to avoid conflict with libraries
            : routines ending in "1" were removed as they were redundant
  listsc.f  : converted into module
  matel.f   : converted into module
  naefs.f   : use statement
  nlefsm.F  : use statement
  overfsm.F : use statement
  phirphi.f : use statement
  rhoofd.F  : use statement
  siesta.F  : use statement + lower limit of maxkb + initialisating Escf
  version.f : increased number
  vmat.F    : use statement
  fdf/makefile    : copying of module files now uses wildcard
  Docs/siesta.tex : version no. changed + parallel related options added
  Docs/siesta.ind : new options added with provisional page numbers
========================================================================
Version: 1.0.9
Date: 1999/11/16  19:00:00
Title: Ongoing cleanup of atomic routines. FDF module. LAPACK and BLAS
Author: Alberto Garcia

Description:

A number of unrelated changes.

* Systems without lapack and blas can now use source provided
  (use "cvs update -d" to pick up new directory Libs)
* Removed some blas routines from linpack (now duplicated in Libs/blas.f)
* Initialization of some variables (notably ends of arrays) in atom.F.
  Typically, the first element of arrays indexed over the radial
  coordinate was not initialized properly. They showed up as "initialized"
  in runs with checks enabled. This fix might improve the accord between
  runs with different number of processors.
* Use of "assigned" unit numbers for reading in atom.F and redbasis.f
  (Formerly an arbitrary "unit=1"  was used)
* Changed redbasis.F back to redbasis.f, as no MPI-specific code is left.
* Wrap of I/O in subroutine 'user' in atom.F. Rationalization of some of
  the reading. More work needs to be done.
* Be more careful about underflow in atom.F. A check has been added to
  avoid computation of exp(-big), where 'big' could be so large as to
  cause underflows (and some systems to stop). A configurable maximum
  value for 'big' (currently 60.d0) has been introduced.
* Fdf declarations are now in a module. Note that this is the simplest
  step one can take to bring fdf into a f90 "flavor". The only change
  to the code has been to introduce a private unit allocator. 
* The Makefile has been changed to support the new features. Also, the
  MPILIB mechanism has been slightly modified. It should now work
  on machines (such as the SGI) whose makes complained if MPILIB was
  empty (in serial mode).

Files:
 Makefile         
 bands.F          
 cgvc.F           
 dhscf.F          
 efield.F         
 fixed.F          
 grdsam.F         
 initdm.F         
 iocg.f           
 iodm.F           
 ioeig.f          
 iofa.f           
 iohs.F           
 iokp.f           
 iolwf.F          
 iomd.f           
 iorho.F          
 ioxv.F           
 kgridinit.F      
 ksv.F            
 linpack.f        
 ofc.f            
 outcoor.f        
 plcharge.f        
 pulayx.F          
 recoor.F          
 redata.F          
 redcel.F          
 reinit.F          
 repol.F           
 resize.F          
 siesta.F          
 version.f         
 fdf/ makefile     
 Libs/makefile
 Libs/lapack.f
 Libs/blas.f

========================================================================
Version: 1.0.8
Date: 1999/11/16  17:00:00
Title: Diagonalisation improvements and parallelisation over K points
Author: Julian Gale (j.gale@ic.ac.uk)

Description:

   The diagonalisation procedure has been slightly modified. So far
    many parallel diagonalisations have failed because of the memory
    being insufficient to separate clustered eigenvalues. The
    solution is obviously to provide more memory, which can be done
    using the "DiagMemory" option. However, it is not easy to know
    a priori how much extra memory is needed which leads to lots of
    job restarts from scratch. Hence, an option "TryMemoryIncrease"
    has been added to try to solve this problem internally to
    minimise the number of failing runs. The specific changes that
    have resulted are :

    (1) cdiag/rdiag now return an argument ierror which indicates the
        success or failure of diagonalisation. Ierror = 0 implies
        success, 1 implies fatal failure and -1 implies that failure
        was due to insufficient memory being available to separate
        clustered eigenvalues and that a repeat should be tried 
        with more memory.
    (2) the fdf option "TryMemoryIncrease" has been added with the
        default value ".true.". This implies that a parallel job
        will attempt to increase the memory available to diagonalisation
        by increasing "MemoryFactor" internally with the aim of
        achieving a successful diagonalisation without restarting
        the job externally
    (3) in routines that call cdiag/rdiag the ierror flag is now
        handled by calling "die" if there is a fatal error. If there
        was insufficient memory then the arrays are re-initialised
        and the diagonalisation repeated to see if it is successful
        - this only happens if TryMemoryIncrease is true.
    (4) For the case of multiple K points, nspin .le. 2, an
        option to parallelise over K points has been added in the
        new routine "diagkp" based on "diagk". This option gives
        good parallel performance for small unit cell metallic
        systems where the number of K points is much larger than
        the number of orbitals.
Files:
   Makefile
   cdiag.F
   diagg.F
   diag2g.F
   diagk.F
   diag2k.F
   diagkp.F
   diagon.F
   memoryinfo.f
   rdiag.F
   redata.F
   siesta.F
   version.f
========================================================================
Version: 1.0.7
Date: 1999/11/15  13:30:00
Title: KSV routines re-introduced for serial mode only + save attribute
Author: Julian Gale (j.gale@ic.ac.uk)

Description:
   Daniel's polarisation modifcations have now been introduced back
    into the merged version for SERIAL only execution at the 
    moment. There have been a few changes in the routines as well :

    (1) Dynamic memory has been introduced
    (2) KSV_pol has been split into an initialisation routine KSV_init
        that calculates just the dimensions needed and KSV_pol which
        does the actual calculation.
    (3) The code that performs the determinant calculation has been
        placed in a separate subroutine called linpack.f
    (4) The function dcabs1 in the Linpack routines has been modified
        to avoid a bug due to the optimising compiler on the Cray

    The "save" attribute has been added to allocatable arrays - this
    should help track down any memory leaks as an attempt to allocate
    an already allocated array from a previous call should result in
    an error. So far this has been done for the main routines where
    larger amounts of memory are allocated - should be extended to
    all arrays eventually.
    Also, in dhscf.F the maximum loop index in the calculation of X0
    prior to calling DIPOLE has been changed to NUA instead of NA
    otherwise the incorrect dipole moment is obtained.
Files:
   Makefile
   cdiag.F
   cellxc.F
   denmat.F
   detover.f
   dhscf.F
   diagpol.f
   ener3.F
   fft3d.F
   gradient.F
   iorho.F
   ksv.F
   ksvinit.f
   linpack.f
   ordern.F
   phirphi.f
   poison.F
   rdiag.F
   repol.F
   rhoofd.F
   siesta.F
   transp.f
   version.f
   vmat.F
========================================================================
Version: 1.0.6
Date: 1999/11/11  10:00:00
Title: Improved choice of default processorY value added
Author: Julian Gale (j.gale@ic.ac.uk)

Description:
   New features introduced for this version are :

    (1) Nearly all parameters that might be exceeded during a run have
        been replaced with dynamic memory. The remaining parameter
        statements are large to set run behaviour, rather than array
        sizes. Some array dimensioning parameters remain, but these
        related to numbers which are unlikely to change (such as the
        maximum angular moment possible for an orbital etc)
    (2) Variable declarations have been tidied up to produce fewer
        compiler warning concerning unused variables. This particularly
        applies to the scalar version
    (3) A small number of bug fixes, including initialisation of ql to
        zero to avoid a crash when semi-core states are present.
Files:
   coceri.f
   dot.f
   dnaefs.f
   naefs.f
   neighb.f
   ordvec.f
   outcoor.f
   parallel.f
   parse.f
   phirphi.f
   prmem.f
   radfft.f
   ranger.f
   recipes.f
   reord.f
   shaper.f
   version.f
   xc.f
   ylmylm.f
   atminit.F
   arw.F
   atomlwf.F
   bands.F
   cdiag.F
   cellxc.F
   cgvc.F
   chempot.F
   chkdim.F
   denmat.F
   dfscf.F
   dhscf.F
   diag2g.F
   diag2k.F
   diagk.F
   diagon.F
   dynamics.F
   efield.F
   egandd.F
   ener3.F
   fermid.F
   fft3d.F
   fixed.F
   gradient.F
   hsparse.F
   initdm.F
   iorho.F
   kgrid.F
   kgridinit.F
   kinefsm.F
   ksv.F
   mulliken.F
   nlefsm.F
   on_subs.F
   ordern.F
   overfsm.F
   pulayx.F
   redata.F
   rdiag.F
   redbasis.F
   rhoofd.F
   siesta.F
   timer.F
   vmat.F
   xijorb.F
========================================================================
Version: 1.0.5
Date: 1999/11/01  16:00:00
Title: Improved choice of default processorY value added
Author: Julian Gale (j.gale@ic.ac.uk)

Description:
   The program now chooses a default value of ProcessorY based on
    the total number of Nodes so that the processors are divided
    as evenly as possible in the two directions with the Y direction
    being the smaller factor. Currently only 2, 3 and 5 are used
    as possible factors. More could be easily added, but probably
    would be of limited use.
Files:
   siesta.F
   parallel.f
========================================================================
Version: 1.0.4
Date: 1999/10/28  13:00:00
Title: Input parameter to control workspace for diagonalisation added
Author: Julian Gale (j.gale@ic.ac.uk)

Description:
   A new input option "DiagMemory" has been introduced which allows
    the user to control how much workspace memory is made available
    to Scalapack. The memory that is given, the more likely it is
    that all eigenvalues will be converged as the separation of
    clustered values in this package is dependent on this. The
    default value is 2. A value of less than 1 will lead to failure!
Files:
   Makefile
   cdiag.F
   memoryinfo.f
   rdiag.F
   redata.F
========================================================================
Version: 1.0.3
Date: 1999/10/27   9:00:00
Title: Memory tracking added + minor bug fixes
Author: Julian Gale (j.gale@ic.ac.uk)

Description:
   In order to monitor the dynamic memory usage of SIESTA, a routine
    memory has been added which must be called everytime an array is
    allocated or deallocated. There is also a routine "printmemory"
    which can be called at anytime to output the peak memory use so
    far. Hopefully this should enable the detection of memory leaks
    and assist in determining whether a job fails to run due to lack
    of memory.
   Also a few minor bugs have been fixed where uninitialised variables
    were being accessed on restarting from an existing density matrix
    or from a conjugate gradients history file.
Files:
   Makefile
   siesta.F
   memory.F
   memoryinfo.f
   atminit.F
   atom.F
   atomlwf.F
   bands.F
   cdiag.F
   cellxc.F
   cgvc.F
   chempot.F
   denmat.F
   dhscf.F
   diagon.F
   dynamics.F
   egandd.F
   ener3.F
   extrapol.F
   fft3d.F
   gradient.F
   grdsam.F
   hsparse.F
   initdm.F
   iodm.F
   iolwf.F
   iorho.F
   kinefsm.F
   listsc.f
   matel.f
   mulliken.F
   nlefsm.F
   ofc.f
   on_subs.F
   ordern.F
   overfsm.F
   pulayx.F
   poison.F
   ranger.F 
   rdiag.F
   reord.f
   rhoofd.F
   transp.f
   vmat.F
========================================================================
************************************************************************
*********      OLD  (SERIAL ONLY) VERSION CHANGELOG    *****************
/////////      This version is kept in the cvs branch  /////////////////
/////////                    'siesta-0'                /////////////////   
************************************************************************
========================================================================
Version: 0.12.19
Date: 1999/09/4   05:00:00
Title: Minor change in subroutine redbasis and reKBblock
Author: Daniel Sanchez (daniel@roma.physics.uiuc.edu)

Description:
     Variable polorb included in the call of the subroutine 
     reKBblock 
File:
     redbasis.f
     redbasis_subs.f
=====================================================================
Version: 0.12.18
Date: 1999/08/12  23:00:00
Title: Minor changes to avoid compilation warnings
Author: Daniel Sanchez (daniel@roma.physics.uiuc.edu)

Description:
   Some minor changes in subroutines atom_subs.f, atom_functionss.f
    and KSV.f to try to eliminate some compilation warnings (reported
    by Pablo Ordejon) using Linux compiler 
Files:
   atom_subs.f
   atom_functions.f
   KSV.f
   Include/diagon.h : Value of the parameter maxhs set equal to 2.
========================================================================
Version: 0.12.17
Date: 1999/08/04  14:00:00
Title: Corrected bug in coceri.f
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Coordinate output for cerius (coceri.f) was wrong because of
  a transposition of the inverse matrix of lattice vectors (to get
  to fractional coordinates.

Files:
  coceri.f
  usual (CHANGES, version.h, siesta.tex)
========================================================================
Version: 0.12.16
Date: 1999/08/03  01:30:00
Title: Corrected bug in redbasis.f
Author: Daniel Sanchez (daniel@roma.physics.uiuc.edu)

Description:
  Variables semic and lsemic were not correctly initialized,
  this causes an error in hp machines.

Files:
  redbasis.f : Variables semic and lsemic are now initialized
========================================================================  
Version: 0.12.15
Date: 1999/08/02  19:30:00  
Title: Restored variable savevh (bug introduced in recent change)
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Somehow I introduced an 'amass' within the name savevh

Files:
  siesta.f : Restored declaration of variable savevh
========================================================================  
Version: 0.12.14
Date: 1999/07/30  02:45:00
Title: Double-z orbitals orthogonalized to inner states
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
    With the option "split", the double-z orbitals are 
    explicitely orthogonalized to the inner (semicore) 
    states. 
    Minor bug corrected in subroutine draw_basis
Files: 
       atom_subs.f
       version.h
       Docs/CHANGES
========================================================================
Version: 0.12.13
Date: 1999/07/29  08:30:00
Title: More general type of "semicore" states allowed.
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
    Several modifications in the atomic routines allow now
    for a more general type of "semicore"-like states in the
    calculations.
    For example, if the pseudopotential of Ti is generated
    from a ionic configuration 3s2 3p6 3d2, the program will
    understand that the readed pseudopotentials belong to the
    states 3s and 3p rather than to the states 4s and 4p.
    The program can handle a different (independent) basis set
    for the 3s and 4s shell (for example), generated using the
    standard techniques, but now the PAO corresponding to
    the 4s state will have one node.

    Another  difference is that now the basis set is generated
    using the same configuration (self-consistent density) used
    to generate the pseudopotentials ( previously the atom
    was neutralize by rescaling the charge density).


Files:
   initatom.f
   atom.f
   atom_subs.f
   atom_functions.f
   redbasis.f
   redbasis_subs.f
   mulliken.f
   plcharge.f
   version.h
   Util/Denchar/Src/redata.f
   Util/Denchar/Src/phiatm.f
   Src/Include/atom.h
   Docs/CHANGES
   Docs/siesta.tex
========================================================================
Version: 0.12.12
Date: 1999/07/26  20:30:00  
Title: listh array restricted to unit cell
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  The listh array, which frequently took most of the memory when using
  k-sampling, is now restricted to the unit cell, and recalculated on
  the fly outside it, using a faster algorithm.

Files:
  dfscf.f   : Call to listh for orbitals out of the unit cell
  hsparse.f : Call to listh0 to initialize listh function
  listh.f   : New algorithm. Now a function for a given orbital.
  rhoofd.f  : Call to listh for orbitals out of the unit cell
  siesta.f  : Dimension of listh reduced from supercell to unit cell
  vmat.f    : Call to listh for orbitals out of the unit cell
  Makefile  : listsc.o depends on siesta.h
========================================================================
Version: 0.12.11
Date: 1999/07/20  7:30:00
Title: Several KB projectors for each angular momentum
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
  Several new routines have been added to the files atom_subs.f
  and redbasis_subs.f to allow the use of several KB projectors
  for each angular momentum. The implementation follows the
  work by Blochl, PRB 41, 5414 (1990). 

Files:
  atom_subs.f: Several new routines
  redbasis_subs.f: New routine to read the block PS.KBprojectors
  redbasis.f:  Added a call to routine reKBblock, two new arguments
  atom.f: to new arguments in the call of this routine, 
          and some other changes
  initatom.f: Modified the calls to routines atom and redbasis.
  matel.f: New parameter mxzkb (max. number of KB projectors per l)
  nlefsm.f: Value of the parameter maxkba from 16 to 25.
  version.h
  Include/atom.h:New parameter nkbmx(max. number of KB projectors per l)
  Include/matel.h:New parameter mxzkb(max. number of KB projectors per l)
  Docs/siesta.tex
  Docs/CHANGES
========================================================================  
Version: 0.12.10
Date: 1999/07/13  14:15:00
Title: Plrho support for bonding wireframe
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  A new routine (platom) was added to read the XV file and draw a
wireframe of bonds connecting atoms. Since it is still rather primitive
and unstable, its call is commented out in plrho.

Files:
  platom.f : Bond-wireframe routine (new)
  plin3d.f : Plots a line in 3 dimensions (new)
  plrho.f  : Added call to platom (still commented out)
  plrho.h  : zbuff array added to common block
  pltr3d.f : zbuff array moved to common block
  ray.f    : Added eps to denominator to avoid division by zero
  plrho_guide.txt : Added brief explanation on platom
========================================================================
Version: 0.12.9
Date: 1999/07/13  14:00:00
Title: First call to overfsm moved out of SCF loop
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  In order to be able to make some post-processing calculations which
may require the overlap matrix, with MaxSCFiterations=0 (reading the 
converged density matrix), the first call to overfsm was moved before
the start of the SCF loop.

Files:
  siesta.f : First call to overfsm moved out of SCF loop
========================================================================
Version: 0.12.8
Date: 1999/07/2  5:00:00
Title: Small modifications on the routine KSV_pol
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
  Just adding an exit point if no calculation has been requested

Files:
  Src/KSV.f
  Docs/CHANGES
========================================================================
Version: 0.12.8
Date: 1999/07/1  7:00:00
Title: Some modifications on the routine KSV_pol
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
  Some small changes in the routine KSV_pol, which calculates 
  the electronic polarization. 

Files:
  Src/KSV.f New argument shape, and some minor modifications
  Src/siesta.f Calls to the routine KSV_pol modify for the new parameter
  Docs/CHANGES 
========================================================================
Version: 0.12.7
Date: 1999/06/30  1:00:00
Title: Electronic polarization calculation using the Berry phase method
       (and other minor changes) 
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description: 
  The calculation of the electronic polarization for bulk systems
  using the Berry phase approach of R.D.King-Smith and D.Vanderbilt 
  (PRB 47, 1651 (1993)). The calculation is slightly different than 
  the usual approach used within plane-waves calculatios, and 
  calculations using gaussian basis sets, due to the numerical 
  (arbitrary radial shape) character of the basis used in SIESTA. 
  The matrix elements of the position operator in the basis set is 
  used, instead of the plane-wave that appears in the initial 
  formulation of the method. This method can only be applied 
  to insulators.

  The calculation of this matrix elements is performed by matel 
  only when the calculation of the polarization is requested, to 
  avoid the allocation of the extra-memory (relatively big compare
  with which was usually used by matel) when it is not necessary.

  Other small modifications in the atomic routines:
   *When the basis set is generated from a charged atomic 
    configuration (this must be explicetely requested in the input,
    it is not related with the configuration used to generate the 
    pseudopotentials) a message is print by the subroutine atom.
   *Radius of the orbitals for cations are now different (shorter)  
    than those of the neutral atom. For anions they are calculated
    from the neutral atom.
   *Some changes in subroutine USER to avoid problems with 
    the interpolation of the orbitals (readed from the numerical 
    tables) near zero.

   Corrected a small bug in SIESTA: 
    Usually the coordinates are moved after the last self-consistent
    calculation of the density-matrix. These changed coordinates 
    are then inconsistent with the density-matrix and forces used
    to calculate the forces, virial, LDOS, files to plot density, 
    etc... I have corrected this by saving the last coordinates 
    for what the electronic structure is actually calculated, and 
    using these coordinates to perform all these final calculations.
   
Files 
  Src/detover.f, KSV.f, phirphi.f, diagpol.f, repol.f (new files)
  Src/atom_functions.f (added three new functions) 
  Src/matel.f (strongly modified)
  Src/siesta.f, matel.h, siesta.h (modified)
  Src/atom.f, atom_subs.f, siesta.f (slight modifications)
  Src/Makefile 
  customary siesta.tex, siesta.ind, version.h, CHANGES
======================================================================== 
Version: 0.12.6 [to 0.11.5 in rel-0-11-fixes branch]
Date: 1999/06/18 12:30:00
Title: BUG Fixed in iorho.f concerning formatted/unformatted reading
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  A formatted read was done for unformatted files and vice-versa.
  It DID NOT affect the normal working of siesta since it was always
  using an unformatted file, and compilers were wise enough to
  disregard the * format. (In that case, how did we find it? I
  don't know, ask Jorge Kohanoff).

Files:
  iorho.f and customary
========================================================================
Version: 0.12.6 [to 0.11.5 in rel-0-11-fixes branch]
Date: 1999/06/10 17:45:00
Title: BUG Fixed: save alat in outcoor.f (bug only for certain compilers)
Author: Emilio Artacho (emilio.artacho@uam.es)

Files:
  outcoor.f and customary
========================================================================
Version: 0.12.5 
Date: 1999/06/09 12:30:00
Title: Denchar utility: it provides now atomic coordinates in 2D-plot coors
Author: Javier Junquera (javier@polar.fmc.uam.es)

Description:
  The package provides the possibility of giving the coordinates
  of any atoms of the calculated system in the reference frame of
  the 2D plot (the third coordinate would correspond to the one
  perpendicular to the plane and is zero for atoms within the plane).
    The atoms wanted are specified by giving their indices as in the
  siesta run, in the fdf block 2D.AtomsInPlane .

Files (all in Util/Denchar):
  Src/atompla.f  (new)
  Src/denchar.f, planed.f, rhoofr.f, readpla.f, wrout.f, Makefile (modif)
  Docs/denchar.tex
  Examples/ (all modified)
  customary siesta.tex, version.h, CHANGES
========================================================================
0.12.4 = 0.11.4  released as 0.11.f1
========================================================================
Version: 0.12.4 [0.11.4 in rel-0-11-fixes branch]
Date: 1999/06/09 10:45:00
Title: Rounding off release: Examples update and matel.h
Author: Emilio Artacho (emilio.artacho@uam.es)

Files:
  Examples/*/Out/*  updated for latest version
  Include/matel.h   changed MAXR to 128 and MAXQ to 1024 for consistency
                    (1 before, and the compiler complained)
========================================================================
Version: 0.12.4 [0.11.4 in rel-0-11-fixes branch]
Date: 1999/06/08 16:00:00
Title: Fixed bug in vmat.f  
Author: Jose M. Soler (jose.soler@uam.es)

Description:
   It was introduced in 0.10.20, and affected only Gamma-point
   calculations with substantial overlap between equivalent orbitals
   from different cells. Fixed.

Files:
   vmat.f
   customary siesta.tex, version.h, CHANGES
========================================================================
Version: 0.12.3 [0.11.3 in rel-0-11-fixes branch]
Date: 1999/06/08 12:30:00
Title: Fixed bug in atomlwf.f
Author: Pablo Ordejon (ordejon@icmab.es)

Description:
   The number of electron is now passed from ordern.f to atomlwf.f
   This fixes problems when charged cells and Order-N are combined.
   Also, checks are done to avoid the use of Ordejon-Mauri functional
   with charged cells.

Files:
   ordern.f, atomlwf.f
   customary siesta.tex, version.h, CHANGES
========================================================================
Version: 0.12.2  (No PL change)
Date: 1999/06/04 16:30:00
Title: Minor cosmetic changes. New .make files
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:
 * Minor cosmetic change in siesta.f to avoid
   check bounds warnings or errors at compile
   time.
 * Re-structuring of matel.f to help some 
   compilers.
 * Changes to some of the Sys/*.make files. Addition
   of some more.

   (No user-visible changes.)

Files:
   siesta.f:
   matel.f: 
   Sys/
   g77.make: ranlib used by default (BSD compatibility)
   g77-libs.make: New file. Uses system BLAS and LAPACK.
   nag-f90.make, nag-f95.make, pgf77.make, pgf90.make: New files.
========================================================================
Version: 0.12.2 
Date: 1999/06/03 12:30:00
Title: Changes to fdf behavior. Use of io_assign
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:
 * When calling fdf_init with 'stdin' as input file,
   some systems complain about the impossibility of
   rewinding unit 5. The fix consists of creating 
   a scratch file FDF_STDIN and passing it to
   fdf_init.
 * fdf has been updated to avoid using standard
   input directly (same mechanism).
 * Call to io_assign in atom.f (instead of 
   opening and closing unit 12)

   (No user-visible changes.)

Files:
   redata.f: Modified to use FDF_STDIN.
   fdf/fdf.f: Now deals more robustly with stdin.
   atom.f:   Call to io_assign 
   Makefile: Explicit dependencies for fdf files.
   customary version.h, CHANGES
========================================================================
Version: 0.11.1 0.12.1
Date: 1999/06/02 19:20:00
Title: Fixed bug in rhoofd.f
Author: Jose M. Soler (jose.soler@uam.es)

Description:
   It was introduced in 0.10.20, and affected only Gamma-point
   calculations with substantial overlap between equivalent orbitals
   from different cells. Fixed.

Files:
   rhoofd.f
   customary siesta.tex, version.h, CHANGES
========================================================================
Version: 0.11.0 0.12.0
Date: 1999/05/26 12:00:00
Title: Fixed bug in siesta.f, iomd was called with idyn instead of varcel
Author: Emilio Artacho (emilio.artacho@uam.es)

Files:
   Src/siesta.f
   (plus customary)
========================================================================
Version: 0.11.0 0.12.0
Date: 1999/05/25 16:00:00
Title:  Bug fixes
Author: Pablo Ordejon (ordejon@icmab.es)

Files:
   Src/bands.f           Call to diagk corrected
   Src/redata.f          fs_dafault defined as logical
   Src/version.h, Docs/CHANGES    Usual changes
========================================================================
Version: 0.11.0 0.12.0
Date: 1999/05/17 21:00:00
Title: Option to calculate a fixed spin state
Author: Pablo Ordejon (ordejon@icmab.es)

Files:
   Src/fermispin.f       New. Calculates occupations with fixed spin
   Src/diagg.f           Calls fermispin if spin is fixed
   Src/diagk.f           Calls fermispin if spin is fixed
   Src/diagon.f          Pass fixed spin info to diag routines
   Src/redata.f          Read new variables FixSpin and TotalSpin
   Src/siesta.f          Changes for fixed spin calcs.
   Docs/CHANGES          Changes for fixed spin calcs.
   Docs/siesta.tex       Changes for fixed spin calcs.
   Docs/siesta.ind       Changes for fixed spin calcs.
   Docs/release.notes_0.11       Changes for fixed spin calcs.
========================================================================
Version: 0.11.0 0.12.0
Date: 1999/05/17 20:00:00
Title: Fixed bug in cgvc.f 
Author: Emilio Artacho (emilio.artacho@uam.es)

Files:
  cgvc.f : It was using inver.f for matrix inversion, not good
           changed for reclat
  version.h, CHANGES, siesta.tex as usual
========================================================================
Version: 0.11.0 0.12.0
Date: 1999/05/05 17:15:00
Title: Fixed bug in madelung (mulecule) + fixed dim enlargement
Author: Emilio Artacho (emilio.artacho@uam.es)

Files:
  madelung         : bug: it checked whether it was a mUlecule (fixed)
  rhoofd, vmat     : maxloc: 200 -> 300
  matel            : NQ: 512 -> 1024
  kinefsm, overfsm : nomax: 10000 -> 20000
  nlefsm           : maxna:   500 ->  1000
                     maxno:  1000 ->  2000
                     maxo:  10000 -> 20000
  hsparse, xijorb  : maxna:   500 ->  1000
                     maxnkb: 1000 ->  2000
                     maxo:  10000 -> 20000
  shaper           : maxna:   500 ->  1000
  initdm           : maxat:   500 ->  1000
========================================================================
Version: 0.12.0 <=> 0.11.0 <=> 0.10.32
========================================================================
Version: 0.10.32
Date: 1999/04/26 18:30:00
Title: Corrected a bug which produced too large values of NFFR in MATEL
Author: Jose M. Soler (jose.soler@uam.es)
 
Description:
  A bug in searching previously stored functions produced too large 
  tables of FFR, with the same function repeated  two times.
  Value IR=0 was also excluded from the comparison.
  After these changes, the dimension of FFR could even be reduced.

Files:
  matel.f : Bug corrected
  Docs/siesta.tex  : Removed the description of the now-solved problem
  Docs/siesta.ind    (correpondingly) 1999/04/27 10:45
  Include/constr.f : Updated as in Src (unrelated to matel)
========================================================================
Version: 0.10.31
Date: 1999/04/26 16:00:00
Title: Reorganization of Sys. New environment variable SIESTA_SYS
Author: Alberto Garcia <wdpgaara@lg.ehu.es>
 
Description:
  * New, deleted, and modified files in Sys.
  * The environmental variable determining system/compiler/library
    settings is now SIESTA_SYS, instead of ARCH.
  * Some additions to the manual section dealing with compilation.
  (Changed version number since SIESTA_SYS is a 'major' change)

Files:

  Src/Sys/
  sgi.make    : Now uses sgi.f.
  sgi.f       : Includes timing routine.
  sgimath.make: Now uses sgimath.f.
  sgimath.f   : New file.
  g77-libs.make : (New file) For g77 systems with -llapack and -lblas.
  freebsd.make: (Deleted) Use g77 or g77-libs instead.
  diag_lapack.f: (New file) Included by relevant .f files.
 
  Util/
  msiesta     : Added comments. Changed ARCH to SIESTA_SYS
  rrsiesta    : Added comments.

  Src/
  Makefile    : Changed ARCH to SIESTA_SYS
  
  Docs/
  siesta.tex  : Re-wrote section on compilation. Updated to 0.10.31
========================================================================
Version: 0.10.30
Date: 1999/04/23 12:30:00
Title: SGI system-dependent makefile options
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  Some problems with the mathematical library of SGI were found by
  Julian Gale for the diagonalization. Also, some compiler options
  had to be changed for some SGI's OS flavors.

Files:
  sgi.make    : No libraries, uses general.f, and some flags changed
  sgimath.make: The previous version, with old flags and the math library
========================================================================
Version: 0.10.30
Date: 1999/04/20 17:00:00
Title: Revision and actualization of examples
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Siesta examples are now:
   * H2O molecules as simplest, first contact. Plus ordern possibility.
     (unchanged, only updated)
   * Interstitial H in bulk Si, with a supercell of 64+1 atoms. SZ.
     Relaxation (40 Mb and 20 cefeo minutes).
   * bcc ferromagnetic bulk Fe, with GGA and partial core correction.
     Band structure and magnetic moment.
  Previous Si64 supercell example has been removed.
 
Files:
  Examples/H2O : h2o.fdf Out/h2o.out, out.fdf, siesta.size
           Fe  : analogous
           SiH : analogous plus sih.ANI (Xmol movie)
           Vps : Fe.inp and Fe.vps added
  Customary siesta.tex, version.h and CHANGES
========================================================================
Version: 0.10.29
Date: 1999/04/16 19:30:00
Title: sies2arc utility
Author: Julian Gale (j.gale@ic.ac.uk)

Description:
  Utility for extracting the coordinates from a SIESTA output file and 
  converting them into an arc file Movie for Cerius2/InsightII.

Files:
  Util/sies2arc/sies2arc.f  main program
                linepro.f   parses input lines
                wtof.f      converts word to a floating point number
                cell.f      converts cell parameters to cell vectors
                constants   contains fundamental constants
========================================================================
Version: 0.10.29
Date: 1999/04/14 21:45:00
Title: Cosmetics in redata + printing Max constrained forces
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Files:
  siesta.f, redata.f, siesta.tex, version.h, CHANGES
========================================================================
Version: 0.10.29
Date: 1999/04/13 19:00:00
Title: Changes in scripts + manual
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  Hopefully last changes for 0.11:
  - Scripts (msiesta etc) to avoid compilation of atom.f and related
    everytime
  - Manual: revision of explanations of scripts, and other details
  - Options Ang and Bohr as synonims of NotScaledCartesianAng etc.
  - Slight changes in siesta.f, outcoor.f, pulayx.f to avoid multiple
    fdf reading.

Files:
  msiesta, rsiesta, rrsiesta, qsiesta, qrrsiesta
  siesta.f, outcoor.f, recoor.f, pulayx.f
  siesta.tex, siesta.ind, CHANGES, version.h
========================================================================
Version: 0.10.28
Date: 1999/04/13 13:15:00
Title: Output: append in MD files + various in manual and siesta.f
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  - MD history files are now accumulative for different runs (so that 
    a restart of rrsiesta does not leaves us with a stupid face).
  - If coordinates are not written to standard output, they are by
    default accumulated in XMol format in file.ANI
  - Output of max constrained force in standard output
  - Manual describes it, plus inclusion of cond-mat ref ICSSS.

Files:
  pixmol.f iomd.f : accumulative (incorporates winding to end with
                    routines windu and windf in iomd.f)
  siesta.f : ANI default and writing constrained max force
  siesta.tex siesta.ind : manual
  CHANGES, version.h
========================================================================
Version: 0.10.28
Date: 1999/04/09 19:45:00
Title: Variable cell CG optimization
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  Variable cell CG optimization activated and described in the manual.
  See MD.VariableCell. It allows external pressure and non-hydrostatic
  stresses.

Files:
  cgvc.f : activated variable cell (before was shortcut)
  redata.f : changed some names and defaults.
  siesta.tex, siesta.ind
  Customary version.h, CHANGES
========================================================================
Version: 0.10.27
Date: 1999/04/08 15:40:00
Title: Minimal description of partial-core included in atom's User.Guide
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Files:
  Pseudo/atom/Docs/User.guide
========================================================================
Version: 0.10.27
Date: 1999/04/08 13:00:00
Title: EIG2DOS utility for DOS & acknowl in manual & coceri to Ang
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Files:
  Util/eig2dos.f
  Docs/siesta.tex, siesta.ind
  coceri.f : output for cerius has now lattice parameters in Ang.
  Customary version.h, CHANGES
========================================================================
Version: 0.10.27
Date: 1999/03/11 20:30:00
Title: Capability for charged systems, and minor corrections
Author: P. Ordejon (ordejon@condmat01.geol.uniovi.es)
 
Description:
  The capability to deal with charged systems is implemented.
  For atoms and molecules, the energy is corrected with
  a standard Madeliung term, for faster convergence vs cell size.

  Also, some minor changes in some routines have been made, 
  to avoid compilation warning due to non-initialized or
  not used variables.

Files:
  Src/Makefile       
  Src/atomlwf.f     Corrections to avoid compilation warnings 
  Src/bands.f       Corrections to avoid compilation warnings 
  Src/chempot.f     Corrections to avoid compilation warnings 
  Src/madelung.f    New file. Calculates Madelung correction
  Src/mulliken.f    Corrections to avoid compilation warnings 
  Src/ordern.f      Corrections to avoid compilation warnings 
  Src/propor.f      Corrections to avoid compilation warnings 
  Src/siesta.f      Changes to allow for charged systems
  Src/redata.f      Introduce new variable (NetCharge) for charged systems
  Src/typecell.f    New file. Identifies SC, FCC and BCC cells
  Src/version.h       
  Src/Sys/cdiag_general.f
                    Corrections to avoid compilation warnings
  Src/Sys/rdiag_general.f
                    Corrections to avoid compilation warnings
  Docs/CHANGES      This file
  Docs/siesta.ind   Index for 0.10.27 version
  Docs/siesta.tex   Manual for 0.10.27 version
========================================================================
Version: 0.10.26
Date: 1999/03/05 14:30:00
Title: Description of output files of atomic program in User.Guide
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  The contents of the different files generated by Alberto's atomic
  program are described in his User.Guide file.

Flies:
  Pseudo/atom/Docs/User.Guide
========================================================================
Version: 0.10.26
Date: 1999/03/04 17:20:00
Title: Re-introduced arguments listC and endC in rhoofd and vmat
Author: Jose M. Soler (jose.soler@uam.es)
 
Description:
  Although unused in the present version, arguments listC and endC
  are used in a special version of J.Junquera to save memory with
  k-sampling. Also changed the dimensions of some arrays to avoid
  compilation warnings.
 
Files:
  dhscf.f  : Calls to rhoofd and vmat
  minvec.f : New array iaux
  neighb.f : Dimension of iamove
  ranger.f : Dimension of iamove
  rhoofd.f : Restored arguments listC, endC
  vmat.f   : Restored arguments listC, endC
  xc.f     : Dimensions of ds and vxunif in pbxc
========================================================================
Version: 0.10.26
Date: 1999/03/02 01:31:00 (local time at Oviedo)
Title: Change definition of variables in ordern.f
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Variables g and hg, which were defined as real*8 in ordern.f,
  are changed to real*4, to concord with their definition
  in cgwf.f (which is called by ordern.f).
  This change does not affect the results, but saves a
  little bit of memory.

Files:
  Src/ordern.f:   change definition of variables g and hg to real*4
  Src/version.h:  version 0.10.26
  Docs/CHANGES:   describe changes.
========================================================================
Version: 0.10.26
Date: 1999/02/28 20:15:00 (local time at Oviedo)
Title: Package VIBRA to compute phonons.
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description: 
  Package VIBRA to compute phonon frequencies and
  normal modes has been incorporated into the SIESTA
  distribution.  Changes in Siesta to compute the
  force constant matrix (used by VIBRA) have also
  been introduced, as a new MD option (to displace
  atoms one by one and compute the force constants)

Files:
  Util/Vibra:      New directory, with VIBRA sources, docs and examples
  Util/README:     List new packages
  Src/siesta.f:    Modified to compute the force constant matrix
  Src/ofc.f:       New file. Writes the force constant matrix to a file
  Src/redata.f:    Modified to read new dynamics variables
  Src/Makefile:    Modified to include ofc.f
  Src/version.h:   Tag version 0.10.26
  Docs/siesta.tex: Description of new variables
  Docs/siesta.ind: Update of index
  Docs/CHANGES:    Describe changes
========================================================================
Version: 0.10.25
Date: 1999/02/27 14:30:00 (local time at Oviedo)
Title: Incorporate O(N) automatic calculation of Chemical Potential 
       and correct bug in former siesta.f commit.
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  The automatic estimate of the Chemical Potential, in Order-N
  operation, is now incorporated in the Order-N routines.
  The estimate is done by the projection method of Goedecker,
  (PRB 51, 9455 (1995)), modified for non-orthogonal basis like 
  proposed by Stephan et al. (PRB 57, 6391 (1998), PRB 58, 13472
  (1998)).  
  Also, a small bug in the last siesta.f version was
  fixed (ns elliminated from call to ordern.f).

Files:
  chempot.f:         New file
  ordern.f:          Modified to call chempot.f
  redata.f:          Modified to read Chemical Potential related information
  siesta.f:          Modified to include calculation of Chemical Potential,
                     and small bug fixed (ellimination of ns from call to 
                     ordern)
  version.h:         Tag version 0.10.25
  Include/ordern.h:  Modified to include maxnh in the parameters list.
  Docs/siesta.tex    Description of new variables
  Docs/siesta.ind    Update of index
  Docs/CHANGES       Describe changes
========================================================================
Version: 0.10.24
Date: 1999/02/26 15:45:00 MET
Title: Various structural and cosmetic changes
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

Structural changes:

* .h files now reside in Src/Include, and need to be copied to the Src
directory before the first compilation. (Manual updated)

* System-dependent code now resides completely in Sys. Some files
(e.g., cdiag_general.f, rdiag_general.f, poison_general.f) have been
created from their counterparts in Src, and the latter removed. File
inclusion in architecture-dependent files is now kept to just one
level.

* Removed Sys/osf.f. Its functionality was identical to bsd.f
* Added g77.make and modified freebsd.make in Sys.	

* Makefile updated to include support for plusFORT-style checks and
to remove an spurious mention to cdiag.

Code changes:

* Array config in atm_pot dimensioned to (0:4) instead of (0:3)
* Some variables should be arrays in ggaxc and pbexc (fixed)

* (Daniel Sanchez-Portal) Various fixes in atomic routines.

* Gave explicit lenghts to "x" output descriptors and 
Hollerith variables.

* Removal of unused variables (too many files to list).

* Removal of unused arguments:

	Pulayx : listd
	Rhoofd : listc, endc
	Vmat   : listc, endc
	Polarization: b
	Initguess, cspa: ns

* Expansion of TABs in some files (tabs could cause problems with
some compilers).
========================================================================
Version: 0.10.23
Date: 1999/02/25 23:45:00
Title: Bug corrected in plcharge.f and DENCHAR 
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
    Program DENCHAR used an obsolote version of the atomic 
    subroutines. In fact, the version used was obsolete even 
    the first time that the program was added to the SIESTA 
    program. I doubt that the program had ever properly run, 
    due to this mismatch in versions.
    By passing I added a couple of format statements in some
    write sentences in the routines grid2d.f and rhoofr.f 

Files:
   plcharge.f (in SIESTA)
   redata.f, phiatm.f, rhoofr.f (in DENCHAR).
   grid2d.f (in Contour)
========================================================================
Version: 0.10.23
Date: 1999/02/24 24:00:00
Title: Bug corrected in atom_subs.f
Author: Daniel Sanchez-Portal (daniel@roma.physics.uiuc.edu)

Description:
   Bug corrected in atom_subs.f. In the previous versions
   the variable norb in the routine atm_pop was not initialized.
   Dimesions for the arrays in subroutines polarization and rc_vs_e
   are now provided by the file atom.h
   Minor semi-cosmetic changes in atom_subs.f atom.f and atom_functions.f

Files:
  atom_subs.f, atom.f, atom_functions.f
========================================================================
Version: 0.10.23
Date: 1999/02/21 22:05:00
Title: Conjugate gradient continuation file and flag
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  The conjugate gradient relaxation is no longer controlled by siesta
  but by cgvc. It stores auxiliary CG arrays in file belovedsystem.CG .
  Restarting with MD.UseSaveCG and MD.UseSaveXV and the .CG and .XV
  files from a previously interrupted CG relaxation, allows a smooth
  continuation of it. An irrelevant bug has been corrected.
    It is prepared for variable cell relaxation. In fact the code is
  there, ready, just called by MD.VariableCell true, but I am not still
  sure whether there is a bug in it, and I have disabled it 
  provisionally.

Files:
  cgvc.f, iocg.f : new
  siesta.f, redata.f, Makefile
  siesta.tex, siesta.ind, version.h, CHANGES
========================================================================
Version: 0.10.23
Date: 1999/02/21 18:15:00
Title: Introduction of k-sampling artillery into MD for variable cell
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  the calls within siesta prior to the MD cycle, related to k-sampling
  (kgrid, superc, etc) havev been introduced within for variabel cell
  MD, in which such things have to be recalculated.

Files:
  siesta.f, iomd.f
  CHANGES, siesta.tex version.h
=======================================================================
Version: 0.10.22
Date: 1999/02/21 17:15:00
Title: Description in the manual of previous changes; ibmesslp3.make; 
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  Actualization of siesta.tex with the new output features.
  New Sys file; ibmesslp3, adapted to the Power3 processor at Lyon

Files;
  siesta.tex, siesta.ind
  CHANGES, version.h
  Sys/ibmesslp3.make
========================================================================
Version: 0.10.22
Date: 1999/02/21 1:15:00
Title: Substantial output change; Gnubands utility; 
Author: Emilio Artacho (emilio.artacho@uam.es)
 
Description:
  Output has been made flexibler by the addition of several flags
  for optional printing of some (typically long) pieces: forces,
  k-points, bands, eigenvalues, coordinates etc, can now be switched
  on and off independently. 
    The default is now NOT to print most of those. A general FDF flag 
  "LongOutput" has been devised for turning on the printing of most of 
  them at once. Some cosmetics has been added to the output.
    The initial atomic coordinates are now written after ioxv. Before
  the fdf coordinates were always written, independent of whether the
  XV file was read or not.
    Several new files are now generated, in some cases only if the
  information does not go to standard output. Others keep the history
  of MD simulations (one of them for Xmol animation).

    Utility program GNUBANDS reads from standard input the .bands
  file grnerated by SIESTA and writes in standard output in a format
  directly readablo by Gnuplot.

Files:
  Makefile, siesta.f, redata.f, outcoor.f, recoor.f : modified
  atom.f, atom_subs.f, bands.f, superx.f            : cosmetics
  iokp.f, iomd.f, iofa.f, ioeig.f, pixmol.f         : new
  Util/gnubands.f                                   : new
  version.h, CHANGES
  siesta.tex, siesta.ind
========================================================================
Version: 0.10.22
Date: 1999/02/21 1:15:00
Title: BUG FIXED in atomlwf.f
Author:  Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Program would crash on IBMs when dimensioning ordern subroutines.
  Alphas would behave strangely (ask for more dimensions after having
  been dimensioned) but not crash.

Files:
  atomlwf.f
========================================================================
Version: 0.10.21
Date: 1999/02/20 15:20:00
Title: Modifications mixing algorithms
Author:  Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Fixed errors of version 0.10.21.  
  Changed output of si64 example.

Files:
  Src/Makefile
  Src/pulayx.f
  Examples/Si64/Out/si64.out
  Examples/Si64/Out/out.fdf
  Examples/Si64/Out/siesta.size
========================================================================
Version: 0.10.21
Date: 1999/02/20 14:45:00
Title: Modifications mixing algorithms
Author:  Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  The Pulay mixing algorithms have been modified and improved,
  and some new imput variables related to the mixing have been introduced.
  The Pulay mixing is now done mixing parts of both the input and
  output matrices of former steps (whereas in the previous versions
  only input matrices were used). This allows to perform the
  Pulay mixing on EVERY SCF cycle.  The algorithm and use is described 
  in the user guide siesta.tex.
  New input variables are defined, to:
  1) Skip the Pulay mixing once in a while, and use linear mixing with
     a different alpha (suggested by G. Fabricius). New variables: 
     DM.NumberKick, DM.KickMixingWeight
  2) Define whether mixing is done in first SCF iteration (usually it
     should not be done, but can be useful for SCF restarts). 
     New variable: DM.MixSCF1
  Also, the mixing.f routine for linear mixing has been elliminated.
  Now, linear mixing is also done by pulayx.f
  
Files:
  Src/siesta.f:     Modifications for new variables, ellimination of
                    mixing.f and new behavior of pulayx.f
  Src/redata.f:     New mixing variables
  Src/pulay.f:      New algorithm for mixing
  Src/mixing.f:     SUPPRESSED
  Src/version.h:    new version
  Docs/siesta.tex:  new variables explained
  Docs/siesta.ind:  new version
========================================================================
Version: 0.10.20
Date: 1999/02/19 20:15:00
Title: New version of DENCHAR (0.1.1)
Author:  Javier Junquera (junquera@condmat01.geol.uniovi.es)

Description:
Changes to the input of charge, suggested by E. Artacho.
The names of the variables have been changed: all variable
names are added a '2D.' in the beginning of the variable name
(in order to distinguish variables proper of DENCHAR in fdf
input files) and some names have been reduced.
Also, the fdf input file is now dumped at the beginning
of the output.
Also, version number has been added, and will be maintained
and upgraded in future versions.

Files:
  Util/Denchar/Src:       Makefile:  New file (dropped somehow in past version)
                          denchar.f: Small input changes
                          iodm.f:    Small output changes
                          readpla.f: Small input changes
                          rhoofr.f:  Small input and output changes
                          wrout.f:   New file
  Util/Denchar/Examples:  AtomicIndex.fdf:   Removed
                          AtomicIndices.fdf: New (old AtomicIndex.fdf, modified
                                                  for now input variables)
                          ThreePoints.fdf:   modified for now input variables
                          TwoLines.fdf:      modified for now input variables
                          NormalVector.fdf:  modified for now input variables
  Util/Denchar/Docs:      denchar.tex:  New version manual.
========================================================================
Version: 0.10.20
Date: 1999/02/18 14:15:00
Title: Scalar rhoofd, vmat, triangular but not inverted
Author: Jose M. Soler (jose.soler@uam.es)
 
Description:
  After some checks on ibms, decs, and sgi, there was an important
  variability on architecture for the inverted loops in rhoofd and vmat.
  This version recovers old structure (suited for scalar) but 
  incorporates triangularizations that increase spped in a factor of 2
  compared with the old version.
 
Files:
  rhoofd.f, vmat.f
  version.h, siesta.tex, CHANGES
========================================================================
Version: 0.10.19 
Date: 1999/02/16 14:30:00
Title: Structure for vmat more efficient on some platforms
Author: Julian D. Gale (j.gale@ic.ac.uk)

Description:
  Analogous (to some extent) to rhoofd 

Files:
  vmat.f
  version.h, siesta.tex, CHANGES
========================================================================
Version: 0.10.19 
Date: 1999/02/4  12:45:00
Title: Structure for rhoofd more efficient on some platforms
Author: Julian D. Gale (j.gale@ic.ac.uk)

Description:
 *Triangular sum instead of whole square-matrix sum: it doubles speed
 *Inverted order in do-loops, for a better parallelisation

Files:
  rhoofd.f
  version.h, siesta.tex, CHANGES
========================================================================
Version: 0.10.18 
Date: 1999/01/31  19:15:00
Title: Bug fixed in atom + saving mixed DM + correcting spellings
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
 *DM is now saved after mixing and mixing is done even in last iteration!
  Useful for O(N) scf step by step, and for achieving convergence with 
  small mixings in different steps.
 *BUG FIXED: basis type = user had a wrong output format.
 *Misspellings corrected

Files:
  siesta.f, denmat.f: mixing and DM saving
  atom_subs.f: bug fix
  several for misspellings
  version.h, CHANGES 
========================================================================
Version: 0.10.18 
Date: 1999/01/31  11:45:00
Title: RCS Id label inclusion in every file of Src/ and Docs/ (fdf excl.)
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  A first line in every SIESTA file (in the Src and Docs directories)
  has been added with the RCS Id information which tells the version
  number of each file for developer and user information.
Note: It originally stores emilio in that line since I made the commit,
  but it does not mean anything on authorship nor responsilbility on the
  particular files. It will be changing to more adequate names with
  future changes.

Files:
  Src/ (incl. Include/ and Sys/, but not fdf/)
  Docs/
========================================================================
Version: 0.10.18 
Date: 1999/01/19  10:00:00
Title: IBM-ESSL version of rdiag (continued)
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  include 'eispack.f', previously in cdiag.f has been moved also to 
  bsd.f, cray.f, general.f, ibm.f, and osf.f.

Files:
  Sys/bsd.f     : Added include '../eispack.f'
  Sys/cray.f    : Added include '../eispack.f'
  Sys/general.f : Added include '../eispack.f'
  Sys/ibm.f     : Added include '../eispack.f'
  Sys/osf.f     : Added include '../eispack.f'
========================================================================
Version: 0.10.18 
Date: 1999/01/18  18:30:00
Title: IBM-ESSL version of rdiag
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  A new version of rdiag, written by Jorge Kohanoff, which calls the
  IBM-ESSL library routine DSYGV, was added. Additionally, the line
  include 'eispack.f' in cdiag.f has been moved to ibmessl.f, which
  is the file actually compiled.

Files:
  Sys/ibmessl.f : Added new version of rdiag
                  Added include '../eispack.f'
  cdiag.f       : Removed include 'eispack.f'
========================================================================
Version: 0.10.17
Date: 1998/12/10  23:00:00
Title: Several fixes to dynamics subroutines.
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  This version patches several problems detected in the molecular
  dynamics routines:
  1) problems with natoms=1
  2) output of cell velocities for several variable cell shape 
     dynamics options
  3) error of reading of MD.BulkModulus variable (units included
     in the reading)
  Also, problems with DENCHAR program by J.Junquera are fixed
Files:
  Src/siesta.f   : Calls to dynamics rutines: print out pressure.
  Src/redata.f   : Correct reading of MD.BulkModulus
  Src/dynamics.f : Correct bug for natoms=1
  Util/Denchar/Src/denchar.f  : fdf_init declared as external
  Util/Denchar/Src/colinear.f : Bug fixed
========================================================================
Version: 0.10.16
Date: 1998/12/02  16:00:00
Title: New utility DENCHAR for 2D charge density plotting 
       (Alternative to Contour by E. Artacho)
Author: Javier Junquera (junquera@condmat01.geol.uniovi.es)

Description:
  Utility to read the density matrix and other information generated by 
  SIESTA and generate 2D grids in arbitrary planes for 2D contour drawing. 
  The SIESTA package has been modified to dump the necessary information
  to new output files.  This package is an alternative to the program
  Coutour (By E. Artacho). 
  DENCHAR  allows to plot the charge in an arbitrary plane using 
  a grid of arbitrary fineness (independent of the grid used in SIESTA). 
  The total charge density, the spin components, the magnetization 
  (difference of charges of spin up and down) and the difference between 
  the selfconsistent charge and the sum of atomic densities can be plotted.
  DENCHAR uses FDF to read the data of the plane in which the contours
  are plotted, and some other information (like names of the density
  matrix and other output files from SIESTA).  A manual is provided,
  as well as a directory with examples.
  DENCHAR contains the FDF package from A. Garcia and J. Soler,
  and many routines from SIESTA.

Files: 
  Util/Denchar/Docs/denchar.tex            : NEW. user guide

  Util/Denchar/Examples/AtomicIndex.fdf  | 
  Util/Denchar/Examples/NormalVector.fdf | 
  Util/Denchar/Examples/TwoLines.fdf     |
  Util/Denchar/Examples/ThreePoints.fdf  | : NEW. example input files

  Util/Denchar/Src/Makefile              |
  Util/Denchar/Src/chkdim.f              |
  Util/Denchar/Src/colinear.f            |
  Util/Denchar/Src/denchar.f             |
  Util/Denchar/Src/dmna.f                |
  Util/Denchar/Src/dot.f                 |
  Util/Denchar/Src/fdf.f                 |
  Util/Denchar/Src/fdf.h                 |
  Util/Denchar/Src/fdfdefs.h             |
  Util/Denchar/Src/io.f                  |
  Util/Denchar/Src/iodm.f                |
  Util/Denchar/Src/length.f              |
  Util/Denchar/Src/matvect.f             |
  Util/Denchar/Src/neighb.f              |
  Util/Denchar/Src/paste.f               |
  Util/Denchar/Src/phiatm.f              |
  Util/Denchar/Src/planed.f              |
  Util/Denchar/Src/prmem.f               |
  Util/Denchar/Src/ranger.f              |
  Util/Denchar/Src/readpla.f             |
  Util/Denchar/Src/redata.f              |
  Util/Denchar/Src/rhoofr.f              |
  Util/Denchar/Src/rlylm.f               |
  Util/Denchar/Src/splint.f              |
  Util/Denchar/Src/volcel.f              | : NEW. code sources and makefiles
========================================================================
Version: 0.10.15 
Date: 1998/12/01  15:30:00
Title: Three bug corrections related with k-sampling
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  If bands were asked without k-sampling for energy, a conflict occurred
  between routines diagon and bands, which share common blocks. Argument
  gamma has been added to diagon, in order to ensure that it uses complex
  diagonalization (even only for gamma) when the bands routine is used.
  Also, an incorrect call to redcel in bands produced a core dump when
  using the option BandLinesScale=ReciprocalLatticeVectors.
  Finally, a bug in dhscf has been corrected, which produced an incorrect
  value of the dipole moment when k-sampling was used.
Files:
  bands.f  : Corrected call to redcell
  dhscf.f  : Corrected calculation of x0 before calling dipole
  diagon.f : Added argument gamma
  siesta.f : Call to diagon
========================================================================
Version: 0.10.14 
Date: 1998/11/23  17:30:00
Title: Placing imported routines in separated files
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Routines not written by us, which were scattered across many files,
  have been placed in separated files, for copyright reasons.
  Apropriate acknowledgements have been added in the manual.
Files:
  arw.f      : NEW. Contains routines bcorgn, bcrmax, cnfig, egofb, 
               lmxofz, numin, numout, nrmlzg,  polint, qvlofz, 
               vhrtre, yofe, previously in atom_subs.f:
  atom_subs.f: Routines bcorgn, bcrmax, cnfig, egofb, lmxofz,
               numin, numout, nrmlzg,  polint, qvlofz, 
               vhrtre, yofe, moved to arw.f
               Routines ratint, spline, splint moved to recipes.f
               Routines paste, pasteb moved to paste.f
  cft.f      : NEW. Contains routine cft, previously in poison.f
  cdiag.f    : Routines eisch1, tql2c, htribk moved to eispack.f
  eispack.f  : NEW. Contains eisch1, tql2c, htribk, previosly in cdiag.f
  four1.f    : SUPRESSED. Routine four1 now in recipes.f
  ordix.f    : SUPRESSED. Routine ordix now in recipes.f
  paste.f    : NEW. Contains routines paste, pasteb, previously in
               atom_subs.f
  poison.f   : Routine cft moved to file cft.f
  recipes.f  : NEW. Contains routines four1, ordix, ratint, splin, 
               spline, splint, splinu, previously in other files.
  splin.f    : SUPRESSED. Routines splin, splinu now in recipes.f
  Makefile   : Adapted to the changes above
  Docs/siesta.tex : New section of acknowledgements, plus some update
                    of the Projected Changes and Additions section
========================================================================
Version: 0.10.14
Date: 1998/11/17  21:15:00
Title: New utility: 2D contour plotting
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Utility to read 3D-grid functions information generated by SIESTA
  (.RHO, .DRHO, etc.) and generate 2D grids in arbitrary planes for
  2D contour drawing. It does not affect the rest of the SIESTA pack.

Files: 
  Util/Contour/grid2d.f          : the program
  Util/Contour/raw.in, noraw.in  : input examples
  Util/Contour/gnux11, gnups     : gnuplot use examples
  Util/Contour/README            : short explanation
========================================================================
Version: 0.10.14
Date: 1998/10/23  21:00:00
Title: Alphabetic index at the end of the manual (please check and keep)
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  An alphabetic index is added at the end of the manual. It is made by
  introducing \index{whatever} commands in the siesta.tex file, 
  running 'latex siesta', then 'makeindex siesta', and then 'latex
  siesta' again. 
Files:
  siesta.tex
  siesta.ind (index generated by makeindex)
========================================================================
Version: 0.10.14 
Date: 1998/10/23  18:30:00
Title: Bug corrections, mainly with k-sampling
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Parameters maxna and maxno were reduced to their minimun acceptable
    values (without margin for atom movements) when other parameters
    were changed, increasing the number of recompilations.
  Array conect in hsparse was incorrectly initialized with k-sampling.
  Array listno in listsc was written out-of-bounds when its dimension
    was too small.
Files:
  siesta.f  : avoid reducing maxna and maxno
  hsparse.f : corrected initialization of array conect
  listsc.f  : conditional writting of listno
========================================================================
Version: 0.10.13 
Date: 1998/10/18  14:00:00
Title: Plotting DeltaRho (Rho-Rho_atoms), msiesta, and manual revision *.h
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  New SaveDeltaRho FDF option to save the electronic density minus the
  sum of the atomic densities. File SystemLabel.DRHO
Files:
  dhscf.f:      Does the icalculating and calling to iorho (who writes).
                New argument at interface: fildrh, name of file to write.
  siesta.f:     Adapt to new dhscf.f interface and generate new name.
  grdsam.f:     Adapt to new dhscf.f interface.
  Util/msiesta: If init, cp *.h to working directory
  siesta.tex:   Documented + redocumenting .h files and generation.
  version.h and CHANGES
========================================================================
Version: 0.10.12 
Date: 1998/10/14  21:00:00
Title: One more optional input in block PAO.Basis
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Description:
      -Now variable PAO.BasisType can assume different values for 
       different species. New optional input in data block PAO.Basis
Files:
  atom.f         :
  atom_subs.f    : 
  redbasis_subs.f:  
  redbasis.f     : 
  initatom.f     :
  version.h      : Changed the date but not the number of last version,
                   which is still 0.10.12
  Docs/siesta.tex  : Added description of the new parameter
========================================================================
Version: 0.10.12 
Date: 1998/10/13  17:00:00
Title: BUG FIX  in siesta, atom_subs and redbasis_subs 
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Description:
     -New version of subroutine mulliken did not work properly because
      new arguments were not included in its call in main program
     -Corrected some bugs (lack of initialization for some variables)  
      in some subroutines from atom_subs.f, redbasis_subs.f (detected
      while runing in a Linux machine).
     -Corrected length of common blocks in atom_subs.f to avoid 
      errors in some compilers (detected while compiling in a  Linux
      machine).
      
Files:
  siesta.f       : Corrected call of subroutine mulliken
  atom_subs.f    : Bug fix
  redbasis_subs.f: Bug fix 
  version.h      : Changed the date but not the number of last version,
                   which is still 0.10.12
  Examples/H2O/Out : Updated outputs
  Examples/H2O/OrderN/Out : Updated outputs
  Examples/Si64/Out : Updated outputs
  Docs/siesta.tex  : Added description of the data block PAO.BasisSizes
========================================================================
Version: 0.10.12
Date: 1998/10/10  20:00:00
Title: BUG FIX in outcoor + New flag in outcoor + Cosmetics
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  - outcoor would generate wrong fractional coordinates because of a
    matrix transposition (fixed).
  - New 'WriteCoorStepNot' for not writing coordinates at each time step
  - Cosmetics for output in various files.
  - Output formats in new atom-related: it should be '1x' instead of 'x'

Files:
  outcoor.f   : bug + flag
  mulliken.f  : formats to 1x
  matel.f     : cosmetics (Estee Lauder)
  redata.f    :   "
  atom.f      :   "
  atom_subs.f :   "
  siesta.tex  : new flag + some small changes
  version.h
========================================================================
Version: 0.10.11
Date: 1998/10/9  19:00:00
Title: New implementation of the subroutine atom, and more flexible input
       for the basis set 
Author: Daniel Sanchez-Portal(daniel@polar.fmc.uam.es)

Description:
  General restructuring of atom subroutine(s), cutting it to pieces,
  redefining functions for interface with SIESTA, and redefining the
  input for the basis, being now much more flexible.

  Semicore states (in a simple version) can be now introduced.

  A BUG was FIXED for perturbative polarization orbitals.

Files:

atom.f: 
  Strongly modified. The routine has been completely restructured. Different
  calculations (local pseudopot., basis set, neutral-potential, etc...) are now
  performed by different routines which are called by the 'main' routine atom.
  These new routines are included in the file atom_subs.f.
  Semicore states can be automatically included, though in a quite naive way.
atom_functions.f: 
  NEW. Include all the 'atom dependent' functions. Most of the old ones
 (phiatm, rcut, ...) have been modified, and new functions have been coded.
atom.h: 
  Type declaration for the parameters included in the file. Parameter 
  ntbmax increased to 500.
atomlwf.f: 
  subroutine atomlwf: lmax, lmaxs and nzls erased from the input
  subroutine initguess: lmax, lmaxs and nzls erased from the input, information
  now provided by functions lomaxfis and nztfl
atom_subs.f: 
  32 new subrotuines have been added. Fixed a BUG in the interpolation of
  polarization orbitals. As a consecuence, the contribution to the forces
  coming from this orbitals, in spite of being consitent with energy, show 
  an oscillatory behaviour which could worse the convergence with the grid 
  spacing.
  The effect could be more important only for H, or other elements having 
  'p' polarization orbitals.
chcore.f: 
  Deleted (now included in atom_functions.f)
dnaefs.f: 
  Argument izs removed, information now provided by izofis function
epskb.f : 
  Deleted (now included in atom_functions.f)
initatom.f: 
  Several arguments have been removed from the call to this routine.
  Included a call to subroutine redbasis (before calling subroutine atom).
  Checks for several dimensions have been deleted.
Makefile: 
  Added files: atom_functions.f, redbasis.f redbasis_subs.f
  Deleted files: chcore.f epskb.f phiatm.f psover.f rcore.f rcut.f uion.f
  All the deteled routines, together with other 'atom depedent' functions,
  now included in the file atom_functions.f
  File initatom.f now depends on dimensions in atom.h
matel.f : 
  Deleted arguments lmaxs, lmxkbs, maxls and nzls in subroutine matel0.
  The information is now provided by functions lomaxfis, lmxkbfis and nztfl.
mulliken.f : 
  Added arguments isa, iphorb and iaorb. Changes in the ouput
  format for the population analisys: Now a label with the
  symmetry of each orbital is also printed.
naefs.f: 
  Argument izs removed, information now provided by izofis function
ordern.f: 
  lmax, lmaxs and nzls erased from the input
outcoor.f:  
  Argument atm_label removed, information now provided by
phiatm.f : 
  Deleted (now included in atom_functions.f)
rcore.f :  
  Deleted (now included in atom_functions.f)
rcut.f  :  
  Deleted (now included in atom_functions.f)
redata.f :  
  Several arguments have been removed from the call to this routine.
  All the information about atomic orbitals, pseudopotentials and atomic
  masses is now read by subroutine redbasis called by subroutine initatom. 
  Default masses for floating Bessel functions set to 1.0d30 a.u.
  Dynamics type is always set to 'cg' if the system contains just one atom.
redbasis.f: 
  NEW. Reads the information about atomic orbitals, pseudopotentials and atomic
  masses. Called by subroutine initatom.
redbasis_subs.f: 
  NEW. This file include nine routines used by redbasis to read the input (fdf)
  file in several possible formats.
siesta.f : 
  Several arrays containing information about the chemical
  species and the basis set have been removed. Calls
  of routines redata, initatom, matel0,naefs, dnaefs, ordern,
  and outcoor have also been modified.
Include/atom.h:
  Type declaration for the parameters included in the file. Parameter
  ntbmax increased to 500.
Include/siesta.h : 
  Parameters maxl, maxos, maxs, maxzet have been suppressed.
Examples/H2O/Out : Updated outputs 
Examples/H2O/OrderN/Out : Updated outputs 
Examples/Si64/Out : Updated outputs
Docs/siesta.tex  : Updated basis set description
========================================================================
Version: 0.10.10 
Date: 1998/08/28  19:00:00
Title: Efficient k-sampling implementation
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  The need to use very large supercells, in order to do k-sampling,
  has been eliminated, making k-sampling efficient. Other canges are:
  - BUG corrected in dhscf => now finds more adjusted cutoffs.
  - Now k-sampling and bands are compatible with non-collinear spin
  - Suppressed automatic k-sampling when using SuperCell
  - Auxiliary arrays now shared by diagon and bands
  - Optimized matrix multiplication algorithm in diagon
  - Added LAPACK complex diagonalization routine for osfdxml systems
  - neighb initialized before each use
  - Suppressed writting the density matrix in denmat
  - Avoid decreasing array dimensions in ranger
  - Array xijo now dimensioned only when necessary

Files:
  Makefile  : Added routines diagg, diagk, diag2g, diag2k, digcel,
                             redcel, superc, and superx
              Suppressed routine diagnc
  atomlwf.f : Initialization of neighb done always
  bands.f   : Calls diagk and diag2k
              Auxiliary space shared with diagon trough common block
  denmat.f  : Suppressed writting the density matrix
  dfscf.f   : Added argument indxuo to add forces to atom in unit cell
  dhscf.f   : Calculate things only in the unit cell (many changes)
              Corrected a BUG to find the mesh cutoff for nonothorhombic cells
  dynamics.f: Corrected the name of the routines in error message
  diagnc.f  : SUPRESSED (now diag2g)
  diagg.f   : NEW. Diagonalization for gamma only
  diagk.f   : NEW. Diagonalization with k sampling
              Optimized matrix multiplication algorithm
  diag2g.f  : NEW. Same as diagg for non-collinear spin
  diag2k.f  : NEW. Same as diagk for non-collinear spin
  diagon.f  : Calls diagg, diagk, diag2g and diag2k to do the work
              Auxiliary space shared with bands trough common block
  diagon.h  : Suppressed maxspn. Added maxhs and maxpsi
  digcel.f  : NEW. Finds diagonal unit cell and supercell combination
  dnaefs.f  : Distiction of unit cell and supercell. neighb initialized
  grdsam.f  : Call to dhscf
  hsparse.f : Slight comment corrections (code not changed)
  initatom.f: Suppress repeated arguments
  iohs.f    : Array xij not written when only gamma point is used
  kgrid.f   : Suppressed automatic k-sampling for SuperCell use
  kinefsm.f : Distiction of unit cell and supercell. neighb initialized
  listsc.f  : NEW. Expands neighbour lists from unit cell to supercell
  naefs.f   : Distiction of unit cell and supercell. neighb initialized
  nlefsm.f  : Distiction of unit cell and supercell. neighb initialized
  overfsm.f : Distiction of unit cell and supercell. neighb initialized
  ranger.f  : Avoid decreasing array dimensions
  recoor.f  : Expand coordinates to supercell
  redata.f  : Supercell atomic coord. now done by new supcel routine
              Specified SuperCell now becomes operative unit cell
  redcel.f  : NEW. Reads the unit-cell/supercell vectors
  rhooda.f  : Added argument indxuo to work only within unit cell
  rhoofd.f  : Added argument indxuo to work only within unit cell
  siesta.f  : Calculate things only in the unit cell (many changes)
  siesta.h  : Suppressed parameter maxkba
              Added parameter maxxij to dimension array xijo
              Name of parameter dimaux changed to maxpul
  superc.f  : NEW. Finds the required supercell and expands arrays to it.
  superx.f  : NEW. Expands coordinates from unit cell to supercell.
  version.h : New version 0.10.10
  vmat.f    : Added argument indxuo to work only within unit cell
  vmb.f     : Return if nat=1
  xijorb.f  : Name of argument 'cell' changed to 'scell'.
  Include/siesta.h : Suppressed parameter maxkba
  Include/diagon.h : Suppressed maxspn. Added maxhs and maxpsi
  Sys/bsd.f     : cdiag added to system-dependent routines
  Sys/cray.f    : cdiag added to system-dependent routines
  Sys/general.f : cdiag added to system-dependent routines
  Sys/ibm.f     : cdiag added to system-dependent routines
  Sys/ibmessl.f : cdiag added to system-dependent routines
  Sys/osf.f     : cdiag added to system-dependent routines
  Sys/osfdxml.f : New version of cdiag to use LAPACK routine zhegv
  Sys/sgi.f     : cdiag added to system-dependent routines
  Docs/siesta.tex     : Updated k-sampling instructions
  Docs/siesta/CHANGES
  Examples/H2O/Out/*  : Updated outputs
  Examples/Si64/Out/* : Updated outputs
========================================================================
Version: 0.10.9 
Date: 1998/07/14  11:30:00
Title: Increased tolerance in shaper routine
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  In some cases, the system shape was incorrectly reported as bulk
  because the tolerance in routine linvec (1.e-10) was too small.

Files:
  shaper.f : Tolerance in routine linvec increased to 1.e-6
========================================================================
Version: 0.10.8 
Date: 1998/07/13  16:15:00
Title: Corrected calculation of local density of states
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  After previous change, LDOS was incorrectly calculated, because the
  hamiltonian was reinitialized but the dhscf part was not included
  before calling diagon to find the LDOS density matrix.

Files:
  siesta.f : Eliminate the reinitialization of H
========================================================================
Version: 0.10.7
Date: 1998/06/26  17:30:00
Title: Grid-cell sampling for accelerated grid convergence
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Sampling displacements of the system with respect to the grid
  across the grid cell is used to symmetrize energies, forces, stresses
  and dipoles. It allows a better convergence with grid cutoff by
  reducing the egg-box effect. The displacements are introduced 
  within the block GridCellSampling (see the manual)

Files:
  grdsam.f : new subroutine doing the sampling at the end of an SCF cycle
  siesta.f
  dhscf.f  : sampling is done by calling dhscf for each displacement
  Makefile
  siesta.tex
========================================================================
Version: 0.10.6  and  0.9.2
Date: 1998/06/22  21:45:00
Title: Corrected MAXL dimension in ylmexp. (SEVERE BUG for L>2)
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Due to an insuficient dimension, the overlap was incorrect for L>2,
  including the f Kleinman-Bylander operators.

Files:
  ylmexp.f : maxLM = maxL**2 changed to (maxL+1)**2
  ylmylm.f : Same correction
========================================================================
Version: 0.10.5
Date: 1998/06/22  21:45:00
Title: Corrected supercell hamiltonian symmetrization
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  The condition if (ncells .lt. 1) was incorrect, because ncells must
  be at least one. As a consecuence, no supercell symmetrization was
  done. Now it has been corrected to if (ncells .gt. 1)

Files:
  diagon.f : if (ncells .lt. 1) changed to if (ncells .gt. 1)
  Examples/Si64/Out/si64.out    : Updated output
  Examples/Si64/Out/out.fdf     : Updated output
  Examples/Si64/Out/siesta.size : Updated output
========================================================================
Version: 0.10.4
Title: Remove unused subroutine ylmr
Author: Jose M. Soler (jose.soler@uam.es)

Files:
  atom_subs.f : Subroutine ylmr removed
=======================================================================
Version: 0.10.3
Date: 1998/06/22  21:45:00
Title: No mixing in last iteration and when wmix=0
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  An unexpected behavior occurred when only one iteration was done,
  because in the first iteration, the whole new density matrix is
  taken, irrespective of the mixing weight (this is because the first
  density matrix is not idenpotent). Now, the mixing subroutines are 
  not called in the last iteration, even if it is also the first one.

Files:
  siesta.f : Conditions to call mixing and pulayx
========================================================================
Version: 0.10.2
Date: 1998/06/22  21:45:00
Title: Added non-collinear spin
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  In the non-collinear-spin density functional, spinor wavefunctions
  and 2x2 spin density matrices allow the spin to change direction
  at every point. Ref: T. Oda et al, PRL 80, 3622 (1998).
  Non-collinear-spin density matrix has 4 components (nspin=4).
  No k-sampling allowed in this version for non-collinear-spin.

Files:
  bands.f    : Return if nspin=4
  dfscf.f    : Free-atom and SCF contributions separated and initialized
  dhscf.f    : Handle the nspin=4 case
  diagnc.f   : (New) Eigenvalue problem in spinor space (doubled)
  diagnc.h   : (New) Dimension parameters for diagnc
  initdm.f   : Initialize the non-collinear-spin density matrix
  mulliken.f : Handle the nspin=4 case
  redata.f   : Read the NonCollinearSpin fdf label
  rdiag.f    : Word ERROR added in error message
  siesta.f   : Handle the nspin=4 case. Call diagnc
  xc.f       : Diagonalize the spin density matrix in routine ldaxc
  Makefile   : Add diagnc
  siesta.tex : Add NonCollinearSpin and modify DM.InitSpin options
========================================================================
Version: 0.10.1  and  0.9.1
Date: 1998/05/18  13:21:16
Title: msiesta not to find .h files in subdirectories
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:
  An unexpected behavior of msiesta was that it could find (and use
  to replace) .h files in subdirectories of the working directory.
  This was due to the use of 'find' by msiesta, now supressed.

Files:
  Util/msiesta : use of find supressed.
========================================================================
Version: 0.10.0 <=> 0.9.0 <=> 0.8.53
========================================================================
Version: 0.8.53
Date: 1998/05/5  21:30:00
Title: Revising script files + comment on them in the manual
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Script files qsiesta and qrrsiesta allow running in the absence of other
  scripts from the working directory.

  msiesta copies Include/ordern.h and Include/diagon.h in working directory
  if init.

  Manual has a comment on the convenience of "touch" *.h in a working
  directory if recompiling after some time (after other systems have been
  compiled.

Files:
  qsiesta, qrrsiesta, msiesta
  siesta.tex
========================================================================
Version: 0.8.52
Date: 1998/05/4  20:25:00
Title: Printing Qtot before DM normalization in O(N) solution
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Write Qtot before and after the DM renormalization, in O(N) calculations.
  This is usefull to bracket the value of eta.

Files:
  ordern.f       : Change the format of the printout of qtot
  denmat.f       : Write qtot before normalization
========================================================================
Version: 0.8.51 
Date: 1998/05/3  22:30:00
Title: Removing unused variables + adding parenthesis: Avoiding warnings
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  From the compilation of SIESTA 0.8.50 with g77 -Wall (linux), warnings
  concerning unused variables and ambiguous math expressions have been
  used for their correction. Unused variables have been removed and 
  parenthesis have been added to math expressions.

Files: (and variables removed)
  Sys/cray.f    : times (in cputim.f)
  Sys/ibm.f     : times (in cputim.f)
  Sys/ibmessl.f : i, j, np (in poison.f)
  Sys/osfdxml.f : i, j, np (in poison.f)
  atom.f        : loctype, namaux
  atom_subs.f   :
  bands.f       : ie
  bessph.f      :
  cdiag.f       :
  constr.f      : fz
  cputim.f      : times
  denmat.f      : iunit
  dhscf.f       : epsxc, qatm, qscf, ro, wspin
  diagon.f      : found
  efield.f      :
  fermid.f      :
  four1.f       :
  gradient.f    :
  hsparse.f     : kno, jno, ina
  idiag.f       :
  initatom.f    : il
  initdm.f      : fname
  iorho.f       : sname
  kgrid.f       :
  nlefsm.f      : kna
  ordvec.f      : jv 
  outcoor.f     : i, iunit, title
  overfsm.f     :
  poison.f      :
  prmem.f       : namety
  psover.f      : is
  radfft.f      :
  ranger.f      : drm, dxm, iv, ivx, nxlast, volmin
  rdiag.f       :
  redata.f      : alat_defect, smassr, iscale, flc
  reord.f       : iaux, j1, j2, j3
  rlylm.f       :
  siesta.f      : overflowna, pi
  splin.f       :
  vmat.f        : p0
  xc.f          : 
  xijorb.f      : kno, jno, ina
========================================================================
Version: 0.8.50 (continued, no code change but cosmetics)
Date: 1998/04/29  20:45:00
Title: Output cosmetics + adding E_KS output for each SCF loop end.
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Surface reflectivity and different light sources have been introduced.
  The illumination data may be specified in light.dat file.

Files:
  siesta.f  (E_KS writing + cosmetics)
  ordern.f  (output cosmetics)
  chkdim.f  (")
  cgwf.f    (")
  siesta.tex (Alberto added to front page of manual)
========================================================================
Version: 0.8.50
Date: 1998/04/15  16:00:00
Title: Variable illumination in plrho
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Surface reflectivity and different light sources have been introduced.
  The illumination data may be specified in light.dat file.

Files (all in siesta/Util/Plrho):
  ray.f     : New function, which returns a pixel light intensity (ray)
  pltr3d.f  : Call to ray
  plrho.f   : Added include 'ray.f' statement
  light.dat : New. Example of illumination data file
  plrho_guide.txt : Documentation of these changes
========================================================================
Version: 0.8.50
Date: 1998/04/15  16:00:00
Title: Printed Fermi energy
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Fermi energy re-printed after the eigenvalues

Files:
  siesta.f : Added a write line.
========================================================================
Version: 0.8.49
Date: 1998/04/14 21:40:00
Title: Reading atomic masses + cosmetics + fix bugs (linux.make, outcell)
Author: Emilio Artacho (Emilio.Artacho@uam.es)

Description:
  Atomic masses can be now read through an fdf block: AtomicMass.
  The species not included in the block assume standard value for the
  species. If block not present, standard values for all (as before).
   
  linux.make lacked RANLIB definition. Fixed.

  outcell.f wrote cell volume in wrong units. Fixed.

  Cosmetics: initatom does not write poems any more. And others.

Files:
   remass.f : new for mass reading
   redata.f : calls it plus cosmetics
   Makefile
   outcell.f: bug fixed
   initatom.f
   atom.f
   prversion.f
   siesta.tex
========================================================================
Version: 0.8.48
Date: 1998/04/04 17:15:00
Title: Temperature in output
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:

The temperature is writen on output for any MD flavour.
(Error corrected in if statement)

Files:
   siesta.f
========================================================================
Version: 0.8.48
Date: 1998/04/04 17:15:00
Title: Optimized memory for Order-N routines
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:

Redefined the dimension of several matrices in the Order-N routines,
which were oversized. The result is a reduction in executable size
for Order-N calculations. The reduction is related to the maxnhf 
parameter.

Files:
   denmat.f:   eliminate nhfmax parameter. sustitute by nfmax 
               in chcc and cscc matrices definitions
   egandd.f:   substitute maxnhf by maxnf in definition of f and fs
   gradient.f: eliminate nhfmax parameter. sustitute by nfmax 
               in f and fs matrices definitions
========================================================================
Version: 0.8.47
Date: 1998/03/25 13:00:00
Title: New Util scripts. Makefile extensions
Author: Alberto Garcia <wdpgaara@lg.ehu.es>

Description:

The scripts in Util have been rewritten using Bourne shell constructs. Only
minor changes in their functionality have been introduced (mostly more
robust warnings).

Added support for Cray and SGI machines. For the latter, a default
binary architecture -mips4 is assumed. Added a $(COMMENTS) symbol
to sgi.make (echoed in Makefile) to warn the user.

Files:
Directory Util: prdate, msiesta, rsiesta, rrsiesta, qsiesta, qrrsiesta
Directory Src/Sys: cray.f, cray.make, sgi.f, sgi.make: new files.
Directory Src: Makefile: Made 'nodebug' compilation the default.
                         Corrected outcoor entry. Echoed $(COMMENTS).
========================================================================
Version: 0.8.46
Date: 1998/03/18 13:45:00
Title: Suppressed an incorrect call to matel0
Author: Jose M. Soler (jose.soler@uam.es)

Description:
 Suppressed an extra call to matel0, which was inadvertently left in 
 siesta.f in last version.
 Variables I1=1 and I2=2 introduced in matel to avoid a compilation
 message with the -C option (array bounds check) 

Files:
 siesta.f
 matel.f
========================================================================
Version: 0.8.45
Date: 1998/03/16 16:32:00
Title:  Commentaries changed.  
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Subroutine initatom.f :
 Arrays rcls, contrf, lmaxs, lmxkbs, nzls 
 have to be considered as belonging to the output rather than to the 
 input of the routine. The commentary on the begining of the routine
 has been changed in that sense.
Subroutine atom.f :
 The same as initatom.f 

Subroutine r_vs_e and polarization:
 Some lines have been commented to avoid the 'uncontroled' ouput 
 that appered when the programme was run in some machines.

Files:
  initatom.f : Updated header commentaries
      atom.f : Updated header commentaries
 atom_subs.f : Some lines commented in routines r_vs_e and polarization
========================================================================
Version: 0.8.44
Date: 1998/03/13 13:30:00
Title: Optimized diagonalization
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Some loops for the generation of the density matrix from the 
  eigenvectors were interchanged, to improve memory access.
  New versions for rdiag and cdiag, using lapack routine dsygv
  of the DEC dxml library. 
  These changes reduce CPU time by more than 50% in many cases.

Files:
  diagon.f      : Exchanged some loops
  Sys/*.f       : Added include '../rdiag.f' sentence
  Sys/osfdxml.f : Added new rdiag version, calling a lapack routine
  Makefile      : Supressed rdiag
  Examples/H2O/Out/*    : Updated outputs
  Examples/H2O/OrderN/* : Updated outputs
  Examples/Si64/Out/*   : Updated outputs
========================================================================
Version: 0.8.44
Date: 1998/03/13 13:30:00
Title: Reorganized system-dependent versions
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  In order to handle more easly the system-dependent versions, the
  'general' (source code) versions are kept in the Src directory.
  The files Src/Sys/*.f, containing the system-dependent versions,
  now contain sentences like include '../poison.f', when necessary.

Files:
  Src/poison.f : (new) General version
  Src/cputim.f : (new) General version
  Src/Sys/*.f  : explicit source code of general versions substituted
                 by sentences like include '../poison.f'
========================================================================
Version: 0.8.44
Date: 1998/03/13 13:30:00
Title: Creation of matel.h
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Although the sizes of the arrays in routine matel are independent of
  system size, and neglegible for large systems, they were dimensioned
  for the largest systems (5 species with spd DZP) and they took most 
  of the memory for small systems. A new file matel.h, written by a
  new matel0 entry point in matel.f, was introduced to solve this,
  using the run-compile loop method.

Files:
  Include/matel.h : (new) basic dimension parameters for matel
  matel.h  : same as Include/matel.h
  matel.f  : new matel0 entry point
  siesta.f : call to matel0
========================================================================
Version: 0.8.44
Date: 1998/03/13 13:30:00
Title: Corrected decomposition of final energies
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  A missing term -Uatm in the ion-electron interaction energy, printed
  in the 'Final energy' output was added.
  Ecorrec was changed to eta*DQ (only the printed name).
  Ekinion was included in the final energy decomposition.
  
Files:
  siesta.f
========================================================================
Version: 0.8.43
Date: 1998/03/10 11:30:00
Title: Changed tolerace in routine livec
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Changed tolerace to 1.d-10 in routine livec, called by shaper,
  in order to solve a problem found by Pablo for a slab.
  
Files:
  shaper.f  : Parameter TOL of LIVEC changed to 1.D-10
========================================================================
Version: 0.8.42
Date: 1998/02/23 12:05:03
Title: Implemented Version string management
Author: Jose M. Soler (jose.soler@uam.es), 
        Alberto Garcia (wdpgaara@lg.ehu.es)

Description:
  The version of the code in use is written in version.h, and is
  printed in every siesta run. That version number is consistent
  with the one appearing on the manual front page, as well as the
  corresponding date. 
    Odd version numbers (like 0.9) are distribution releases, 
  with possible bug fixes: 0.9 fix 3.
    Even version numbers (like 0.10) are development versions, 
  which include new implementacions as patches: 0.10 pl 5
  (pl: patch level).

Files:
  version.h   : has version number stored within
  prversion.f : prints version
  siesta.f    : calling version files
  Makefile    : version file dependencies
========================================================================
Version: 0.8.41
Date: 1998/02/20 19:31:22
Title: Examples directory restructured
Author: Jose M. Soler (jose.soler@uam.es), 

Description:
  Two exmaples now: H2O and Si64. Both diagonalizing. 

Files: (within siesta/Examples/)
   Vps/        (pseudopotentials)
      README
      H.inp     
      O.inp
      Si.inp
      H.vps
      O.vps
      Si.vps
   H2O/
      h2o.fdf
      Out/
         h2o.out
         out.fdf
         siesta.size
   Si64/
      si64.fdf
      Out/
         si64.out
         out.fdf
         siesta.size
========================================================================
Version: 0.8.40
Date: 1998/02/20 14:37:00
Title: FIX: CG order-N minimization parameters
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
Changed minimization parameters to solve convergence problem
in order-N solution of H2O.

Files: 
  cgwf.f
========================================================================
Version: 0.8.39
Date: 1998/02/19 18:31:38
Title: Moving the executable in utility *siesta scripts 
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  The utility files for automatized running of siesta (msiesta, rsiesta,
  and qsiesta) have been slightly modified: the executable code siesta
  is moved to the working directory, so that different systems can run
  simultaneously without interfering, as long as the working directories
  are different.
  Simultaneous compilation is not advised.

  qrrsiesta has been added: it does recurrent run-recompile in batch
  queues (both this one and qsiesta are prepared for NQS batch system,
  available at least for DEC systems)

Files: (in Util/)
  rsiesta 
  msiesta
  qsiesta
  qrrsiesta : (new) equivalent to rrsiesta for NQS batch system
========================================================================
Version: 0.8.38
Date: 1998/02/19 17:02:22
Title: Printing of hostname and date/time transferred to script
Author: Jose M. Soler (jose.soler@uam.es),

Description:
  Date, time and hostname are printed in the output file at the
  beginning and the end of a siesta run. The prdate subroutine used
  to do it using system calls which demanded large amounts of extra
  memory. Now, that function has been transferred to a script (prdate)
  which is called by the rsiesta script. The original subroutine has
  been kept empty.

Files:
  prdate (in Util/) (new)
  rsiesta (in Util/)
  prdate.f : now empty, it does nothing, kept for possible future.
========================================================================
Version: 0.8.37
Date: 1998/02/19 17:02:22
Title: Dipole moment, now also calculated for chains and slabs
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Related to ExternalElectricField. Possibility of calculating 
dipole moment for chains and slabs, not only for molecules, as
long as it is normal to the direction(s) of repetition.

Files:
  dhscf.f
  dipole.f : (sign of dipole moment corrected)
========================================================================
Version: 0.8.36
Date: 1998/02/19 17:02:22
Title: Implemented constraints for dynamics/relaxations
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Fixes constraints to the change of atomic coordinates during
  geometry relaxation or molecular dynamics, usinf FDF data block
  GeometryConstraints. Allowed constraints are:
   -cellside: fixes the unit-cell side lengths to
              their initial values (not implemented yet).
   -cellangle: fixes the unit-cell angles to
               their initial values (not implemented yet).
   -position: fixes the positions of the specified atoms to
               their initial values.
   -center: fixes the center (mean position, not center of mass) of a 
            group of atoms to its initial value (not implemented yet).
   -rigid: fixes the relative positions of a group of atoms, without 
           restricting their displacement or rotation as a rigit unit
           (not implemented yet).
   -routine: Additionally, the user may write a problem-specific routine 
             called constr, which inputs the atomic forces and stress 
             tensor and outputs them orthogonalized to the constraints. 
  Example:
     %block GeometryConstraints
        cellside   c
        cellangle  alpha  beta  gamma
        position  from -1 to -10
        rigid  1  2
        center 1  2   0.0  0.0  1.0
        routine constr
     %endblock GeometryConstraints

Files:
  constr.f   : (new) User-written subroutine for constr-definition
               (also in Src/Include/ for hanling like .h files)
  fixed.f    : (new) Relaxation and dynamics with constrined forces
  siesta.f   : Calls fixed
  Makefile   : Added fixed.f and constr.f
  siesta.tex : Documented
========================================================================
Version: 0.8.35
Date: 1998/02/19 17:02:22
Title: Implemented ExternalElectricField
Author: Jose M. Soler (jose.soler@uam.es)

Description: 
  An external electric field can be applied to molecules,
  chains and slabs, using an FDF data block. Example:
      %block ExternalElectricField
        0.000  0.000  0.100  V/Ang
      %endblock ExternalElectricField
  The field must be perpendicular to bulk directions 
  (like those parallel to a slab), or otherwise siesta will
  automatically orthogonalize it (and print a warning).
  The field is applied using the real space grid of dhscf.
  The discontinuity of the potential is automatically 
  placed in the vacuum region, between repeated 
  molecules/chains/slabs.

Files:
  cross.f  : (new) Vector poduct (used by efield)
  dhscf.f  : Calls to efield and shaper
  efield.f : (new) External electric field implementation
  fdf.f    : Added electric field units
  Makefile : Added cross.f and efield.f
  siesta.f : Call to shaper
  shaper.f : New argument to return the bulk directions
  siesta.tex : ExternalElectricField documented
========================================================================
Version: 0.8.34
Date: 1998/02/19 17:02:22
Title: Calculate XC potential only where there is density
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Up to this point the XC potential was calculated for the whole grid.
  Now it is calculated only for those points for which there is a finite
  electronic density.

Files:
  xc.f
========================================================================
Version: 0.8.33
Date: 1998/02/17 16:31:04
Title: FIX: divided-by-zero problem in MD T=0. Miscellanea.
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Small modifications to correct problems with initial temperature 
  for MD (when T=0). Additionally:
  - Parameter namax added to coceri.f and outcoor.f
  - Small modifications of extrapolation procedure between
    succesive minimizations in orderN (make linear extrapolation
    ONLY when last minimization took less than 50 iterations)
  - Redefine parameter restart (from 50 to 300) in cgwf.f

Files:
  vmb.f    : T=0 problem fixed
  siesta.f : id.
  outcoor.f: parameter namax added
  coceri.f : id.
  ordern.f : extrapolation
  cgwf.f   : restart parameter
========================================================================
Version: 0.8.32
Date: 1998/02/17 16:31:04
Title: Velocities in XV for all dynamics options 
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  The velocities are now written in file .XV . Before they were all
  zero except for the Verlet option. It allows their use on restart.

Files:
  dynamics.f
========================================================================
Version: 0.8.31
Date: 1998/02/11 19:07:00
Title: FIX: Non-standard FORTRAN in Emilio's 0.8.37 and 0.8.39 patches
Author: Alberto Garcia (wdpgaara@lg.ehu.es)

Description:
  Data statement out of order in redata.f, initdm.f, and recoor.f
  Adjustable array illegal in f77 in outcoor.f and coceri.f

Files:
  outcoor.f
  coceri.f
  initdm.f
  recoor.f
  redata.f
========================================================================
Version: 0.8.30
Date: 1997/12/31 12:46:41
Title: Non conventional order in p and d orbitals (Mulliken)
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  Noted that the order how the p and d orbitals are stored, and 
  appear in places like Mulliken output, is not conventional. It was
  no bug, it was supposed to be so, but it was not clear. It has been
  made clear now in the manual, in the WriteMullikenPop explanation,
  among other instances. The order is: y, z, x for the p's, and
  xy, yz, z^2, xz and x^2-y^2, for the d's.

Files:
  siesta.tex (in Docs/) : documented.
========================================================================
Version: 0.8.29
Date: 1997/12/27 12:31:09
Title: Initial spin-polarization input for spin-polarized calculations
Author: Emilio Artacho (emilio.artacho@uam.es) 

Description:
  Modification in DM initialization:
  - Now it is done in new separate subroutine  initdm.f
  - It allows the introduction of initial spin polarizations
    atom by atom with new %block DM.InitSpin: there is one line per 
    atom to be spin-polarized, containing the atom index and the desired
    initial spin-polarization. Example:
             %block DM.InitSpin
                5  -1.
                3   +
                7   -
                +   1
               -.5  2
             %endblock DM.InitSpin

Files:
  initdm.f : (new) DM initialization, including spin if required.
  siesta.f : calling initdm.f
  Makefile : include reference to initdm.f
  siesta.tex : documentation on DM.InitSpin block
  minvec.f : spelling (no effect of code)
  idiag.f  : id.
========================================================================
Version: 0.8.28
Date: 1997/12/23 19:58:24
Title: Storage of density matrices for Pulay convergence acceleration
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Pulay mixing routines have been modified.  
  * An option is included to store the intermediate information
    in files or in memory. The fdf variable is DM.PulayOnFile.
    If true, SIESTA will use files SystemLabel.P1 and SystemLabel.P2
    to store the intermediate information. If false, it will 
    be stored in auxiliary arrays in memory. 
  * The I/O from disk has been optimized, to decreasse the size
    of the Pulay files and also the number of I/O operations
  * IMPORTANT: A new parameter has been included in siesta.h !!!!
    This is necessary to open space for the Pulay auxiliary
    storage arrays.  This means that old siesta.h files will NOT
    work with the new version, unless the new variable is defined.

Files:
  pulayx.f
  redata.f
  siesta.f
  siesta.h
  siesta.tex
========================================================================
Version: 0.8.27
Date: 1997/12/23 19:58:24
Title: Initial temperature for molecular dynamics
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  A new MD feature has been implemented: the possibility of
  specifying an initial temperature for the MD sumulation.
  The fdf variable is MD.InitialTemperature.
  The atomic velocities are randomly assigned according to the
  Maxwell-Boltzmann distribution (imposing the constraint of
  zero center of mass velocity). 

Files:
  vmb.f   : (new)
  redata.f
  siesta.f
  Makefile : include vmb.f
  siesta.tex
========================================================================
Version: 0.8.26
Date: 1997/12/23 19:58:24
Title: Renormalize the charge for ordern
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  The density matrix routine for O(N) has been slightly modified,
  to renormalize the DM so that the total charge is the correct
  one. This is quite necessary to achieve selfconsistency with
  the O(N) functional, although is not well justified (in principle
  is not variational!!).

Files:
  egandd.f: Small modifications to renormalize the charge
  denmat.f: Modified to renormalize the density matrix
========================================================================
Version: 0.8.25
Date: 1997/12/23 19:58:24
Title: FIX: Corrected scale of the time step
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  An IMPORTANT error in the dynamics routines has been corrected.
  The routines had a unit conversion error that affected the 
  scale of the time step (the dynamics were correct,
  but the time units were scaled).

Files:
  dynamics.f: Corrects serious error of units in foverm variable
========================================================================
Version: 0.8.24
Date: 1997/12/22 20:49:04
Title: Input/Output: Coordinates, Lattice Parameters, Pseudopotentials,
       Maximum and Mean Forces, Splitgauss
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  * Coordinates input has been separated to new subroutine (recoor)
    that hangs from redata.
  * Output of cell vectors and parameters separated into new routine
    (outcell) (only for intermediate and final writing in case of
    lattice relaxation or MD Parrinello-Rahman)
  * More flexible output of coordinates (both intermediate and final):
    - It can write in any of the formats that can be used for input
      (except ScaledCartesian if there was no lattice parameter in input)
    - Output format specified in new fdf: AtomCoorFormatOut.
      Default (if not given): uses same as for input
      (AtomicCoordinatesFormat)
      For both fdf's the value 'Fractional' can be used instead of
      'ScaledByLatticeVectors'
    New subroutine (outcoor)
  * Optional writing of atomic coordinates in separate files with
    adequate formats for being read by:
    - XMOL (symbol and x y z in Ang)               WriteCoorXmol   true
    - CERIUS (cell pars, sym, x y z in fractional) WriteCoorCerius true
    New subroutines (coxmol, coceri)
  * Writes maximum force and residual mean square force 
    after total force
  * Writes atomic coordinates as x, y, z, is, Symbol, number. It can
    be taken to the fdf input file as is.
  * New possibility of introducing lattice vectors:
        %block LatticeParameters
           a  b  c  alpha  beta  gamma
        %endblock LatticeParameters
    It checks whether both blocks (LatticeParameters and LatticeVectors)
    are present, and stops with ERROR if it is the case. Otherwise
    it generates the vectors according to whatever is present or
    automatically if none.
  * redata now writes the vectors in rows (instead of columns as before) 
    and without the 'redata: ' so that they can be incorporated
    as written to the input.
  * Pseudopotentials will be read from 'syslabel'.vps instead of .psatom.data. 
    For backwards compatibility, if .vps is not found, then .psatom.data 
    is looked for. In this case a warning is given.
  * Making Siesta write a message saying when it reads XV
  * Scale factor for splitgauss is now a scale factor and not the alpha
    in exp(-alpha*r**2). Scale factor is 1/sqrt(alpha)
  * Parrinello-Rahman MD (with or w/o quench) now writes stress tensor and
    lattice parameters for every time step
  * Mulliken: formatted output (pure cosmetics)

Files:
  recoor.f : (new) reads coordinates
  outcell.f: (new) writes cell vectors
  outcoor.f: (new) writes coordinates
  coxmol.f : (new) writes coordinates in XMol format in a separate file
  coceri.f : (new) writes coordinates in CERIUS format in a separate file
  ioxv.f   : writes message
  mulliken.f : Cosmetics
  redata.f : calling
  siesta.f : calling 
  atom.f   : reading .vps + scale factor for splitgauss.
  Makefile
  siesta.tex
========================================================================
Version: 0.8.23
Date: 1997/12/11 17:42:24
Title: Added check for excesive proximity between atoms
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  The program warns about atoms being closer than a specific distance:
  one Bohr by default, which can be modified by 
    WarningMinimumAtomicDistance
  Helpful to avoid the frequent errors in coordinate input, which,
  when atoms are extremely close originates an overlap matrix error.

Files:
  siesta.f
  siesta.tex
========================================================================
Version: 0.8.22
Date: 1997/12/11 17:42:24
Title: Plotting charge density, LDOS(x,y,z), Potentials
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Plotting SIESTA's outputs in real space. All plots are done in
  two steps:
   * Running SIESTA with an option for it to write a file with the
     information to be plotted:
      - SaveRho                    : logical: valence charge density 
                                     (pseudocore)
      - SaveElectrostaticPotential : logical: Pseudopots + Hartree
      - SaveTotalPotential         : logical: id + XC
      - LocalDensityOfStates       : data block: charge density 
                                     associated to an energy range 
                                     specified in the block:
                                        %block LocalDensityOfStates
                                           -3.50  0.00   eV
                                        %endblock LocalDensityOfStates
     These informations are stored in corresponding files (.RHO, .VH,
     .VT, .LDOS, respectively). It is stored: information about the
     real-space grid (defined by the cutoff => fineness of plot depends
     on cutoff!!) and values of the specific funtion at the grid points.
   * Generating a plot for X11 and/or Postscript, etc.
     This is done with the utility plrho program now at Util/Plrho.
     It requires the presence in the computer of the graphic library
     PGPLOT, set of FORTRAN subroutines to plot on different devices.
     It is public domain and not difficult to install.
       Plrho plots isosurfaces (surfaces of constant value of the
     particular function, like traditional plots of orbitals) in 3D
     using perspective and shading. It allows plotting two functions
     at the same time: First function (say Rho) as isosurface, and 
     the value of the second function (say electrostatic potential)
     is plotted on the Rho isosurface with a color coding (similar 
     to GRASP for biopolymers).

Files:
  iorho.f
  siesta.f
  dhscf.f
  siesta.tex
  Util/README
  Util/Plrho/ new directory wi th new files:
    plrho.f, plrho.h, paste.f, plsurf.f, rotate.f, icolor.f, pltr3d.f, 
    plrho_guide.txt, plrho.dat, and README
========================================================================
Version: 0.8.21
Date: 1997/11/5 10:59:49
Title: FIX: Correcting input/output for coordinates and velocities .XV
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  (1) Corrected output unit for writing coordinates and velocities
      Fri Oct 24 18:16:00 1997
  (2) An incorrect 'write(iu,*) na' changed to read
      Wed Nov  5 10:59:49 1997

Files:
  ioxv.f
========================================================================
Version: 0.8.20
Date: 1997/10/24 18:16:00
Title: Shift all atomic coordinates by shifting the origins
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Vector specifying a rigid shift to apply to the atomic coordinates,
  given in the same format and units as these. Notice that the atomic
  positions (shifted or not) need not be within the cell formed by
  LatticeVectors, since periodic boundary conditions are always
  assumed. 
    %block AtomicCoordinatesFormat
        1.000   3.000   2.000
    %endblock AtomicCoordinatesFormat

Files:
  redata.f
  siesta.tex
========================================================================
Version: 0.8.19
Date: 1997/10/22 10:12:06
Title: FIX: Added a tolerance in vector-length comparisons in minvec.f
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Some systems entered an infinite loop in the first call to DHSCF
  (building grid etc) due to a strict comparison of two vectors in
  minvec.f. Added a tolerance, problem solved. (It used to happen 
  in a Linux system at least).

Files:
  minvec.f
========================================================================
Version: 0.8.18
Date: 1997/10/16 18:14:16
Title: Off-site orbitals: fixes and changes for new basis handling
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Description:
  Off-site orbitals: to use them new species has to be defined, and
  each orbital center has to be regarded as an 'atom' of that 'species'
  and coordinates have to be assigned to it. Two kinds
   * Orbitals that would correspond to some atom, but the atom is not 
     there. The species is to be given the corresponding atomic number
     with negative sign. Siesta will put the orbitals of that atom
     in the given ccordinates but without pseudopotentail and without
     its electrons. Useful for calculating the basis-set superposition
     error (BSSE).
   * Bessel functions. Corresponding node at r_c. EnergyShift has no
     meaning here. The r_c has to be gicen in the PAO_basis_and_PS_lmax
     block.

Files:
  redata.f
  atom_subs.f
  atom.f 
========================================================================
Version: 0.8.17
Date: 1997/10/15 18:08:52
Title: New makefile options for IBMs and DECs without libraries + RANLIB
Author: Alberto Garcia (wdpgaara@lg.ehu.es) and Emilio Artacho

Description:
  - unknown.make: Added dummy RANLIB command to warn the user.
  - New makefile ARCH options for IBMs and DECs without libraries: 
    osf and ibm

Files:
  unknown.make
  ibm.f
  ibm.make
  osf.f
  osf.make
  siesta.tex
========================================================================
Version: 0.8.16
Date: 1997/9/26 17:30:03
Title: Supercell: fixes and improvements
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  - Imposed the translational supercell symmetry on forces.
  - Changed the call to hsparse and xijorb to improve the performance of
    diagon when there is a supercell.
  - Changed the k-grid default to gamma of the SUPER cell.
  - Improved performance of diagon for a supercell.

Files:
  siesta.f
  kgrid.f
  xijorb.f
  diagon.f
  hsparse.f
  iorder.f
  ordvec.f
  Makefile
  siesta.tex
========================================================================
Version: 0.8.15
Date: 1997/9/26 17:30:03
Title: FIX: Stress & forces with part core  + automatic cell generation
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  - Corrected force and stress with partial core correction.
  - Added printout of the number of mesh points.
  - Corrected error in automatic cell generation.

Files:
  dhscf.f
  diagon.f
  siesta.f
  redata.f
  siesta.tex
========================================================================
Version: 0.8.14
Date: 1997/8/28 15:25:16
Title: siesta.PAO.BasisType --> PAO.BasisType
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Description:
  Old FDF label siesta.PAO.BasisType is now PAO.BasisType.
  Its possible values: split, nodes, nonodes, user, and splitgauss.

Files:
  atom.f
  Examples/h2o.fdf
  Examples/h2o.gga.fdf
========================================================================
Version: 0.8.13
Date: 1997/8/25 18:42:20
Title: Manual (quick start, introduction) + Utilities (new rrsiesta)
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  * Manual siesta.tex:
    - Largely expanded INTRODUCTION section.
    - New QUICK START section.
    - New k-sampling options documented.
    - New error&warning messages and two known problems documented.
  * Script utilities:
    - New rrsiesta: Really-run-siesta. Keeps recompiling until siesta 
      really runs. 
    - rsiesta: Extracts from output all errors and warnings and prints 
      them at the end.

Files:
  Util/rrsiesta (new)
  Util/rsiesta
  siesta.tex
========================================================================
Version: 0.8.12
Date: 1997/8/25 18:42:20
Title: k-sampling, supercells, and bands
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  * Supercell: New fdf block that allows automatic generation of a
    supercell out of the repetition of the unit cell. Coordinates
    have to be given only for atoms in the unit cell.
      %block SuperCell
         M(1,1)  M(2,1)  M(3,1)
         M(1,2)  M(2,2)  M(3,2)
         M(1,3)  M(2,3)  M(3,3)
      %endblock SuperCell
    and the supercell is defined as 
    SuperCell(ix,i) = \sum_j CELL(ix,j)*M(j,i).
    Diagonalization is done for the unit cell.
    DHSCF works with the supercell.
  * k-sampling: Improved. But it can only be done if a supercell is
    defined such that any atom only sees one image of any other.
  * Bands: k-lines are introduced to obtain eigenvalues along them
    for conventional band (spaghetti) plots.

Files:
  idiag.f  (new)
  bands.f  (new)
  diagon.f
  kgrid.f
  redata.f
  siesta.f
  siesta.h
  Src/Include/siesta.h
  Makefile
  siesta.tex
========================================================================
Version: 0.8.11
Date: 1997/8/8 18:53:19
Title: FIX: Found the bug in stress calculation
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  There was a term missing in the stress calculation associated to the
  derivative of 1/r in the electrostatic energy (at last it was not
  related with the orbitals' scale factors as speculated before).
    There was an additional term missing for GGA. The whole has been 
  restructured. The new contribution is calculated in poison

Files:
  Sys/osfdxml.f  : Added stress to argument list of poison.
  Sys/bsd.f      : id.
  Sys/general.f  : id.
  Sys/ibmessl.f  : id.
  xc.f
  dhscf.f
  Makefile
========================================================================
Version: 0.8.10
Date: 1997/8/8 18:09:25
Title: Input for controlling Pulay mixing
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  The fdf variable DM.NumberPulay is introduced. It controls Pulay 
  mixing by stating that Pulay is to be performed every n iterations
  (the others being linear mixing) n being the value given in 
  DM.NumberPulay. If less than 2 it performs no Pulay mixing.
  The mixing itself was introduced before by Pablo but another
  input was used.

Files:
  pulayx.f
  redata.f
  siesta.f
  siesta.tex
========================================================================
Version: 0.8.9
Date: 1997/8/8 18:09:25
Title: Input for controlling initial spin density: Ferro or Antiferro
Author: Emilio Artacho (emilio.artacho@uam.es)

Description:
  The new FDF logical variable DM.InitSpinAF is introduced.
  It defines the initial spin density for a spin polarized calculation. 
  The spin density is initially constructed with the maximum possible
  spin polarization for each atom in its atomic configuration.
  This variable defines the relative orientation of the atomic
  spins:
    false: gives ferromagnetic order (all spins up).
    true: gives antiferromagnetic order. Up and down are assigned 
          according to order in the block 
          AtomicCoordinatesAndAtomicSpecies: up for the odd atoms, 
          down for even.
Files:
  redata.f
  siesta.f
  siesta.tex
========================================================================
Version: 0.8.8
Date: 1997/8/7 12:05:06
Title: Utility scripts rsiesta, msiesta, and qsiesta
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Shell scripts introduced to run siesta from an arbitrary directory.
  All three use the environment variable SIESTA_DIR (../Src by default)

Files:
  Util/msiesta makes (compiles) siesta
  Util/rsiesta runs siesta directly
  Util/qsiesta submits a siesta batch job, using NQS batch system
========================================================================
Version: 0.8.7
Date: 1997/8/7 12:05:06
Title: Directory Include/ and ranger.f and ranger.h
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  * New directory Src/Include where all the recommended initial *.h
    (atom, dhscf, siesta, diagon, ordern) are stored, instead the
    Src/*.h0
  * Subroutine ranger.f separated from neighb.f, and new ranger.h

Files:
  Src/Include/atom.h, dhscf.h, diagon.h, ordern.h, siesta.h and ranger.h
  ranger.f (new)
  neighb.f
  Makefile 
========================================================================
Version: 0.8.6
Date: 1997/8/5 19:36:47
Title: Automatic basis implementation
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Description:
  Implemented into SIESTA the possibility of automatic generation of
  the basis orbitals requiring minimal (or even none) information
  at the input fdf file. General basis information for automatic basis
  generation:
   * PAO.EnergyShift: It defines the different (first-z) orbitals' r_c's
     by their excitation energy. Giving this number the basis generated
     is automatically a compensated basis (default 20 mRy).
   * PAO.SplitNorm: A standard to define default sensible radii for the 
     split-valence type of basis. It gives the amount of norm that
     the second-zeta split-off piece has to carry. The split radius 
     is defined accordingly. If multiple-zeta is used, the corresponding 
     radii are obtained by imposing smaller fractions of the SplitNorm 
     (1/2, 1/4 ...) value as norm carried by the higher zetas. (def 0.15)
   * PAO.BasisSize: Defines basis sizes: SZ or MINIMAL for single-z;
     DZ for double-z; and DZP or STANDARD for DZ plus polarization.
     (def DZP).
   * PAO.PolarizationOrbitals: true: adds polarization orbitals of
     perturbative kind.
   * PAO.SplitPolarizationOrbitals: true means to split the polarization
     orbitals of perturbative kind.
  These new inputs plus the old
   * siesta.PAO.BasisType (now split, splitgauss, nodes, nonodes, user),
  permit the definition of the basis with no need of the old 
  block PAO_basis_and_PS_lmax. If this block is not present, then the
  new block Chemical_species_label is needed, which inputs the different
  species for the different atoms:
     %block     ChemicalSpeciesLabel
        1    6    C
     %endblock  ChemicalSpeciesLabel
  Note that just writing this block and nothing else for the basis, siesta
  generates a quite sensible basis for the atoms involved (in this case 
  just carbon): DZP, cutting with an energy shift of 20 mRy (approx 
  4.2 Bohr for carbon), splitting with 0.15 of the norm, etc. If the
  PAO_basis_and_PS_lmax is there, then only those data which are specified
  with a zero will be generated automatically. Nonzero specifications in
  this block have priority.
     A file is written for each atom called 'label'.PAO.basis with the
  numerical basis used. Same format as read by PAO.BasisType = user.

Files:
  parse.f   : (new) routine which parses an input line into names 
              and numbers
  atom.f    : Basis changes heavily here.
  initatom.f: changed interface and added calls to chkdim
  redata.f  : PAO_basis_and_PS_lmax is now optional.
              Added Chemical_species_label block.
              Added argument atm_label.
  siesta.f  : changed interfaces to redata and initatom
  Makefile  : added parse.f
========================================================================
Version: 0.8.5
Date: 1997/8/4 18:12:39
Title: FIX: Corrected a SEVERE bug for spin polarization
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  Corrected a SEVERE bug for spin polarization. Correct ispin
  index in eigenvalue printout.

Files:
  siesta.f
========================================================================
Version: 0.8.4
Date: 1997/7/24 15:46:34
Title: Pulay mixing
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)

Description:
  Introduced new routine to perform Pulay mixing: 
  Modified and partly re-written by P. Ordejon, July'97, on a routine
  original of In-Ho Lee, Beckman Inst., Univ. of Illinois, Mar. 25 '97.
  It represents an SCF convergence accelerator nased on storing the
  history of convergence for a few cycles and guessing the next based
  on that story.

Files:
  pulayx.f
  siesta.f
  Makefile
========================================================================
Version: 0.8.3
Date: 1997/7/21 14:45:48
Title: Alaternative local pseudopotential for shallow cores
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)

Description:
  The local pseudopot is usially the one generated by a positive charge
  equal to the net of the core, but spread in a Gaussian of the width 
  of the core. The core radius is taken as the radius outside which
  the pseudopotentials all (s,p,d..) go like Z/r within a tolerance. 
  This cutoff is also defining the range of the KB projectors
    However, atoms with shallow cores (Ga, Ge, ...) demand a very
  long core radius, not necessarily because the different pseudopots
  remain different for long radii, but because the charge of the core
  spreads and the Z/r behavior comes too slowly.
    For these cases (controlled by an if, if the value of that core 
  radius is too long) an alternative local pseudopotential is defined:
  A smooth curve ( Vloc(r)=v3exp(v1*r^2+v2*r^3) ) for  r < Rc(KB) 
  is matched to the pseudopot coming from r > Rc(KB). Rc(KB) is the
  new core radius (for the KB) very close to the one used in the 
  atomic program, and the one for which diff pseudopots converge to one.
  There is also the possibility of using 
  Vloc(r)=v4exp(v1*r^2+v2*r^3+v3*r^4) for matching not only value and
  first derivative, but also second derivative.
    The program does everything. ATOM informs in output.
  
Files:
  atom.f
  atom_subs.f
========================================================================
Version: 0.8.2
Date: 1997/7/16 15:00:22
Title: Makefile: a unique file for different architectures
Author: Alberto Garcia (wdpgaara@lg.ehu.es)

Description:
  Compilation procedure for SIESTA using one only Makefile file. The
  user has to define the system variable ARCH taking one of the 
  prepared possibilities in Src/Sys (like export ARCH=linux). 
  The new directoy Src/Sys has the .make files for the different
  architectures (compiler names, flags and other pecularities) and
  the fortran subroutines that depend on the machine: cputim.f
  and others like poison.f that may call propriety libraries.
  general.f is all purpose, all architecture, and selfcontained
  for the use on any platform.
    This way, the old architecture adapted files in Src (poison, 
  cputim, for different systems) disappear.

Files:
  Makefile
  Sys/osfdxml.f
  Sys/bsd.f
  Sys/general.f
  Sys/ibmessl.f
  Sys/ibmessl.make
  Sys/linux.make
  Sys/osfdxml.make
  Sys/freebsd.make
  Sys/hp.make
  makefile, Makefile.DEC, Makefile.IBM, Makefile.linux, 
  poison.general.f, cputim.general.f, poison.DEC.f, poison.IBM.f, 
  poison.f, cputim.DEC.f, cputim.IBM.f, and cputim.f  all disappear.
========================================================================
Version: 0.8.1
Date: 1997/7/15 21:39:57
Title: k-sampling
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  k-sampling implementation. It is only partial since dhscf.f and all 
  dealings in the grid are left untouched (and real). It is therefore
  only possible to do k-samplings on cells such that any atom sees only
  one image of any other atom. K-sampling in this case is then just
  mutiplying by phases in the right places.

Files:
  atom.f
  cdiag.f
  dhscf.f
  diagon.f
  fermid.f
  kgrid.f (new)
  rdiag.f
  rdiagon.f (supressed)
  siesta.f
  siesta.h
  xijorb.f (new) Vectors among atom centers
  Makefile
  siesta.tex
========================================================================
Version: SIESTA 0.8 
Date: 1997/7/15 21:39:57
Title: Several: Output files + shaper + dipole + prdate + automatic cell
Author: Jose M. Soler (jose.soler@uam.es)

Description:
  * Several routines saving information to files: 
    - iodm.f   : the 'save' file is SystemLabel.DM
    - iolwf.f  : the 'save' file is SystemLabel.LWF
    - iohs.f   : writes/reads H y S
    - iorho.f  : writes/reads rho in the mesh
    - ioxv.f   : writes/reads positions and velocities 
  * Dipole moment is calculated from grid integration
  * shaper.f obtains the shape of a system: molecule, chain, slab, solid
  * prdate: prints time, date and computer name at the beginning and
    the end of the calculation in the output file.
  * Automatic cell: if there is no lattice parameter nor lattice vectors
    specified in input, they are all generated such that there is no
    overlap between cells (plus a 10% extra) (shape: molecule)
      If the lattice parameter is given but not the lattice vectors a
    cubic cell is assumed.

Files:
  dipole.f
  dhscf.f
  iodm.f
  iolwf.f
  iohs.f
  iorho.f
  ioxv.f
  redata.f
  shaper.f
  prdate.f
  siesta.f
  Makefile
  siesta.tex
========================================================================

            PRIOR TO SIESTA 0.8: Some important changes
                  (see Log.Messages for details)

========================================================================
Date: 1997/6/23 16:28:07
Title: SIESTA optimization, including adaptation to dxml of DEC
Author: Jose M. Soler (jose.soler@uam.es)
========================================================================
Date: 1997/6/6 17:33:15
Title: OrderN options (Kim, Ordejon-Mauri, file)
       siesta.h generation
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)
========================================================================
Date: 1997/5/6 16:54:33
Title: Mulliken populations in output
Author: Pablo Ordejon (ordejon@condmat01.geol.uniovi.es)
========================================================================
Date: 1997/4/16 20:20:15
Title: Smooth core charge for local pseudopot: core overlap handling
Author: Daniel Sanchez-Portal (daniel@polar.fmc.uam.es)
========================================================================
Date: Once upon a time
Title: Atomic program package for pseudopotential generation:
       Berkeley's code, maintained by Alberto Garcia, is incorporated
       into directory Pseudo
Author: Alberto Garcia (wdpgaara@lg.ehu.es)
========================================================================
